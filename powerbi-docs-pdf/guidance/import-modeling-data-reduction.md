---
title: เทคนิคการลดข้อมูลเพื่อการนำเข้าการสร้างแบบจำลอง
description: ทำความเข้าใจเทคนิคที่แตกต่างกันเพื่อช่วยลดข้อมูลที่โหลดลงในแบบจำลองการนำเข้า
author: peter-myers
ms.author: v-pemyer
ms.reviewer: asaxton
ms.service: powerbi
ms.subservice: powerbi
ms.topic: conceptual
ms.date: 08/05/2019
ms.openlocfilehash: 5476a87d21f7a5e49850078e490b25c3d8a4f5d8
ms.sourcegitcommit: 653e18d7041d3dd1cf7a38010372366975a98eae
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 12/01/2020
ms.locfileid: "96419371"
---
# <a name="data-reduction-techniques-for-import-modeling"></a><span data-ttu-id="adfd5-103">เทคนิคการลดข้อมูลเพื่อการนำเข้าการสร้างแบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="adfd5-103">Data reduction techniques for Import modeling</span></span>

<span data-ttu-id="adfd5-104">บทความนี้มีเป้าหมายให้ตัวสร้างแบบจำลอง Power BI Desktop พัฒนาแบบจำลองการนำเข้า</span><span class="sxs-lookup"><span data-stu-id="adfd5-104">This article targets Power BI Desktop data modelers developing Import models.</span></span> <span data-ttu-id="adfd5-105">ซึ่งอธิบายเทคนิคที่แตกต่างกันเพื่อช่วยลดข้อมูลที่โหลดลงในแบบจำลองการนำเข้า</span><span class="sxs-lookup"><span data-stu-id="adfd5-105">It describes different techniques to help reduce the data loaded into Import models.</span></span>

<span data-ttu-id="adfd5-106">จะมีการโหลดแบบจำลองการนำเข้าพร้อมข้อมูลที่ถูกบีบอัดและปรับให้เหมาะสม จากนั้นจึงเก็บข้อมูลลงในดิสก์โดยกลไกที่จัดเก็บข้อมูล VertiPaq</span><span class="sxs-lookup"><span data-stu-id="adfd5-106">Import models are loaded with data that is compressed and optimized and then stored to disk by the VertiPaq storage engine.</span></span> <span data-ttu-id="adfd5-107">เมื่อมีการโหลดข้อมูลต้นฉบับลงในหน่วยความจำ จำเป็นต้องทำการบีบอัด 10 เท่า ดังนั้นจึงเป็นเรื่องสมเหตุสมผลที่ว่าข้อมูลต้นฉบับขนาด 10 GB สามารถบีบอัดให้มีขนาดประมาณ 1 GB ได้</span><span class="sxs-lookup"><span data-stu-id="adfd5-107">When source data is loaded into memory, it is possible to see 10x compression, and so it is reasonable to expect that 10 GB of source data can compress to about 1 GB in size.</span></span> <span data-ttu-id="adfd5-108">นอกจากนี้ เมื่อยังอยู่ในดิสก์ การลดลง 20% เพิ่มเติมสามารถดำเนินการได้</span><span class="sxs-lookup"><span data-stu-id="adfd5-108">Further, when persisted to disk an additional 20% reduction can be achieved.</span></span>

<span data-ttu-id="adfd5-109">แม้ว่าจะบรรลุผลสำเร็จจากประสิทธิภาพที่ได้จากกลไกที่จัดเก็บข้อมูล VertiPaq ถือเป็นสิ่งสำคัญที่คุณต้องพยายามลดขนาดข้อมูลที่จะทำการโหลดลงในแบบจำลองของคุณให้เหลือน้อยที่สุด</span><span class="sxs-lookup"><span data-stu-id="adfd5-109">Despite the efficiencies achieved by the VertiPaq storage engine, it is important that you strive to minimize the data that is to be loaded into your models.</span></span> <span data-ttu-id="adfd5-110">ซึ่งเป็นความจริง โดยเฉพาะอย่างยิ่งสำหรับแบบจำลองขนาดใหญ่ หรือแบบจำลองที่คุณคาดว่าจะเติบโตจนมีขนาดใหญ่ขึ้นเมื่อเวลาผ่านไป</span><span class="sxs-lookup"><span data-stu-id="adfd5-110">It is especially true for large models, or models that you anticipate will grow to become large over time.</span></span> <span data-ttu-id="adfd5-111">เหตุผลที่กระตุ้นความสนใจสี่ประการรวมถึง:</span><span class="sxs-lookup"><span data-stu-id="adfd5-111">Four compelling reasons include:</span></span>

- <span data-ttu-id="adfd5-112">ขนาดของแบบจำลองขนาดใหญ่อาจไม่ได้รองรับตามความจุของคุณ</span><span class="sxs-lookup"><span data-stu-id="adfd5-112">Larger model sizes may not be supported by your capacity.</span></span> <span data-ttu-id="adfd5-113">ความจุที่ใช้ร่วมกันสามารถโฮสต์แบบจำลองได้สูงสุดถึง 1 GB ในขณะที่ความจุแบบพรีเมียมสามารถโฮสต์แบบจำลองได้สูงสุดถึง 13 GB</span><span class="sxs-lookup"><span data-stu-id="adfd5-113">Shared capacity can host models up to 1 GB in size, while Premium capacities can host models up to 13 GB in size.</span></span> <span data-ttu-id="adfd5-114">สำหรับข้อมูลเพิ่มเติม โปรดอ่านบทความ [การสนับสนุนของ Power BI Premium สำหรับชุดข้อมูลขนาดใหญ่](../admin/service-premium-what-is.md)</span><span class="sxs-lookup"><span data-stu-id="adfd5-114">For further information, read the [Power BI Premium support for large datasets](../admin/service-premium-what-is.md) article.</span></span>
- <span data-ttu-id="adfd5-115">ขนาดแบบจำลองขนาดเล็กช่วยลดการช่วงชิงทรัพยากรความจุในหน่วยความจำเฉพาะ</span><span class="sxs-lookup"><span data-stu-id="adfd5-115">Smaller model sizes reduce contention for capacity resources, in particular memory.</span></span> <span data-ttu-id="adfd5-116">การดำเนินการนี้จะช่วยให้สามารถโหลดรูปแบบที่พร้อมกันได้มากขึ้นสำหรับระยะเวลาที่ยาวขึ้น ซึ่งส่งผลให้อัตราการขับออกของข้อมูลลดลง</span><span class="sxs-lookup"><span data-stu-id="adfd5-116">It allows more models to be concurrently loaded for longer periods of time, resulting in lower eviction rates.</span></span> <span data-ttu-id="adfd5-117">สำหรับข้อมูลเพิ่มเติม ดู [การจัดการความจุแบบพรีเมียม](../admin/service-premium-capacity-manage.md)</span><span class="sxs-lookup"><span data-stu-id="adfd5-117">For more information, see [Managing Premium capacities](../admin/service-premium-capacity-manage.md).</span></span>
- <span data-ttu-id="adfd5-118">แบบจำลองขนาดเล็กทำให้เกิดการรีเฟรชข้อมูลบรรลุผลได้เร็วขึ้น ซึ่งส่งผลให้มีการรายงานเวลาแฝงต่ำกว่า ปริมาณการรีเฟรชชุดข้อมูลที่สูงขึ้น และแรงดันน้อยลงในระบบแหล่งข้อมูลและทรัพยากรความจุ</span><span class="sxs-lookup"><span data-stu-id="adfd5-118">Smaller models achieve faster data refresh, resulting in lower latency reporting, higher dataset refresh throughput, and less pressure on source system and capacity resources.</span></span>
- <span data-ttu-id="adfd5-119">จำนวนแถวตารางที่มีขนาดเล็กกว่าอาจส่งผลให้มีการประเมินการคำนวณที่รวดเร็วกว่า ซึ่งสามารถส่งมอบให้ประสิทธิภาพการทำงานของคิวรีโดยรวมได้ดียิ่งขึ้น</span><span class="sxs-lookup"><span data-stu-id="adfd5-119">Smaller table row counts can result in faster calculation evaluations, which can deliver better overall query performance.</span></span>

<span data-ttu-id="adfd5-120">การลดข้อมูลที่แตกต่างกันที่ครอบคลุมในบทความนี้มีอยู่แปดเทคนิคด้วยกัน</span><span class="sxs-lookup"><span data-stu-id="adfd5-120">There are eight different data reduction techniques covered in this article.</span></span> <span data-ttu-id="adfd5-121">เทคนิคเหล่านี้ประกอบด้วย:</span><span class="sxs-lookup"><span data-stu-id="adfd5-121">These techniques include:</span></span>

- [<span data-ttu-id="adfd5-122">ลบคอลัมน์ที่ไม่จำเป็นออก</span><span class="sxs-lookup"><span data-stu-id="adfd5-122">Remove unnecessary columns</span></span>](#remove-unnecessary-columns)
- [<span data-ttu-id="adfd5-123">ลบแถวที่ไม่จำเป็นออก</span><span class="sxs-lookup"><span data-stu-id="adfd5-123">Remove unnecessary rows</span></span>](#remove-unnecessary-rows)
- [<span data-ttu-id="adfd5-124">จัดกลุ่มตามและสรุป</span><span class="sxs-lookup"><span data-stu-id="adfd5-124">Group by and summarize</span></span>](#group-by-and-summarize)
- [<span data-ttu-id="adfd5-125">ปรับชนิดข้อมูลคอลัมน์ให้เหมาะสม</span><span class="sxs-lookup"><span data-stu-id="adfd5-125">Optimize column data types</span></span>](#optimize-column-data-types)
- [<span data-ttu-id="adfd5-126">การตั้งค่าสำหรับคอลัมน์แบบกำหนดเอง</span><span class="sxs-lookup"><span data-stu-id="adfd5-126">Preference for custom columns</span></span>](#preference-for-custom-columns)
- [<span data-ttu-id="adfd5-127">ปิดใช้งานการโหลดคิวรี Power Query</span><span class="sxs-lookup"><span data-stu-id="adfd5-127">Disable Power Query query load</span></span>](#disable-power-query-query-load)
- [<span data-ttu-id="adfd5-128">ปิดใช้งานวันที่/เวลาอัตโนมัติ</span><span class="sxs-lookup"><span data-stu-id="adfd5-128">Disable auto date/time</span></span>](#disable-auto-datetime)
- [<span data-ttu-id="adfd5-129">สลับไปยังโหมดผสม</span><span class="sxs-lookup"><span data-stu-id="adfd5-129">Switch to Mixed mode</span></span>](#switch-to-mixed-mode)

## <a name="remove-unnecessary-columns"></a><span data-ttu-id="adfd5-130">ลบคอลัมน์ที่ไม่จำเป็นออก</span><span class="sxs-lookup"><span data-stu-id="adfd5-130">Remove unnecessary columns</span></span>

<span data-ttu-id="adfd5-131">คอลัมน์ของตารางแบบจำลองมีวัตถุประสงค์หลักอยู่สองประการด้วยกัน:</span><span class="sxs-lookup"><span data-stu-id="adfd5-131">Model table columns serve two main purposes:</span></span>

- <span data-ttu-id="adfd5-132">**การรายงาน** เพื่อสร้างการออกแบบรายงานที่เหมาะสมกับตัวกรอง กลุ่ม และสรุปข้อมูลแบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="adfd5-132">**Reporting**, to achieve report designs that appropriate filter, group, and summarize model data</span></span>
- <span data-ttu-id="adfd5-133">**โครงสร้างแบบจำลอง** โดยสนับสนุนความสัมพันธ์ของแบบจำลอง การคำนวณแบบจำลอง บทบาทการรักษาความปลอดภัย และแม้แต่การจัดรูปแบบสีข้อมูล</span><span class="sxs-lookup"><span data-stu-id="adfd5-133">**Model structure**, by supporting model relationships, model calculations, security roles, and even data color formatting</span></span>

<span data-ttu-id="adfd5-134">คอลัมน์ที่ไม่ได้ทำหน้าที่ตามวัตถุประสงค์เหล่านี้อาจถูกลบออก</span><span class="sxs-lookup"><span data-stu-id="adfd5-134">Columns that don't serve these purposes can probably be removed.</span></span> <span data-ttu-id="adfd5-135">จะเรียกการลบคอลัมน์เหล่านี้ว่า _การกรองแนวตั้ง_</span><span class="sxs-lookup"><span data-stu-id="adfd5-135">Removing columns is referred to as _vertical filtering_.</span></span>

<span data-ttu-id="adfd5-136">เราขอแนะนำให้คุณออกแบบแบบจำลองที่มีจำนวนคอลัมน์ที่แน่นอนโดยยึดตามข้อกำหนดการรายงานที่ทราบ</span><span class="sxs-lookup"><span data-stu-id="adfd5-136">We recommend that you design models with exactly the right number of columns based on the known reporting requirements.</span></span> <span data-ttu-id="adfd5-137">ข้อกำหนดของคุณอาจมีการเปลี่ยนแปลงเมื่อเวลาผ่านไป แต่ต้องจำไว้ว่าจะสามารถเพิ่มคอลัมน์ในภายหลังได้ง่ายขึ้นกว่าที่จะลบคอลัมน์ออกในภายหลัง</span><span class="sxs-lookup"><span data-stu-id="adfd5-137">Your requirements may change over time, but bear in mind that it's easier to add columns later than it is to remove them later.</span></span> <span data-ttu-id="adfd5-138">การลบคอลัมน์ออกสามารถแบ่งรายงานหรือโครงสร้างแบบจำลองออกได้</span><span class="sxs-lookup"><span data-stu-id="adfd5-138">Removing columns can break reports or the model structure.</span></span>

## <a name="remove-unnecessary-rows"></a><span data-ttu-id="adfd5-139">ลบแถวที่ไม่จำเป็นออก</span><span class="sxs-lookup"><span data-stu-id="adfd5-139">Remove unnecessary rows</span></span>

<span data-ttu-id="adfd5-140">ควรทำการโหลดตารางแบบจำลองด้วยจำนวนแถวน้อยที่สุดเท่าที่เป็นไปได้</span><span class="sxs-lookup"><span data-stu-id="adfd5-140">Model tables should be loaded with as few rows as possible.</span></span> <span data-ttu-id="adfd5-141">ซึ่งสามารถดำเนินการได้โดยการโหลดชุดแถวที่กรองแล้วลงในตารางแบบจำลองด้วยเหตุผลสองประการที่แตกต่างกัน: เพื่อกรองตามเอนทิตี้หรือตามเวลา</span><span class="sxs-lookup"><span data-stu-id="adfd5-141">It can be achieved by loading filtered rowsets into model tables for two different reasons: to filter by entity or by time.</span></span> <span data-ttu-id="adfd5-142">จะเรียกการลบแถวว่า _การกรองแนวนอน_</span><span class="sxs-lookup"><span data-stu-id="adfd5-142">Removing rows is referred to as _horizontal filtering_.</span></span>

<span data-ttu-id="adfd5-143">**การกรองตามเอนทิตี้** เกี่ยวข้องกับการโหลดชุดย่อยของข้อมูลต้นทางลงในแบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="adfd5-143">**Filtering by entity** involves loading a subset of source data into the model.</span></span> <span data-ttu-id="adfd5-144">ตัวอย่างเช่น ทำการโหลดหลักฐานสำหรับภูมิภาคเดียวเท่านั้น แทนที่จะโหลดหลักฐานการขายสำหรับยอดขายในทุกภูมิภาค</span><span class="sxs-lookup"><span data-stu-id="adfd5-144">For example, instead of loading sales facts for all sales regions, only load facts for a single region.</span></span> <span data-ttu-id="adfd5-145">วิธีการออกแบบนี้จะส่งผลให้มีแบบจำลองที่มีขนาดเล็กกว่า และยังสามารถกำจัดความจำเป็นในการกำหนดความปลอดภัยระดับแถว (แต่จะต้องให้สิทธิในชุดข้อมูลที่ระบุในบริการของ Power BI และสร้างรายงาน "ซ้ำ" ที่เชื่อมต่อกับชุดข้อมูลแต่ละรายการ)</span><span class="sxs-lookup"><span data-stu-id="adfd5-145">This design approach will result in many smaller models, and it can also eliminate the need to define row-level security (but will require granting specific dataset permissions in the Power BI service, and creating "duplicate" reports that connect to each dataset).</span></span> <span data-ttu-id="adfd5-146">คุณสามารถใช้ประโยชน์จากพารามิเตอร์ของ Power Query และไฟล์ Power BI Template เพื่อให้ง่ายต่อการจัดการและการเผยแพร่</span><span class="sxs-lookup"><span data-stu-id="adfd5-146">You can leverage the use of Power Query parameters and Power BI Template files to simplify management and publication.</span></span> <span data-ttu-id="adfd5-147">สำหรับข้อมูลเพิ่มเติม อ่านรายการเข้าที่บล็อก [เจาะลึกใน Query Parameter และ Power BI Template](https://powerbi.microsoft.com/blog/deep-dive-into-query-parameters-and-power-bi-templates/)</span><span class="sxs-lookup"><span data-stu-id="adfd5-147">For further information, read the [Deep Dive into Query Parameters and Power BI Templates](https://powerbi.microsoft.com/blog/deep-dive-into-query-parameters-and-power-bi-templates/) blog entry.</span></span>

<span data-ttu-id="adfd5-148">**การกรองตามเวลา** จะเกี่ยวข้องกับการจำกัดจำนวนของ _ประวัติข้อมูล_ ที่โหลดลงในตารางชนิดข้อเท็จจริง (และจำกัดจำนวนแถววันที่ที่โหลดลงในตารางวันที่แบบจำลอง)</span><span class="sxs-lookup"><span data-stu-id="adfd5-148">**Filtering by time** involves limiting the amount of _data history_ loaded into fact-type tables (and limiting the date rows loaded into the model date tables).</span></span> <span data-ttu-id="adfd5-149">เราขอแนะนำว่าคุณไม่ควรโหลดประวัติการใช้ทั้งหมดที่มีโดยอัตโนมัติ เว้นแต่ว่าข้อกำหนดนี้เป็นข้อกำหนดในการรายงานที่รู้จัก</span><span class="sxs-lookup"><span data-stu-id="adfd5-149">We suggest you don't automatically load all available history, unless it is a known reporting requirement.</span></span> <span data-ttu-id="adfd5-150">ซึ่งเป็นประโยชน์ในการทำความเข้าใจว่าตัวกรอง Power Query ที่ยึดตามเวลาสามารถทำเป็นพารามิเตอร์ได้ และแม้แต่ตั้งค่าให้ใช้ช่วงเวลาที่สัมพันธ์กัน (สัมพันธ์กับวันที่ทำการรีเฟรช ตัวอย่างเช่น เมื่อห้าปีที่ผ่านมา)</span><span class="sxs-lookup"><span data-stu-id="adfd5-150">It is helpful to understand that time-based Power Query filters can be parameterized, and even set to use relative time periods (relative to the refresh date, for example, the past five years).</span></span> <span data-ttu-id="adfd5-151">นอกจากนี้ โปรดพิจารณาว่าการเปลี่ยนแปลงย้อนหลังไปยังตัวกรองเวลาจะไม่แบ่งรายงานออก ซึ่งจะส่งผลให้ประวัติข้อมูลที่พร้อมใช้งานในรายงานมีน้อยลง (หรือมากขั้น)</span><span class="sxs-lookup"><span data-stu-id="adfd5-151">Also, bear in mind that retrospective changes to time filters will not break reports; it will just result in less (or more) data history available in reports.</span></span>

## <a name="group-by-and-summarize"></a><span data-ttu-id="adfd5-152">จัดกลุ่มตามและสรุป</span><span class="sxs-lookup"><span data-stu-id="adfd5-152">Group by and summarize</span></span>

<span data-ttu-id="adfd5-153">บางทีเทคนิคที่มีประสิทธิภาพที่สุดเพื่อลดขนาดแบบจำลองคือ การโหลดข้อมูลที่สรุปไว้ล่วงหน้า</span><span class="sxs-lookup"><span data-stu-id="adfd5-153">Perhaps the most effective technique to reduce a model size is to load pre-summarized data.</span></span> <span data-ttu-id="adfd5-154">สามารถใช้เทคนิคนี้เพื่อยกระดับของตารางชนิดข้อเท็จจริงได้</span><span class="sxs-lookup"><span data-stu-id="adfd5-154">This technique can be used to raise the grain of fact-type tables.</span></span> <span data-ttu-id="adfd5-155">อย่างไรก็ตามต้องเลือกอย่างใดอย่างหนึ่งซึ่งส่งผลให้ต้องสูญเสียรายละเอียดไป</span><span class="sxs-lookup"><span data-stu-id="adfd5-155">There is a distinct trade-off, however, resulting in loss of detail.</span></span>

<span data-ttu-id="adfd5-156">ตัวอย่างเช่น ตารางข้อเท็จจริงการขายต้นทางจะจัดเก็บหนึ่งแถวต่อบรรทัดใบสั่ง</span><span class="sxs-lookup"><span data-stu-id="adfd5-156">For example, a source sales fact table stores one row per order line.</span></span> <span data-ttu-id="adfd5-157">การลดข้อมูลที่สำคัญสามารถทำได้โดยการสรุปตัวชี้วัดการขายทั้งหมด การจัดกลุ่มตามวันที่ ลูกค้า และผลิตภัณฑ์</span><span class="sxs-lookup"><span data-stu-id="adfd5-157">Significant data reduction could be achieved by summarizing all sales metrics, grouping by date, customer, and product.</span></span> <span data-ttu-id="adfd5-158">จากนั้นพิจารณาว่าการลดข้อมูลที่มีนัยสำคัญมากยิ่งขึ้นสามารถบรรลุได้โดยการจัดกลุ่มตามวันที่ _ในระดับเดือน_</span><span class="sxs-lookup"><span data-stu-id="adfd5-158">Consider, then, that an even more significant data reduction could be achieved by grouping by date _at month level_.</span></span> <span data-ttu-id="adfd5-159">ซึ่งอาจเป็นไปได้ว่ามีการลดขนาดแบบจำลองที่เป็นไปได้ถึง 99% แต่การรายงานในระดับวัน หรือระดับใบซื้อแต่ละครั้งไม่สามารถใช้ได้อีกต่อไป</span><span class="sxs-lookup"><span data-stu-id="adfd5-159">It could achieve a possible 99% reduction in model size, but reporting at day level—or individual order level—is no longer possible.</span></span> <span data-ttu-id="adfd5-160">การตัดสินใจที่จะสรุปข้อมูลประเภทข้อเท็จจริงมักสัมพันธ์กับการต้องเลือกอย่างใดอย่างหนึ่ง</span><span class="sxs-lookup"><span data-stu-id="adfd5-160">Deciding to summarize fact-type data always involves tradeoffs.</span></span> <span data-ttu-id="adfd5-161">การต้องเลือกอย่างใดอย่างหนึ่งนี้อาจลดลงโดยการออกแบบแบบจำลองผสม และตัวเลือกนี้จะอธิบายไว้ในเทคนิค [สลับไปยังโหมดผสม](#switch-to-mixed-mode)</span><span class="sxs-lookup"><span data-stu-id="adfd5-161">Tradeoff could be mitigated by a Mixed model design, and this option is described in the [Switch to Mixed mode](#switch-to-mixed-mode) technique.</span></span>

## <a name="optimize-column-data-types"></a><span data-ttu-id="adfd5-162">ปรับชนิดข้อมูลคอลัมน์ให้เหมาะสม</span><span class="sxs-lookup"><span data-stu-id="adfd5-162">Optimize column data types</span></span>

<span data-ttu-id="adfd5-163">กลไกการจัดเก็บข้อมูล VertiPaq ใช้โครงสร้างข้อมูลที่แยกต่างหากสำหรับแต่ละคอลัมน์</span><span class="sxs-lookup"><span data-stu-id="adfd5-163">The VertiPaq storage engine uses separate data structures for each column.</span></span> <span data-ttu-id="adfd5-164">โครงสร้างข้อมูลเหล่านี้บรรลุการปรับให้เหมาะสมที่สุดสำหรับข้อมูลคอลัมน์ตัวเลข ซึ่งใช้การเข้ารหัสค่าตามการออกแบบ</span><span class="sxs-lookup"><span data-stu-id="adfd5-164">By design, these data structures achieve the highest optimizations for numeric column data, which use value encoding.</span></span> <span data-ttu-id="adfd5-165">อย่างไรก็ตาม ข้อความและข้อมูลที่ไม่ใช่ตัวเลขอื่น ๆ จะใช้การเข้ารหัสข้อมูลที่ถูกย่อย</span><span class="sxs-lookup"><span data-stu-id="adfd5-165">Text and other non-numeric data, however, uses hash encoding.</span></span> <span data-ttu-id="adfd5-166">ซึ่งจำเป็นต้องใช้กลไกการจัดเก็บข้อมูลเพื่อกำหนดตัวระบุตัวเลขสำหรับแต่ละค่าข้อความที่ไม่ซ้ำกันที่ประกอบอยู่ในคอลัมน์</span><span class="sxs-lookup"><span data-stu-id="adfd5-166">It requires the storage engine to assign a numeric identifier to each unique text value contained in the column.</span></span> <span data-ttu-id="adfd5-167">ซึ่งเป็นตัวระบุตัวเลขซึ่งจากนั้นจะถูกจัดเก็บไว้ในโครงสร้างข้อมูล ที่จำเป็นต้องใช้การค้นหาข้อความที่ถูกย่อยระหว่างจัดเก็บและคิวรี</span><span class="sxs-lookup"><span data-stu-id="adfd5-167">It is the numeric identifier, then, that is then stored in the data structure, requiring a hash lookup during storage and querying.</span></span>

<span data-ttu-id="adfd5-168">ในบางอินสแตนซ์ที่เฉพาะเจาะจง คุณสามารถแปลงข้อมูลข้อความต้นฉบับเป็นค่าตัวเลขได้</span><span class="sxs-lookup"><span data-stu-id="adfd5-168">In some specific instances, you can convert source text data into numeric values.</span></span> <span data-ttu-id="adfd5-169">ตัวอย่างเช่น หมายเลขใบสั่งขายอาจขึ้นต้นตามค่าข้อความได้อย่างสม่ำเสมอ (เช่น "SO123456")</span><span class="sxs-lookup"><span data-stu-id="adfd5-169">For example, a sales order number may be consistently prefixed by a text value (e.g. "SO123456").</span></span> <span data-ttu-id="adfd5-170">สามารถลบคำนำหน้าออก และค่าหมายเลขใบสั่งที่แปลงเป็นจำนวนเต็ม</span><span class="sxs-lookup"><span data-stu-id="adfd5-170">The prefix could be removed, and the order number value converted to whole number.</span></span> <span data-ttu-id="adfd5-171">สำหรับตารางขนาดใหญ่ การดำเนินการนี้อาจส่งผลให้มีการลดข้อมูลที่มีนัยสำคัญ โดยเฉพาะอย่างยิ่งเมื่อคอลัมน์ประกอบด้วยค่าคาร์ดินาลลิตี้ที่สูงหรือไม่ซ้ำกัน</span><span class="sxs-lookup"><span data-stu-id="adfd5-171">For large tables, it can result in significant data reduction, especially when the column contains unique or high cardinality values.</span></span>

<span data-ttu-id="adfd5-172">ในตัวอย่างนี้ เราขอแนะนำให้คุณตั้งค่าคุณสมบัติการให้ข้อสรุปค่าเริ่มต้นของคอลัมน์เป็น "ไม่สรุป"</span><span class="sxs-lookup"><span data-stu-id="adfd5-172">In this example, we recommend that you set the column Default Summarization property to "Do Not Summarize".</span></span> <span data-ttu-id="adfd5-173">การดำเนินการนี้จะช่วยลดการสรุปค่าหมายเลขคำสั่งซื้อที่ไม่เหมาะสม</span><span class="sxs-lookup"><span data-stu-id="adfd5-173">It will help to minimize the inappropriate summarization of the order number values.</span></span>

## <a name="preference-for-custom-columns"></a><span data-ttu-id="adfd5-174">การตั้งค่าสำหรับคอลัมน์แบบกำหนดเอง</span><span class="sxs-lookup"><span data-stu-id="adfd5-174">Preference for custom columns</span></span>

<span data-ttu-id="adfd5-175">กลไกที่จัดเก็บข้อมูล VertiPaq จัดเก็บคอลัมน์จากการคำนวณแบบจำลอง (ที่กำหนดใน DAX) เช่นเดียวกับคอลัมน์ที่มีแหล่งที่มาจาก Power Query ตามปกติ</span><span class="sxs-lookup"><span data-stu-id="adfd5-175">The VertiPaq storage engine stores model calculated columns (defined in DAX) just like regular Power Query-sourced columns.</span></span> <span data-ttu-id="adfd5-176">อย่างไรก็ตาม โครงสร้างข้อมูลจะถูกจัดเก็บให้มีความแตกต่างกันเล็กน้อย และโดยทั่วไปแล้วจะทำให้การบีบอัดมีประสิทธิภาพลดลง</span><span class="sxs-lookup"><span data-stu-id="adfd5-176">However, the data structures are stored slightly differently, and typically achieve less efficient compression.</span></span> <span data-ttu-id="adfd5-177">นอกจากนี้จะมีการสร้างโครงสร้างข้อมูลขึ้นเมื่อมีการโหลดตาราง Power Query ทั้งหมด ซึ่งอาจส่งผลต่อเวลาในการรีเฟรชข้อมูลแบบขยายเวลา</span><span class="sxs-lookup"><span data-stu-id="adfd5-177">Also, they are built once all Power Query tables are loaded, which can result in extended data refresh times.</span></span> <span data-ttu-id="adfd5-178">ดังนั้นจึงมีประสิทธิภาพน้อยกว่าในการเพิ่มคอลัมน์ตารางเป็นคอลัมน์ _จากการคำนวณ_ มากกว่าคอลัมน์ _ที่คำนวณ_ ใน Power Query (นิยามไว้ใน M)</span><span class="sxs-lookup"><span data-stu-id="adfd5-178">It is therefore less efficient to add table columns as _calculated_ columns than Power Query _computed_ columns (defined in M).</span></span>

<span data-ttu-id="adfd5-179">การตั้งค่าควรสร้างคอลัมน์แบบกำหนดเองใน Power Query</span><span class="sxs-lookup"><span data-stu-id="adfd5-179">Preference should be creating custom columns in Power Query.</span></span> <span data-ttu-id="adfd5-180">เมื่อแหล่งที่มาคือ ฐานข้อมูล คุณสามารถทำให้ประสิทธิภาพการทำงานของการโหลดที่มากขึ้นสำเร็จได้ในสองวิธี</span><span class="sxs-lookup"><span data-stu-id="adfd5-180">When the source is a database, you can achieve greater load efficiency in two ways.</span></span> <span data-ttu-id="adfd5-181">สามารถกำหนดการคำนวณในคำสั่ง SQL (โดยใช้ภาษาคิวรีเดิมของผู้ให้บริการ) หรือสามารถทำให้ปรากฎเป็นคอลัมน์ในแหล่งข้อมูลได้</span><span class="sxs-lookup"><span data-stu-id="adfd5-181">The calculation can be defined in the SQL statement (using the native query language of the provider), or it can be materialized as a column in the data source.</span></span>

<span data-ttu-id="adfd5-182">อย่างไรก็ตาม ในบางอินสแตนซ์ คอลัมน์จากการคำนวณแบบจำลองอาจเป็นตัวเลือกที่ดีกว่า</span><span class="sxs-lookup"><span data-stu-id="adfd5-182">However, in some instances, model calculated columns may be the better choice.</span></span> <span data-ttu-id="adfd5-183">ซึ่งอาจเป็นปัญหาเมื่อสูตรเกี่ยวข้องกับการประเมินหน่วยวัด หรือจำเป็นต้องมีฟังก์ชันการทำแบบจำลองเฉพาะที่ได้รับสนับสนุนในฟังก์ชัน DAX เท่านั้น</span><span class="sxs-lookup"><span data-stu-id="adfd5-183">It can be the case when the formula involves evaluating measures, or it requires specific modeling functionality only supported in DAX functions.</span></span> <span data-ttu-id="adfd5-184">สำหรับข้อมูลเกี่ยวกับตัวอย่างดังกล่าว ให้อ้างอิงถึงบทความ [ฟังก์ชันการทำความเข้าใจสำหรับลำดับชั้นหลัก-รองใน DAX](/dax/understanding-functions-for-parent-child-hierarchies-in-dax)</span><span class="sxs-lookup"><span data-stu-id="adfd5-184">For information on one such example, refer to the [Understanding functions for parent-child hierarchies in DAX](/dax/understanding-functions-for-parent-child-hierarchies-in-dax) article.</span></span>

## <a name="disable-power-query-query-load"></a><span data-ttu-id="adfd5-185">ปิดใช้งานการโหลดคิวรี Power Query</span><span class="sxs-lookup"><span data-stu-id="adfd5-185">Disable Power Query query load</span></span>

<span data-ttu-id="adfd5-186">ไม่ควรโหลดคิวรี Power Query ที่มีเป้าหมายสนับสนุนการรวมข้อมูลกับคิวรีอื่น ๆ ไปยังแบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="adfd5-186">Power Query queries that are intended support data integration with other queries should not be loaded to the model.</span></span> <span data-ttu-id="adfd5-187">เพื่อหลีกเลี่ยงการโหลดคิวรีไปยังแบบจำลอง ดูแลเพื่อให้แน่ใจว่าคุณปิดใช้งานการโหลดคิวรีในอินสแตนซ์เหล่านี้</span><span class="sxs-lookup"><span data-stu-id="adfd5-187">To avoid loading the query to the model, take care to ensure that you disable query load in these instances.</span></span>

![ภาพหน้าจอของ Power Query ที่แสดงตัวเลือก "เปิดใช้งานการโหลด"](media/import-modeling-data-reduction/power-query-disable-query-load.png)

## <a name="disable-auto-datetime"></a><span data-ttu-id="adfd5-189">ปิดใช้งานวันที่/เวลาอัตโนมัติ</span><span class="sxs-lookup"><span data-stu-id="adfd5-189">Disable auto date/time</span></span>

<span data-ttu-id="adfd5-190">Power BI Desktop มีตัวเลือกที่เรียกว่า _วันที่/เวลาอัตโนมัติ_</span><span class="sxs-lookup"><span data-stu-id="adfd5-190">Power BI Desktop includes an option called _Auto date/time_.</span></span> <span data-ttu-id="adfd5-191">เมื่อเปิดใช้งานจะสร้างตารางวันที่/เวลาอัตโนมัติที่ซ่อนไว้สำหรับคอลัมน์วันที่เพื่อสนับสนุนผู้เขียนรายงานเมื่อกำหนดค่าตัวกรอง การจัดกลุ่ม และเจาะรายละเอียดแนวลึกสำหรับช่วงเวลาของปฏิทิน</span><span class="sxs-lookup"><span data-stu-id="adfd5-191">When enabled, it creates a hidden auto date/time table for date columns to support report authors when configuring filters, grouping, and drill down for calendar time periods.</span></span> <span data-ttu-id="adfd5-192">ในความเป็นจริงตารางที่ซ่อนอยู่นั้นเป็นตารางจากการคำนวณซึ่งจะเพิ่มขนาดของแบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="adfd5-192">The hidden tables are in fact calculated tables that will increase the size of the model.</span></span> <span data-ttu-id="adfd5-193">สำหรับคำแนะนำเกี่ยวกับการใช้ตัวเลือกนี้ โปรดดูบทความ [คำแนะนำวันที่/เวลาแบบอัตโนมัติใน Power BI Desktop](../transform-model/desktop-auto-date-time.md)</span><span class="sxs-lookup"><span data-stu-id="adfd5-193">For guidance about using this option, refer to the [Auto date/time guidance in Power BI Desktop](../transform-model/desktop-auto-date-time.md) article.</span></span>

## <a name="switch-to-mixed-mode"></a><span data-ttu-id="adfd5-194">สลับไปยังโหมดผสม</span><span class="sxs-lookup"><span data-stu-id="adfd5-194">Switch to Mixed mode</span></span>

<span data-ttu-id="adfd5-195">ใน Power BI Desktop การออกแบบโหมดผสมจะสร้างแบบจำลองแบบรวม</span><span class="sxs-lookup"><span data-stu-id="adfd5-195">In Power BI Desktop, a Mixed mode design produces a Composite model.</span></span> <span data-ttu-id="adfd5-196">โดยพื้นฐานแล้วจะช่วยให้คุณสามารถกำหนดโหมดที่เก็บข้อมูล _สำหรับแต่ละตาราง_ ได้</span><span class="sxs-lookup"><span data-stu-id="adfd5-196">Essentially, it allows you to determine storage mode _for each table_.</span></span> <span data-ttu-id="adfd5-197">ดังนั้น แต่ละตารางสามารถมีคุณสมบัติโหมดที่เก็บข้อมูลที่ตั้งค่าเป็นนำเข้าหรือ DirectQuery (แบบคู่คือ อีกหนึ่งตัวเลือก)</span><span class="sxs-lookup"><span data-stu-id="adfd5-197">Therefore, each table can have its Storage Mode property set as Import or DirectQuery (Dual is another option).</span></span>

<span data-ttu-id="adfd5-198">เทคนิคที่มีประสิทธิภาพในการลดขนาดแบบจำลองคือ การตั้งค่าคุณสมบัติโหมดที่เก็บข้อมูลสำหรับตารางชนิดข้อเท็จจริงที่มีขนาดใหญ่กว่าไปยัง DirectQuery</span><span class="sxs-lookup"><span data-stu-id="adfd5-198">An effective technique to reduce the model size is to set the Storage Mode property for larger fact-type tables to DirectQuery.</span></span> <span data-ttu-id="adfd5-199">พิจารณาว่าวิธีการออกแบบนี้สามารถใช้งานได้ดีกับเทคนิค [จัดกลุ่มตามและสรุป](#group-by-and-summarize) ที่ได้มีการแนะนำก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="adfd5-199">Consider that this design approach could work well in conjunction with the [Group by and summarize](#group-by-and-summarize) technique introduced earlier.</span></span> <span data-ttu-id="adfd5-200">ตัวอย่างเช่น สามารถใช้ข้อมูลการขายที่สรุปเพื่อทำให้การรายงาน "ข้อสรุป"</span><span class="sxs-lookup"><span data-stu-id="adfd5-200">For example, summarized sales data could be used to achieve high performance "summary" reporting.</span></span> <span data-ttu-id="adfd5-201">หน้าการดูรายละเอียดแนวลึกสามารถแสดงการขายย่อยสำหรับบริบทตัวกรองเฉพาะ (และแคบ) ที่แสดงใบสั่งขายในบริบททั้งหมด</span><span class="sxs-lookup"><span data-stu-id="adfd5-201">A drill through page could display granular sales for specific (and narrow) filter context, displaying all in-context sales orders.</span></span> <span data-ttu-id="adfd5-202">ในตัวอย่างนี้ การดูรายละเอียดผ่านหน้าจะรวมเอาวิชวลที่ยึดตามตาราง DirectQuery เพื่อค้นคืนข้อมูลใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="adfd5-202">In this example, the drill through page would include visuals based on a DirectQuery table to retrieve the sales order data.</span></span>

<span data-ttu-id="adfd5-203">อย่างไรก็ตาม ยังมีการรักษาความปลอดภัยและผลกระทบต่อประสิทธิภาพการทำงานที่เกี่ยวข้องกับแบบจำลองแบบรวมอีกมากมาย</span><span class="sxs-lookup"><span data-stu-id="adfd5-203">There are, however, many security and performance implications related to Composite models.</span></span> <span data-ttu-id="adfd5-204">สำหรับข้อมูลเพิ่มเติม อ่านบทความ [ใช้แบบจำลองแบบรวมใน Power BI Desktop](../transform-model/desktop-composite-models.md)</span><span class="sxs-lookup"><span data-stu-id="adfd5-204">For further information, read the [Use composite models in Power BI Desktop](../transform-model/desktop-composite-models.md) article.</span></span>

## <a name="next-steps"></a><span data-ttu-id="adfd5-205">ขั้นตอนถัดไป</span><span class="sxs-lookup"><span data-stu-id="adfd5-205">Next steps</span></span>

<span data-ttu-id="adfd5-206">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการออกแบบแบบจำลองการนำเข้า Power BI ให้ดูบทความต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="adfd5-206">For more information about Power BI Import model design, see the following articles:</span></span>

- [<span data-ttu-id="adfd5-207">ใช้แบบจำลองแบบรวมใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="adfd5-207">Use composite models in Power BI Desktop</span></span>](../transform-model/desktop-composite-models.md)
- [<span data-ttu-id="adfd5-208">โหมดที่เก็บข้อมูลใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="adfd5-208">Storage mode in Power BI Desktop</span></span>](../transform-model/desktop-storage-mode.md)
- <span data-ttu-id="adfd5-209">มีคำถามหรือไม่</span><span class="sxs-lookup"><span data-stu-id="adfd5-209">Questions?</span></span> [<span data-ttu-id="adfd5-210">ลองถามชุมชน Power BI</span><span class="sxs-lookup"><span data-stu-id="adfd5-210">Try asking the Power BI Community</span></span>](https://community.powerbi.com/)
