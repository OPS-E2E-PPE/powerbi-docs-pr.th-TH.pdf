---
title: ทำความเข้าใจกับแบบจำลองมิติที่มีลักษณะคล้ายดาวและความสำคัญที่มีต่อ Power BI
description: ทำความเข้าใจกับแบบจำลองมิติที่มีลักษณะคล้ายดาวและความสัมพันธ์กันเพื่อพัฒนาแบบจำลองข้อมูล Power BI ที่ปรับให้เหมาะสมเพื่อประสิทธิภาพการทำงานและความสามารถในการใช้งาน
author: peter-myers
ms.author: v-pemyer
ms.reviewer: asaxton
ms.service: powerbi
ms.subservice: powerbi
ms.topic: conceptual
ms.date: 09/09/2019
ms.openlocfilehash: 4d54a0d27ed7cbf0c464a6c4d770e39b99e8b384
ms.sourcegitcommit: 653e18d7041d3dd1cf7a38010372366975a98eae
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 12/01/2020
ms.locfileid: "96419118"
---
# <a name="understand-star-schema-and-the-importance-for-power-bi"></a><span data-ttu-id="dff2d-103">ทำความเข้าใจกับแบบจำลองมิติที่มีลักษณะคล้ายดาวและความสำคัญที่มีต่อ Power BI</span><span class="sxs-lookup"><span data-stu-id="dff2d-103">Understand star schema and the importance for Power BI</span></span>

<span data-ttu-id="dff2d-104">บทความนี้มีเป้าหมายที่ตัวสร้างแบบจำลองข้อมูลของ Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="dff2d-104">This article targets Power BI Desktop data modelers.</span></span> <span data-ttu-id="dff2d-105">บทความนี้อธิบายการออกแบบแบบจำลองมิติที่มีลักษณะคล้ายดาวและความสัมพันธ์ของการออกแบบนั้นเพื่อพัฒนาแบบจำลองข้อมูล Power BI ที่ปรับให้เหมาะสมเพื่อประสิทธิภาพการทำงานและความสามารถในการใช้งาน</span><span class="sxs-lookup"><span data-stu-id="dff2d-105">It describes star schema design and its relevance to developing Power BI data models optimized for performance and usability.</span></span>

<span data-ttu-id="dff2d-106">บทความนี้ไม่ได้เจตนาที่จะพูดคุยถึงการออกแบบแบบจำลองมิติที่มีลักษณะคล้ายดาวที่สมบูรณ์แต่อย่างใด</span><span class="sxs-lookup"><span data-stu-id="dff2d-106">This article isn't intended to provide a complete discussion on star schema design.</span></span> <span data-ttu-id="dff2d-107">สำหรับรายละเอียดเพิ่มเติม ให้ดูที่เนื้อหาที่เผยแพร่โดยตรง เช่น **ชุดเครื่องมือคลังข้อมูล: คำแนะนำในการสร้างแบบจำลองเชิงมิติฉบับสมบูรณ์** (พิมพ์ครั้งที่ 3, 2013) โดย Ralph Kimball และคณะ</span><span class="sxs-lookup"><span data-stu-id="dff2d-107">For more details, refer directly to published content, like **The Data Warehouse Toolkit: The Definitive Guide to Dimensional Modeling** (3rd edition, 2013) by Ralph Kimball et al.</span></span>

## <a name="star-schema-overview"></a><span data-ttu-id="dff2d-108">ภาพรวมแบบจำลองมิติที่มีลักษณะคล้ายดาว</span><span class="sxs-lookup"><span data-stu-id="dff2d-108">Star schema overview</span></span>

<span data-ttu-id="dff2d-109">**แบบจำลองมิติที่มีลักษณะคล้ายดาว** คือ วิธีการสร้างแบบจำลองที่เสร็จสมบูรณ์ซึ่งนำมาใช้โดยคลังข้อมูลเชิงสัมพันธ์อย่างแพร่หลาย</span><span class="sxs-lookup"><span data-stu-id="dff2d-109">**Star schema** is a mature modeling approach widely adopted by relational data warehouses.</span></span> <span data-ttu-id="dff2d-110">ซึ่งกำหนดให้ตัวสร้างแบบจำลองจัดประเภทตารางแบบจำลองให้เป็นแบบ _มิติ_ หรือ _ค่าความจริง_</span><span class="sxs-lookup"><span data-stu-id="dff2d-110">It requires modelers to classify their model tables as either _dimension_ or _fact_.</span></span>

<span data-ttu-id="dff2d-111">**ตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจ** อธิบายถึงเอนทิตี้ธุรกิจซึ่งเป็น _สิ่ง_ ที่คุณสร้างแบบจำลองขึ้นมา</span><span class="sxs-lookup"><span data-stu-id="dff2d-111">**Dimension tables** describe business entities—the _things_ you model.</span></span> <span data-ttu-id="dff2d-112">เอนทิตี้สามารถรวมถึงผลิตภัณฑ์ ผู้คน สถานที่ และแนวความคิด รวมถึงเวลาด้วยในตัว</span><span class="sxs-lookup"><span data-stu-id="dff2d-112">Entities can include products, people, places, and concepts including time itself.</span></span> <span data-ttu-id="dff2d-113">ตารางที่สอดคล้องกันมากที่สุดที่คุณจะพบในแบบจำลองมิติที่มีลักษณะคล้ายดาวก็คือ ตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจในรูปวันที่</span><span class="sxs-lookup"><span data-stu-id="dff2d-113">The most consistent table you'll find in a star schema is a date dimension table.</span></span> <span data-ttu-id="dff2d-114">ตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจประกอบด้วยคอลัมน์หลัก (หรือคอลัมน์) ที่ทำหน้าที่เป็นตัวระบุที่ไม่ซ้ำกัน และคอลัมน์เชิงบรรยาย</span><span class="sxs-lookup"><span data-stu-id="dff2d-114">A dimension table contains a key column (or columns) that acts as a unique identifier, and descriptive columns.</span></span>

<span data-ttu-id="dff2d-115">**ตารางข้อเท็จจริง** จัดเก็บข้อมูลการสังเกตการณ์หรือเหตุการณ์ ซึ่งสามารถเป็นคำสั่งซื้อ ยอดคงเหลือสินค้าคงคลัง อัตราแลกเปลี่ยน อุณหภูมิ ฯลฯ ตารางสำหรับเก็บข้อมูลตัวชี้วัดประกอบด้วยคอลัมน์คีย์มิติที่เกี่ยวข้องกับตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจิ และคอลัมน์หน่วยวัดตัวเลข</span><span class="sxs-lookup"><span data-stu-id="dff2d-115">**Fact tables** store observations or events, and can be sales orders, stock balances, exchange rates, temperatures, etc. A fact table contains dimension key columns that relate to dimension tables, and numeric measure columns.</span></span> <span data-ttu-id="dff2d-116">คอลัมน์คีย์มิติจะกำหนด _มิติ_ ของตารางสำหรับเก็บข้อมูลตัวชี้วัด ในขณะที่ค่าคีย์มิติจะกำหนด _ส่วนประกอบย่อย_ ของตารางสำหรับเก็บข้อมูลตัวชี้วัด</span><span class="sxs-lookup"><span data-stu-id="dff2d-116">The dimension key columns determine the _dimensionality_ of a fact table, while the dimension key values determine the _granularity_ of a fact table.</span></span> <span data-ttu-id="dff2d-117">ตัวอย่างเช่น พิจารณาตารางสำหรับเก็บข้อมูลตัวชี้วัดที่ออกแบบมาเพื่อจัดเก็บเป้ายอดขายที่มีสองคอลัมน์คีย์มิติ **วันที่** และ **ProductKey**</span><span class="sxs-lookup"><span data-stu-id="dff2d-117">For example, consider a fact table designed to store sale targets that has two dimension key columns **Date** and **ProductKey**.</span></span> <span data-ttu-id="dff2d-118">ถือเป็นเรื่องง่ายในการทำความเข้าใจว่าตารางมีสองมิติ</span><span class="sxs-lookup"><span data-stu-id="dff2d-118">It's easy to understand that the table has two dimensions.</span></span> <span data-ttu-id="dff2d-119">อย่างไรก็ตาม ่ไม่สามารถกำหนดรายละเอียดของข้อมูลได้โดยไม่คำนึงถึงค่าคีย์มิติ</span><span class="sxs-lookup"><span data-stu-id="dff2d-119">The granularity, however, can't be determined without considering the dimension key values.</span></span> <span data-ttu-id="dff2d-120">ในตัวอย่างนี้ พิจารณาว่าค่าที่จัดเก็บไว้ในคอลัมน์ **วันที่** คือ วันแรกของแต่ละเดือน</span><span class="sxs-lookup"><span data-stu-id="dff2d-120">In this example, consider that the values stored in the **Date** column are the first day of each month.</span></span> <span data-ttu-id="dff2d-121">ในกรณีนี้ รายละเอียดของข้อมูลจะอยู่ในระดับเดือน-ผลิตภัณฑ์</span><span class="sxs-lookup"><span data-stu-id="dff2d-121">In this case, the granularity is at month-product level.</span></span>

<span data-ttu-id="dff2d-122">โดยทั่วไปแล้ว ตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจจะประกอบด้วยจำนวนแถวที่ค่อนข้างน้อย</span><span class="sxs-lookup"><span data-stu-id="dff2d-122">Generally, dimension tables contain a relatively small number of rows.</span></span> <span data-ttu-id="dff2d-123">ในทางกลับกัน ตารางสำหรับเก็บข้อมูลตัวชี้วัดสามารถประกอบด้วยแถวจำนวนมากและเพิ่มขึ้นต่อเนื่องเมื่อเวลาผ่านไป</span><span class="sxs-lookup"><span data-stu-id="dff2d-123">Fact tables, on the other hand, can contain a very large number of rows and continue to grow over time.</span></span>

![ภาพประกอบของแบบจำลองมิติที่มีลักษณะคล้ายดาว](media/star-schema/star-schema-example1.png)

## <a name="star-schema-relevance-to-power-bi-models"></a><span data-ttu-id="dff2d-125">ความสัมพันธ์ของแบบจำลองมิติที่มีลักษณะคล้ายดาวต่อแบบจำลอง Power BI</span><span class="sxs-lookup"><span data-stu-id="dff2d-125">Star schema relevance to Power BI models</span></span>

<span data-ttu-id="dff2d-126">การออกแบบแบบจำลองมิติที่มีลักษณะคล้ายดาวและแนวคิดที่เกี่ยวข้องมากมายที่แนะนำในบทความนี้จะสัมพันธ์กันมากในการพัฒนาแบบจำลอง Power BI ที่ได้รับการปรับให้เหมาะสมเพื่อประสิทธิภาพการทำงานและความสามารถในการใช้งาน</span><span class="sxs-lookup"><span data-stu-id="dff2d-126">Star schema design and many related concepts introduced in this article are highly relevant to developing Power BI models that are optimized for performance and usability.</span></span>

<span data-ttu-id="dff2d-127">ให้พิจารณาว่าวิชวลรายงาน Power BI แต่ละรายการจะสร้างคิวรีที่ถูกส่งไปยังแบบจำลอง Power BI (ซึ่งบริการของ Power BI จะเรียกใช้ชุดข้อมูล)</span><span class="sxs-lookup"><span data-stu-id="dff2d-127">Consider that each Power BI report visual generates a query that is sent to the Power BI model (which the Power BI service calls a dataset).</span></span> <span data-ttu-id="dff2d-128">คิวรีเหล่านี้จะใช้เพื่อกรอง จัดกลุ่มและสรุปข้อมูลแบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="dff2d-128">These queries are used to filter, group, and summarize model data.</span></span> <span data-ttu-id="dff2d-129">จากนั้นแบบจำลองที่ได้รับการออกแบบมาเป็นอย่างดีก็คือ แบบจำลองที่มีตารางสำหรับการกรองและการจัดกลุ่ม และตารางสำหรับการสรุปข้อมูล</span><span class="sxs-lookup"><span data-stu-id="dff2d-129">A well-designed model, then, is one that provides tables for filtering and grouping, and tables for summarizing.</span></span> <span data-ttu-id="dff2d-130">การออกแบบนี้เหมาะสมกับหลักการ Schema ของดาว:</span><span class="sxs-lookup"><span data-stu-id="dff2d-130">This design fits well with star schema principles:</span></span>

- <span data-ttu-id="dff2d-131">ตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจสนับสนุน _การกรอง_ และ _การจัดกลุ่ม_</span><span class="sxs-lookup"><span data-stu-id="dff2d-131">Dimension tables support _filtering_ and _grouping_</span></span>
- <span data-ttu-id="dff2d-132">ตารางสำหรับเก็บข้อมูลตัวชี้วัดสนับสนุน _การสรุปข้อมูล_</span><span class="sxs-lookup"><span data-stu-id="dff2d-132">Fact tables support _summarization_</span></span>

<span data-ttu-id="dff2d-133">ไม่มีคุณสมบัติของตารางที่ผู้สร้างแบบจำลองตั้งค่าเพื่อกำหนดชนิดตารางเป็นมิติหรือความเป็นจริง</span><span class="sxs-lookup"><span data-stu-id="dff2d-133">There's no table property that modelers set to configure the table type as dimension or fact.</span></span> <span data-ttu-id="dff2d-134">ซึ่งเป็นข้อเท็จจริงที่กำหนดโดยความสัมพันธ์แบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="dff2d-134">It's in fact determined by the model relationships.</span></span> <span data-ttu-id="dff2d-135">ความสัมพันธ์แบบจำลองสร้างเส้นทางการแพร่กระจายตัวกรองระหว่างสองตาราง และเป็นคุณสมบัติ **คาร์ดินาลลิตี้** ของความสัมพันธ์ที่กำหนดชนิดของตาราง</span><span class="sxs-lookup"><span data-stu-id="dff2d-135">A model relationship establishes a filter propagation path between two tables, and it's the **Cardinality** property of the relationship that determines the table type.</span></span> <span data-ttu-id="dff2d-136">ภาวะเชิงการนับของเซ็ตของความสัมพันธ์ทั่วไปคือ _หนึ่งต่อกลุ่ม_ หรือในทางกลับกันเป็นแบบ _กลุ่มต่อหนึ่ง_</span><span class="sxs-lookup"><span data-stu-id="dff2d-136">A common relationship cardinality is _one-to-many_ or its inverse _many-to-one_.</span></span> <span data-ttu-id="dff2d-137">ด้าน "หนึ่ง" คือ ตารางชนิดมิติตายตัวในขณะที่ด้าน "กลุ่ม" คือ ตารางชนิดค่าความจริงตายตัวเช่นกัน</span><span class="sxs-lookup"><span data-stu-id="dff2d-137">The "one" side is always a dimension-type table while the "many" side is always a fact-type table.</span></span> <span data-ttu-id="dff2d-138">เมื่อต้องการเรียนรู้เพิ่มเติมเกี่ยวกับความสัมพันธ์ โปรดดู[แบบจำลองความสัมพันธ์ใน Power BI Desktop](../transform-model/desktop-relationships-understand.md)</span><span class="sxs-lookup"><span data-stu-id="dff2d-138">For more information about relationships, see [Model relationships in Power BI Desktop](../transform-model/desktop-relationships-understand.md).</span></span>

![แบบจำลองมิติที่มีลักษณะคล้ายดาวเชิงแนวคิด](media/star-schema/star-schema-example2.png)

<span data-ttu-id="dff2d-140">การออกแบบแบบจำลองที่มีโครงสร้างเป็นอย่างดีควรรวมเอาตารางที่เป็นตารางชนิดมิติหรือตารางชนิดค่าความจริง</span><span class="sxs-lookup"><span data-stu-id="dff2d-140">A well-structured model design should include tables that are either dimension-type tables or fact-type tables.</span></span> <span data-ttu-id="dff2d-141">คุณควรหลีกเลี่ยงการผสมตารางทั้งสองชนิดเข้าด้วยกันสำหรับตารางเดี่ยว</span><span class="sxs-lookup"><span data-stu-id="dff2d-141">Avoid mixing the two types together for a single table.</span></span> <span data-ttu-id="dff2d-142">นอกจากนี้เราขอแนะนำว่าคุณควรพยายามส่งจำนวนตารางที่ถูกต้องกับความสัมพันธ์ที่ถูกต้องในตำแหน่งเดิม</span><span class="sxs-lookup"><span data-stu-id="dff2d-142">We also recommend that you should strive to deliver the right number of tables with the right relationships in place.</span></span> <span data-ttu-id="dff2d-143">นอกจากนี้ยังเป็นสิ่งสำคัญที่ว่าตารางชนิดค่าความจริงจะโหลดข้อมูลที่หน่วยมาตราวัดที่สอดคล้องกันเสมอ</span><span class="sxs-lookup"><span data-stu-id="dff2d-143">It's also important that fact-type tables always load data at a consistent grain.</span></span>

<span data-ttu-id="dff2d-144">สุดท้ายนี้ ถือว่ามีความสำคัญในการทำความเข้าใจว่าการออกแบบแบบจำลองที่เหมาะสมนั้นถือเป็นวิทยาศาสตร์ส่วนหนึ่งและศิลปะส่วนหนึ่ง</span><span class="sxs-lookup"><span data-stu-id="dff2d-144">Lastly, it's important to understand that optimal model design is part science and part art.</span></span> <span data-ttu-id="dff2d-145">ในบางครั้งคุณสามารถแบ่งมันออกด้วยคำแนะนำที่ดีเมื่อดูแล้วสมเหตสมุผลในการที่จะทำเช่นนั้น</span><span class="sxs-lookup"><span data-stu-id="dff2d-145">Sometimes you can break with good guidance when it makes sense to do so.</span></span>

<span data-ttu-id="dff2d-146">มีแนวคิดเพิ่มเติมมากมายที่เกี่ยวข้องกับการออกแบบแบบจำลองมิติที่มีลักษณะคล้ายดาวที่สามารถนำไปใช้กับแบบจำลอง Power BI ได้</span><span class="sxs-lookup"><span data-stu-id="dff2d-146">There are many additional concepts related to star schema design that can be applied to a Power BI model.</span></span> <span data-ttu-id="dff2d-147">แนวคิดเหล่านี้ประกอบด้วย:</span><span class="sxs-lookup"><span data-stu-id="dff2d-147">These concepts include:</span></span>

- [<span data-ttu-id="dff2d-148">หน่วยวัด</span><span class="sxs-lookup"><span data-stu-id="dff2d-148">Measures</span></span>](#measures)
- [<span data-ttu-id="dff2d-149">คีย์ตัวแทน</span><span class="sxs-lookup"><span data-stu-id="dff2d-149">Surrogate keys</span></span>](#surrogate-keys)
- [<span data-ttu-id="dff2d-150">แบบจำลองมิติที่เพิ่มการทำนอร์มอลไลซ์กับข้อมูล</span><span class="sxs-lookup"><span data-stu-id="dff2d-150">Snowflake dimensions</span></span>](#snowflake-dimensions)
- [<span data-ttu-id="dff2d-151">มิติการเล่นบทบาท</span><span class="sxs-lookup"><span data-stu-id="dff2d-151">Role-playing dimensions</span></span>](#role-playing-dimensions)
- [<span data-ttu-id="dff2d-152">มิติเปลี่ยนแปลงอย่างช้า ๆ</span><span class="sxs-lookup"><span data-stu-id="dff2d-152">Slowly changing dimensions</span></span>](#slowly-changing-dimensions)
- [<span data-ttu-id="dff2d-153">มิติขยะ</span><span class="sxs-lookup"><span data-stu-id="dff2d-153">Junk dimensions</span></span>](#junk-dimensions)
- [<span data-ttu-id="dff2d-154">ลดรูปมิติ</span><span class="sxs-lookup"><span data-stu-id="dff2d-154">Degenerate dimensions</span></span>](#degenerate-dimensions)
- [<span data-ttu-id="dff2d-155">ตารางสำหรับเก็บข้อมูลตัวชี้วัดที่ไม่มีการเก็บค่าความจริงหรือมาตรวัดใด ๆ</span><span class="sxs-lookup"><span data-stu-id="dff2d-155">Factless fact tables</span></span>](#factless-fact-tables)

## <a name="measures"></a><span data-ttu-id="dff2d-156">หน่วยวัด</span><span class="sxs-lookup"><span data-stu-id="dff2d-156">Measures</span></span>

<span data-ttu-id="dff2d-157">ในการออกแบบแบบจำลองมิติที่มีลักษณะคล้ายดาว **หน่วยวัด** คือ คอลัมน์ตารางสำหรับเก็บข้อมูลตัวชี้วัดที่จัดเก็บค่าที่จะใช้ในการสรุปข้อมูล</span><span class="sxs-lookup"><span data-stu-id="dff2d-157">In star schema design, a **measure** is a fact table column that stores values to be summarized.</span></span>

<span data-ttu-id="dff2d-158">ในแบบจำลอง Power BI **หน่วยวัด** มีความแตกต่างกัน—แต่นิยามนั้น—คล้ายกัน</span><span class="sxs-lookup"><span data-stu-id="dff2d-158">In a Power BI model, a **measure** has a different—but similar—definition.</span></span> <span data-ttu-id="dff2d-159">ซึ่งเป็นสูตรที่เขียนใน[นิพจน์การวิเคราะห์ข้อมูล (DAX)](/dax/data-analysis-expressions-dax-reference) ที่ทำการสรุปเป็นผลสำเร็จ</span><span class="sxs-lookup"><span data-stu-id="dff2d-159">It's a formula written in [Data Analysis Expressions (DAX)](/dax/data-analysis-expressions-dax-reference) that achieves summarization.</span></span> <span data-ttu-id="dff2d-160">นิพจน์หน่วยวัดมักจะใช้ประโยชน์จากฟังก์ชันการรวม DAX เช่น SUM, MIN, MAX, AVERAGE ฯลฯ เพื่อสร้างผลลัพธ์การคืนค่าเป็นข้อมูลชนิดพื้นฐานเพียงตัวเดียวในเวลาที่ทำการคิวรี (จะไม่มีการจัดเก็บค่าไว้ในแบบจำลอง)</span><span class="sxs-lookup"><span data-stu-id="dff2d-160">Measure expressions often leverage DAX aggregation functions like SUM, MIN, MAX, AVERAGE, etc. to produce a scalar value result at query time (values are never stored in the model).</span></span> <span data-ttu-id="dff2d-161">นิพจน์หน่วยวัดมีความหลากหลายมากตั้งแต่การรวมคอลัมน์แบบง่ายไปจนถึงสูตรที่ซับซ้อนมากขึ้นซึ่งลบล้างบริบทตัวกรองและ/หรือการกระจายความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="dff2d-161">Measure expression can range from simple column aggregations to more sophisticated formulas that override filter context and/or relationship propagation.</span></span> <span data-ttu-id="dff2d-162">สำหรับข้อมูลเพิ่มเติม อ่านบทความ [พื้นฐาน DAX ใน Power BI Desktop](../transform-model/desktop-quickstart-learn-dax-basics.md)</span><span class="sxs-lookup"><span data-stu-id="dff2d-162">For more information, read the [DAX Basics in Power BI Desktop](../transform-model/desktop-quickstart-learn-dax-basics.md) article.</span></span>

<span data-ttu-id="dff2d-163">ถือเป็นสิ่งสำคัญที่ต้องทำความเข้าใจว่าแบบจำลอง Power BI สนับสนุนวิธีการที่สองสำหรับการบรรลุผลการให้ข้อสรุป</span><span class="sxs-lookup"><span data-stu-id="dff2d-163">It's important to understand that Power BI models support a second method for achieving summarization.</span></span> <span data-ttu-id="dff2d-164">คอลัมน์ใด ๆ —และคอลัมน์ตัวเลขโดยทั่วไป—สามารถสรุปได้โดยการวิชวลรายงานหรือการถามตอบ</span><span class="sxs-lookup"><span data-stu-id="dff2d-164">Any column—and typically numeric columns—can be summarized by a report visual or Q&A.</span></span> <span data-ttu-id="dff2d-165">คอลัมน์เหล่านี้จะเรียกว่า _หน่วยวัดทางอ้อม_</span><span class="sxs-lookup"><span data-stu-id="dff2d-165">These columns are referred to as _implicit measures_.</span></span> <span data-ttu-id="dff2d-166">ซึ่งจะมีความสะดวกสำหรับคุณในฐานะนักพัฒนาแบบจำลอง เช่นเดียวกับในอินสแตนซ์จำนวนมากที่คุณไม่จำเป็นต้องสร้างหน่วยวัด</span><span class="sxs-lookup"><span data-stu-id="dff2d-166">They offer a convenience for you as a model developer, as in many instances you do not need to create measures.</span></span> <span data-ttu-id="dff2d-167">ตัวอย่างเช่น คอลัมน์ **ยอดขาย** ยอดขายของผู้ค้าปลีกของงานผจญภัยสามารถสรุปได้หลายวิธี (เช่น สรุป, นับ, เฉลี่ย, มัธยฐาน, ต่ำสุด, สูงสุด, ฯลฯ) โดยไม่จำเป็นต้องสร้างหน่วยวัดสำหรับแต่ละชนิดการรวมที่เป็นไปได้</span><span class="sxs-lookup"><span data-stu-id="dff2d-167">For example, the Adventure Works reseller sales **Sales Amount** column could be summarized in numerous ways (sum, count, average, median, min, max, etc.), without the need to create a measure for each possible aggregation type.</span></span>

![ตัวอย่างไอคอนในรายการเขตข้อมูล](media/star-schema/field-list-example.png)

<span data-ttu-id="dff2d-169">อย่างไรก็ตาม มีสามสาเหตุที่น่าสนใจสำหรับคุณในการสร้างหน่วยวัด แม้แต่กับการให้ข้อสรุปในระดับคอลัมน์แบบง่าย:</span><span class="sxs-lookup"><span data-stu-id="dff2d-169">However, there are three compelling reasons for you to create measures, even for simple column-level summarizations:</span></span>

- <span data-ttu-id="dff2d-170">เมื่อคุณทราบว่าผู้เขียนรายงานจะคิวรีแบบจำลองโดยใช้ [นิพจน์แบบหลายมิติ (MDX)](/sql/analysis-services/multidimensional-models/mdx/mdx-query-the-basic-query) แบบจำลองจะต้องรวม _หน่วยวัดโดยตรง_</span><span class="sxs-lookup"><span data-stu-id="dff2d-170">When you know your report authors will query the model by using [Multidimensional Expressions (MDX)](/sql/analysis-services/multidimensional-models/mdx/mdx-query-the-basic-query), the model must include _explicit measures_.</span></span> <span data-ttu-id="dff2d-171">มีการกำหนดหน่วยวัดโดยตรงโดยใช้ DAX</span><span class="sxs-lookup"><span data-stu-id="dff2d-171">Explicit measures are defined by using DAX.</span></span> <span data-ttu-id="dff2d-172">วิธีการออกแบบนี้มีความเกี่ยวข้องอย่างมากเมื่อมีการคิวรีชุดข้อมูล Power BI โดยใช้ MDX เนื่องจาก MDX ไม่สามารถทำการสรุปของค่าคอลัมน์ได้</span><span class="sxs-lookup"><span data-stu-id="dff2d-172">This design approach is highly relevant when a Power BI dataset is queried by using MDX, because MDX can't achieve summarization of column values.</span></span> <span data-ttu-id="dff2d-173">โดยเฉพาะอย่างยิ่ง MDX จะใช้เมื่อทำการ [วิเคราะห์ใน Excel](../collaborate-share/service-analyze-in-excel.md) เพราะคิวรี MDX ของปัญหา PivotTable</span><span class="sxs-lookup"><span data-stu-id="dff2d-173">Notably, MDX will be used when performing [Analyze in Excel](../collaborate-share/service-analyze-in-excel.md), because PivotTables issue MDX queries.</span></span>
- <span data-ttu-id="dff2d-174">เมื่อคุณทราบว่าผู้เขียนรายงานของคุณจะสร้างรายงานที่มีการแบ่งหน้าของ Power BI โดยใช้ตัวออกแบบคิวรี MDX แบบจำลองจะต้องมีหน่วยวัดโดยตรง</span><span class="sxs-lookup"><span data-stu-id="dff2d-174">When you know your report authors will create Power BI paginated reports using the MDX query designer, the model must include explicit measures.</span></span> <span data-ttu-id="dff2d-175">เฉพาะตัวออกแบบคิวรี MDX เท่านั้นที่สนับสนุน [การรวมเซิร์ฟเวอร์](/sql/reporting-services/report-design/report-builder-functions-aggregate-function)</span><span class="sxs-lookup"><span data-stu-id="dff2d-175">Only the MDX query designer supports [server aggregates](/sql/reporting-services/report-design/report-builder-functions-aggregate-function).</span></span> <span data-ttu-id="dff2d-176">ดังนั้นถ้าผู้เขียนรายงานจำเป็นต้องมีหน่วยวัดที่ประเมินโดย Power BI (แทนที่จะเป็นโดยกลไกจัดการรายงานที่มีการแบ่งหน้า) พวกเขาต้องใช้ตัวออกแบบคิวรี MDX</span><span class="sxs-lookup"><span data-stu-id="dff2d-176">So, if report authors need to have measures evaluated by Power BI (instead of by the paginated report engine), they must use the MDX query designer.</span></span>
- <span data-ttu-id="dff2d-177">หากคุณต้องการให้แน่ใจว่าผู้เขียนรายงานของคุณสามารถสรุปคอลัมน์ในรูปแบบที่เฉพาะเจาะจงเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="dff2d-177">When you need to ensure that your report authors can only summarize columns in specific ways.</span></span> <span data-ttu-id="dff2d-178">ตัวอย่างเช่น คอลัมน์ **ราคาต่อหน่วย** ของยอดขายของผู้ค้าปลีก (ซึ่งแสดงถึงอัตราต่อหน่วย) สามารถสรุปได้โดยการใช้ฟังก์ชันการรวมเฉพาะเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="dff2d-178">For example, the reseller sales **Unit Price** column (which represents a per unit rate) can be summarized, but only by using specific aggregation functions.</span></span> <span data-ttu-id="dff2d-179">ซึ่งไม่ควรมีการรวมข้อมูลแต่ถือว่ามีความเหมาะสมในการสรุปโดยใช้ฟังก์ชันการรวมอื่น ๆ เช่น ต่ำสุด, สูงสุด, เฉลี่ย, ฯลฯ ในอินสแตนซ์นี้ ตัวสร้างแบบจำลองสามารถซ่อนคอลัมน์ **ราคาต่อหน่วย** และสร้างหน่วยวัดสำหรับฟังก์ชันการรวมที่เหมาะสมทั้งหมดได้</span><span class="sxs-lookup"><span data-stu-id="dff2d-179">It should never be summed, but it's appropriate to summarize by using other aggregation functions like min, max, average, etc. In this instance, the modeler can hide the **Unit Price** column, and create measures for all appropriate aggregation functions.</span></span>

<span data-ttu-id="dff2d-180">โปรดทราบว่าวิธีการออกแบบนี้ทำงานได้เป็นอย่างดีสำหรับรายงานที่เขียนในบริการของ Power BI และสำหรับการถามตอบ</span><span class="sxs-lookup"><span data-stu-id="dff2d-180">This design approach works well for reports authored in the Power BI service and for Q&A.</span></span> <span data-ttu-id="dff2d-181">อย่างไรก็ตาม การเชื่อมต่อสดของ Power BI Desktop อนุญาตให้ผู้สร้างรายงานแสดงเขตข้อมูลที่ซ่อนอยู่ในบานหน้าต่าง **เขตข้อมูล** ซึ่งอาจส่งผลให้เกิดการเลี่ยงวิธีการออกแบบลักษณะนี้</span><span class="sxs-lookup"><span data-stu-id="dff2d-181">However, Power BI Desktop live connections allow report authors to show hidden fields in the **Fields** pane, which can result in circumventing this design approach.</span></span>

## <a name="surrogate-keys"></a><span data-ttu-id="dff2d-182">คีย์ตัวแทน</span><span class="sxs-lookup"><span data-stu-id="dff2d-182">Surrogate keys</span></span>

<span data-ttu-id="dff2d-183">**คีย์ตัวแทน** คือ ตัวระบุที่ไม่ซ้ำกันที่คุณเพิ่มไปยังตารางเพื่อสนับสนุนการสร้างแบบจำลองมิติที่มีลักษณะคล้ายดาว</span><span class="sxs-lookup"><span data-stu-id="dff2d-183">A **surrogate key** is a unique identifier that you add to a table to support star schema modeling.</span></span> <span data-ttu-id="dff2d-184">ตามข้อกำหนด จะไม่มีการกำหนดหรือจัดเก็บไว้ในข้อมูลต้นฉบับ</span><span class="sxs-lookup"><span data-stu-id="dff2d-184">By definition, it's not defined or stored in the source data.</span></span> <span data-ttu-id="dff2d-185">โดยทั่วไปแล้วจะมีการเพิ่มคีย์ตัวแทนไปยังตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจคลังข้อมูลที่เกี่ยวข้องเพื่อมอบตัวระบุที่ไม่ซ้ำกันสำหรับแต่ละแถวตารางมิติ</span><span class="sxs-lookup"><span data-stu-id="dff2d-185">Commonly, surrogate keys are added to relational data warehouse dimension tables to provide a unique identifier for each dimension table row.</span></span>

<span data-ttu-id="dff2d-186">ความสัมพันธ์ของแบบจำลอง Power BI จะขึ้นอยู่กับคอลัมน์เดี่ยวที่ไม่ซ้ำกันในหนึ่งตาราง ซึ่งแพร่กระจายตัวกรองไปยังคอลัมน์เดี่ยวในอีกตาราง</span><span class="sxs-lookup"><span data-stu-id="dff2d-186">Power BI model relationships are based on a single unique column in one table, which propagates filters to a single column in a different table.</span></span> <span data-ttu-id="dff2d-187">เมื่อตารางชนิดมิติในแบบจำลองของคุณไม่มีคอลัมน์เดี่ยวที่ไม่ซ้ำกันเพียง คุณต้องเพิ่มตัวระบุที่ไม่ซ้ำกันเพื่อให้เป็นด้าน "หนึ่ง" ของความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="dff2d-187">When a dimension-type table in your model doesn't include a single unique column, you must add a unique identifier to become the "one" side of a relationship.</span></span> <span data-ttu-id="dff2d-188">ใน Power BI Desktop คุณสามารถดำเนินการได้อย่างง่ายดายโดยการสร้าง [คอลัมน์ดัชนี Power Query](/powerquery-m/table-addindexcolumn)</span><span class="sxs-lookup"><span data-stu-id="dff2d-188">In Power BI Desktop, you can easily achieve this requirement by creating a [Power Query index column](/powerquery-m/table-addindexcolumn).</span></span>

![สร้างคอลัมน์ดัชนีในแถบเครื่องมือ Power Query](media/star-schema/toolbar-index.png)

<span data-ttu-id="dff2d-190">คุณต้องผสานคิวรีนี้กับคิวรีด้าน "หลากหลาย" เพื่อให้คุณสามารถเพิ่มคอลัมน์ดัชนีไปยังคิวรีได้อีกด้วย</span><span class="sxs-lookup"><span data-stu-id="dff2d-190">You must merge this query with the "many"-side query so that you can add the index column to it also.</span></span> <span data-ttu-id="dff2d-191">เมื่อคุณโหลดคิวรีเหล่านี้ไปยังแบบจำลอง คุณสามารถสร้างความสัมพันธ์แบบหนึ่งต่อกลุ่มระหว่างตารางแบบจำลองได้</span><span class="sxs-lookup"><span data-stu-id="dff2d-191">When you load these queries to the model, you can then create a one-to-many relationship between the model tables.</span></span>

## <a name="snowflake-dimensions"></a><span data-ttu-id="dff2d-192">แบบจำลองมิติที่เพิ่มการทำนอร์มอลไลซ์กับข้อมูล</span><span class="sxs-lookup"><span data-stu-id="dff2d-192">Snowflake dimensions</span></span>

<span data-ttu-id="dff2d-193">**แบบจำลองมิติที่เพิ่มการทำนอร์มอลไลซ์กับข้อมูล** คือ ชุดของตารางที่ทำการนอร์มอลไลซ์สำหรับเอนทิตี้ธุรกิจเดี่ยว</span><span class="sxs-lookup"><span data-stu-id="dff2d-193">A **snowflake dimension** is a set of normalized tables for a single business entity.</span></span> <span data-ttu-id="dff2d-194">ตัวอย่างเช่น งานผจญภัยจัดประเภทผลิตภัณฑ์ตามหมวดหมู่และหมวดหมู่ย่อย</span><span class="sxs-lookup"><span data-stu-id="dff2d-194">For example, Adventure Works classifies products by category and subcategory.</span></span> <span data-ttu-id="dff2d-195">หมวดหมู่จะถูกกำหนดให้กับหมวดหมู่ย่อย และในทางกลับกันผลิตภัณฑ์จะถูกกำหนดให้เป็นหมวดหมู่ย่อย</span><span class="sxs-lookup"><span data-stu-id="dff2d-195">Categories are assigned to subcategories, and products are in turn assigned to subcategories.</span></span> <span data-ttu-id="dff2d-196">ในคลังข้อมูลเชิงสัมพันธ์ของงานผจญภัย จะมีการนอร์มอลไลซ์มิติของผลิตภัณฑ์และจัดเก็บไว้ในตารางที่เกี่ยวข้องสามตารางด้วยกัน: **DimProductCategory** , **DimProductSubcategory** และ **DimProduct**</span><span class="sxs-lookup"><span data-stu-id="dff2d-196">In the Adventure Works relational data warehouse, the product dimension is normalized and stored in three related tables: **DimProductCategory**, **DimProductSubcategory**, and **DimProduct**.</span></span>

<span data-ttu-id="dff2d-197">หากคุณใช้จินตนาการของคุณ คุณสามารถนึกภาพตารางที่ทำการนอร์มอลไลซ์ตั้งอยู่ในตำแหน่งที่ตั้งออกข้างนอกจากตารางสำหรับเก็บข้อมูลตัวชี้วัด ก่อขึ้นเป็นการออกแบบแบบจำลองมิติที่เพิ่มการทำนอร์มอลไลซ์กับข้อมูล</span><span class="sxs-lookup"><span data-stu-id="dff2d-197">If you use your imagination, you can picture the normalized tables positioned outwards from the fact table, forming a snowflake design.</span></span>

![ตัวอย่างแผนภาพแบบจำลองมิติที่เพิ่มการทำนอร์มอลไลซ์กับข้อมูล](media/star-schema/snowflake-design.png)

<span data-ttu-id="dff2d-199">ใน Power BI Desktop คุณสามารถเลือกจำลองการออกแบบแบบจำลองมิติที่เพิ่มการทำนอร์มอลไลซ์กับข้อมูลได้ (บางทีอาจเนื่องมาจากข้อมูลต้นฉบับของคุณ) หรือรวม (ที่ไม่มีการนอร์มอลไลซ์) ตารางแหล่งข้อมูลลงในตารางแบบจำลองเดี่ยว</span><span class="sxs-lookup"><span data-stu-id="dff2d-199">In Power BI Desktop, you can choose to mimic a snowflake dimension design (perhaps because your source data does) or integrate (denormalize) the source tables into a single model table.</span></span> <span data-ttu-id="dff2d-200">โดยทั่วไปแล้ว ประโยชน์ของตารางแบบจำลองเดี่ยวมีค่าเกินประโยชน์จากตารางแบบจำลองหลากหลาย</span><span class="sxs-lookup"><span data-stu-id="dff2d-200">Generally, the benefits of a single model table outweigh the benefits of multiple model tables.</span></span> <span data-ttu-id="dff2d-201">การตัดสินใจที่เหมาะสมที่สุดอาจขึ้นอยู่กับปริมาณของข้อมูลและความต้องการความสามารถในการใช้งานสำหรับแบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="dff2d-201">The most optimal decision can depend on the volumes of data and the usability requirements for the model.</span></span>

<span data-ttu-id="dff2d-202">เมื่อคุณเลือกจำลองการออกแบบแบบจำลองมิติที่เพิ่มการทำนอร์มอลไลซ์กับข้อมูล:</span><span class="sxs-lookup"><span data-stu-id="dff2d-202">When you choose to mimic a snowflake dimension design:</span></span>

- <span data-ttu-id="dff2d-203">Power BI จะโหลดตารางเพิ่มเติม ซึ่งมีประสิทธิภาพน้อยกว่าจากที่จัดเก็บข้อมูลและมุมมองเชิงประสิทธิภาพ</span><span class="sxs-lookup"><span data-stu-id="dff2d-203">Power BI loads more tables, which is less efficient from storage and performance perspectives.</span></span> <span data-ttu-id="dff2d-204">ตารางเหล่านี้จะต้องรวมเอาคอลัมน์เพื่อสนับสนุนความสัมพันธ์แบบจำลอง และการดำเนินการนี้อาจส่งผลให้ขนาดของแบบจำลองมีขนาดใหญ่ขึ้น</span><span class="sxs-lookup"><span data-stu-id="dff2d-204">These tables must include columns to support model relationships, and it can result in a larger model size.</span></span>
- <span data-ttu-id="dff2d-205">ห่วงโซ่การแพร่กระจายตัวกรองความสัมพันธ์ที่ยาวกว่าจะต้องได้รับการสำรวจ ซึ่งมีแนวโน้มว่าอาจจะมีประสิทธิภาพด้อยกว่าตัวกรองที่ใช้กับตารางเดี่ยว</span><span class="sxs-lookup"><span data-stu-id="dff2d-205">Longer relationship filter propagation chains will need to be traversed, which will likely be less efficient than filters applied to a single table.</span></span>
- <span data-ttu-id="dff2d-206">บานหน้าต่าง **เขตข้อมูล** แสดงตารางแบบจำลองเพิ่มเติมให้กับผู้สร้างรายงาน ซึ่งอาจส่งผลให้ประสบการณ์การใช้งานที่ง่ายลดน้อยลง โดยเฉพาะอย่างยิ่งเมื่อตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจที่เพิ่มการทำนอร์มอลไลซ์กับข้อมูลมีแค่หนึ่งหรือสองคอลัมน์</span><span class="sxs-lookup"><span data-stu-id="dff2d-206">The **Fields** pane presents more model tables to report authors, which can result in a less intuitive experience, especially when snowflake dimension tables contain just one or two columns.</span></span>
- <span data-ttu-id="dff2d-207">จึงเป็นไปไม่ได้ที่จะสร้างลำดับชั้นที่ครอบคลุมทั้งตารางได้</span><span class="sxs-lookup"><span data-stu-id="dff2d-207">It's not possible to create a hierarchy that spans the tables.</span></span>

<span data-ttu-id="dff2d-208">เมื่อคุณเลือกที่จะรวมลงในตารางแบบจำลองเดี่ยว คุณยังสามารถกำหนดลำดับชั้นที่ครอบคลุมถึงหน่วยมาตราชั่งสูงสุดและต่ำสุดของมิติได้อีกด้วย</span><span class="sxs-lookup"><span data-stu-id="dff2d-208">When you choose to integrate into a single model table, you can also define a hierarchy that encompasses the highest and lowest grain of the dimension.</span></span> <span data-ttu-id="dff2d-209">มีความเป็นไปได้ว่าการจัดเก็บข้อมูลที่ไม่มีการนอร์มอลไลซ์ที่ซ้ำซ้อนอาจส่งผลให้ขนาดพื้นที่การจัดเก็บแบบจำลองนั้นเพิ่มขึ้น โดยเฉพาะอย่างยิ่งสำหรับตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจที่มีขนาดใหญ่มาก</span><span class="sxs-lookup"><span data-stu-id="dff2d-209">Possibly, the storage of redundant denormalized data can result in increased model storage size, particularly for very large dimension tables.</span></span>

![ลำดับชั้นภายในมิติ](media/star-schema/hierarchy.png)

## <a name="slowly-changing-dimensions"></a><span data-ttu-id="dff2d-211">มิติที่มีการเปลี่ยนแปลงอย่างช้า ๆ</span><span class="sxs-lookup"><span data-stu-id="dff2d-211">Slowly changing dimensions</span></span>

<span data-ttu-id="dff2d-212">**มิติที่มีการเปลี่ยนแปลงอย่างช้า ๆ** (SCD) คือ หนึ่งมิติจัดการการเปลี่ยนแปลงของสมาชิกมิติเมื่อเวลาผ่านไปได้อย่างเหมาะสม</span><span class="sxs-lookup"><span data-stu-id="dff2d-212">A **slowly changing dimension** (SCD) is one that appropriately manages change of dimension members over time.</span></span> <span data-ttu-id="dff2d-213">ซึ่งจะใช้เมื่อค่าเอนทิตี้ทางธุรกิจเปลี่ยนไปตามเวลาและในลักษณะเฉพาะกิจ</span><span class="sxs-lookup"><span data-stu-id="dff2d-213">It applies when business entity values change over time, and in an ad hoc manner.</span></span> <span data-ttu-id="dff2d-214">ตัวอย่างที่ดีของมิติที่มีการเปลี่ยนแปลงอย่าง _ช้า ๆ_ คือ มิติลูกค้า โดยเฉพาะคอลัมน์รายละเอียดการติดต่อ เช่น ที่อยู่อีเมลและหมายเลขโทรศัพท์</span><span class="sxs-lookup"><span data-stu-id="dff2d-214">A good example of a _slowly_ changing dimension is a customer dimension, specifically its contact detail columns like email address and phone number.</span></span> <span data-ttu-id="dff2d-215">ในทางตรงกันข้าม บางมิติจะพิจารณาว่าเป็นการเปลี่ยนแปลง _อย่างรวดเร็ว_ เมื่อมีการเปลี่ยนแปลงแอตทริบิวต์มิติบ่อยครั้ง เช่น ราคาตลาดของหุ้น เป็นต้น</span><span class="sxs-lookup"><span data-stu-id="dff2d-215">In contrast, some dimensions are considered to be _rapidly_ changing when a dimension attribute changes often, like a stock's market price.</span></span> <span data-ttu-id="dff2d-216">วิธีการออกแบบทั่วไปในอินสแตนซ์เหล่านี้คือ เพื่อจัดเก็บค่าแอตทริบิวต์ที่เปลี่ยนแปลงอย่างรวดเร็วในหน่วยวัดของตารางสำหรับเก็บข้อมูลตัวชี้วัด</span><span class="sxs-lookup"><span data-stu-id="dff2d-216">The common design approach in these instances is to store rapidly changing attribute values in a fact table measure.</span></span>

<span data-ttu-id="dff2d-217">ทฤษฎีการออกแบบแบบจำลองมิติที่มีลักษณะคล้ายดาวดาวอ้างอิงถึง SCD สองชนิดที่พบบ่อย: ชนิดที่ 1และชนิดที่ 2</span><span class="sxs-lookup"><span data-stu-id="dff2d-217">Star schema design theory refers to two common SCD types: Type 1 and Type 2.</span></span> <span data-ttu-id="dff2d-218">ตารางชนิดมิติอาจเป็นชนิดที่ 1 หรือชนิดที่ 2 หรือสนับสนุนทั้งสองชนิดในเวลาเดียวกันสำหรับคอลัมน์ที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="dff2d-218">A dimension-type table could be Type 1 or Type 2, or support both types simultaneously for different columns.</span></span>

### <a name="type-1-scd"></a><span data-ttu-id="dff2d-219">SCD ชนิดที่ 1</span><span class="sxs-lookup"><span data-stu-id="dff2d-219">Type 1 SCD</span></span>

<span data-ttu-id="dff2d-220">**SCD** **ชนิดที่ 1** แสดงค่าล่าสุดเสมอ และเมื่อตรวจพบการเปลี่ยนแปลงในข้อมูลต้นฉบับ ข้อมูลตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจถูกเขียนทับอย่างง่ายดาย</span><span class="sxs-lookup"><span data-stu-id="dff2d-220">A **Type 1**  **SCD** always reflects the latest values, and when changes in source data are detected, the dimension table data is overwritten.</span></span> <span data-ttu-id="dff2d-221">วิธีการออกแบบนี้ถือเป็นเรื่องปกติสำหรับคอลัมน์ที่จัดเก็บค่าเสริม เช่น ที่อยู่อีเมลหรือหมายเลขโทรศัพท์ของลูกค้า</span><span class="sxs-lookup"><span data-stu-id="dff2d-221">This design approach is common for columns that store supplementary values, like the email address or phone number of a customer.</span></span> <span data-ttu-id="dff2d-222">เมื่อที่อยู่อีเมลหรือหมายเลขโทรศัพท์ของลูกค้ามีการเปลี่ยนแปลง ตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจจะอัปเดตแถวลูกค้าด้วยค่าใหม่</span><span class="sxs-lookup"><span data-stu-id="dff2d-222">When a customer email address or phone number changes, the dimension table updates the customer row with the new values.</span></span> <span data-ttu-id="dff2d-223">ซึ่งเทียบได้ว่าลูกค้ามีข้อมูลการติดต่อนี้อยู่เสมอ</span><span class="sxs-lookup"><span data-stu-id="dff2d-223">It's as if the customer always had this contact information.</span></span>

<span data-ttu-id="dff2d-224">การรีเฟรชแบบไม่เพิ่มของตารางชนิดมิติแบบจำลอง Power BI จะทำให้เกิดผลลัพธ์เป็น SCD ชนิดที่ 1</span><span class="sxs-lookup"><span data-stu-id="dff2d-224">A non-incremental refresh of a Power BI model dimension-type table achieves the result of a Type 1 SCD.</span></span> <span data-ttu-id="dff2d-225">เป็นการรีเฟรชข้อมูลตารางเพื่อให้แน่ใจว่ามีการโหลดค่าล่าสุด</span><span class="sxs-lookup"><span data-stu-id="dff2d-225">It refreshes the table data to ensure the latest values are loaded.</span></span>

### <a name="type-2-scd"></a><span data-ttu-id="dff2d-226">SCD ชนิดที่ 2</span><span class="sxs-lookup"><span data-stu-id="dff2d-226">Type 2 SCD</span></span>

<span data-ttu-id="dff2d-227">**SCD** **ชนิดที่ 2** สนับสนุนการกำหนดเวอร์ชันของสมาชิกมิติ</span><span class="sxs-lookup"><span data-stu-id="dff2d-227">A **Type 2**  **SCD** supports versioning of dimension members.</span></span> <span data-ttu-id="dff2d-228">ถ้าระบบต้นทางไม่ได้จัดเก็บเวอร์ชันไว้ จากนั้นมักจะเป็นกระบวนการโหลดของคลังข้อมูลที่ตรวจหาการเปลี่ยนแปลง และจัดการการเปลี่ยนแปลงในตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจได้อย่างเหมาะสม</span><span class="sxs-lookup"><span data-stu-id="dff2d-228">If the source system doesn't store versions, then it's usually the data warehouse load process that detects changes, and appropriately manages the change in a dimension table.</span></span> <span data-ttu-id="dff2d-229">ในกรณีนี้ ตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจต้องใช้คีย์ตัวแทนเพื่อระบุการอ้างอิงที่ไม่ซ้ำกันกับ _เวอร์ชัน_ ของสมาชิกมิติ</span><span class="sxs-lookup"><span data-stu-id="dff2d-229">In this case, the dimension table must use a surrogate key to provide a unique reference to a _version_ of the dimension member.</span></span> <span data-ttu-id="dff2d-230">นอกจากนี้ยังรวมถึงคอลัมน์ที่กำหนดความถูกต้องของช่วงวันที่ของเวอร์ชันแ(เช่น **StartDate** และ **EndDate**) และอาจเป็นคอลัมน์ค่าสถานะ (เช่น **IsCurrent**) เพื่อกรองตามสมาชิกมิติปัจจุบันได้อย่างง่ายดาย</span><span class="sxs-lookup"><span data-stu-id="dff2d-230">It also includes columns that define the date range validity of the version (for example, **StartDate** and **EndDate**) and possibly a flag column (for example, **IsCurrent**) to easily filter by current dimension members.</span></span>

<span data-ttu-id="dff2d-231">ตัวอย่างเช่น งานผจญภัยกำหนดพนักงานขายให้กับภูมิภาคการขาย</span><span class="sxs-lookup"><span data-stu-id="dff2d-231">For example, Adventure Works assigns salespeople to a sales region.</span></span> <span data-ttu-id="dff2d-232">เมื่อพนักงานขายย้ายภูมิภาค จะต้องมีการสร้างเวอร์ชันใหม่ของพนักงานขายเพื่อให้แน่ใจว่าค่าความจริงในอดีตยังคงเชื่อมโยงกับภูมิภาคก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="dff2d-232">When a salesperson relocates region, a new version of the salesperson must be created to ensure that historical facts remain associated with the former region.</span></span> <span data-ttu-id="dff2d-233">เมื่อต้องการสนับสนุนการวิเคราะห์ประวัติยอดขายที่ถูกต้องตามพนักงานขาย ตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจิต้องจัดเก็บเวอร์ชันของพนักงานขายและภูมิภาคที่เกี่ยวข้องของพวกเขา</span><span class="sxs-lookup"><span data-stu-id="dff2d-233">To support accurate historic analysis of sales by salesperson, the dimension table must store versions of salespeople and their associated region(s).</span></span> <span data-ttu-id="dff2d-234">นอกจากนี้ตารางควรรวมค่าวันที่เริ่มต้นและสิ้นสุดเพื่อกำหนดความสมเหตุสมผลด้านเวลา</span><span class="sxs-lookup"><span data-stu-id="dff2d-234">The table should also include start and end date values to define the time validity.</span></span> <span data-ttu-id="dff2d-235">เวอร์ชันปัจจุบันอาจกำหนดวันสิ้นสุดว่างเปล่า (หรือ 12/31/9999) ซึ่งบ่งชี้ว่าแถวเป็นเวอร์ชันปัจจุบัน</span><span class="sxs-lookup"><span data-stu-id="dff2d-235">Current versions may define an empty end date (or 12/31/9999), which indicates that the row is the current version.</span></span> <span data-ttu-id="dff2d-236">นอกจากนี้ตารางต้องกำหนดคีย์ตัวแทนเนื่องจากคีย์ธุรกิจ (ในอินสแตนซ์นี้ รหัสพนักงาน) จะไม่ซ้ำกัน</span><span class="sxs-lookup"><span data-stu-id="dff2d-236">The table must also define a surrogate key because the business key (in this instance, employee ID) won't be unique.</span></span>

<span data-ttu-id="dff2d-237">ถือเป็นสิ่งสำคัญที่ต้องทำความเข้าใจว่าเมื่อข้อมูลต้นฉบับไม่ได้จัดเก็บเวอร์ชันไว้ คุณต้องใช้ระบบขั้นกลาง (เช่น คลังข้อมูล) เพื่อตรวจหาและจัดเก็บการเปลี่ยนแปลง</span><span class="sxs-lookup"><span data-stu-id="dff2d-237">It's important to understand that when the source data doesn't store versions, you must use an intermediate system (like a data warehouse) to detect and store changes.</span></span> <span data-ttu-id="dff2d-238">กระบวนการการโหลดตารางต้องรักษาข้อมูลที่มีอยู่และตรวจหาการเปลี่ยนแปลง</span><span class="sxs-lookup"><span data-stu-id="dff2d-238">The table load process must preserve existing data and detect changes.</span></span> <span data-ttu-id="dff2d-239">เมื่อตรวจพบการเปลี่ยนแปลง กระบวนการโหลดตารางต้องทำให้เวอร์ชันปัจจุบันหมดอายุ</span><span class="sxs-lookup"><span data-stu-id="dff2d-239">When a change is detected, the table load process must expire the current version.</span></span> <span data-ttu-id="dff2d-240">ซึ่งจะบันทึกการเปลี่ยนแปลงเหล่านี้โดยการอัปเดตค่า **EndDate** และการแทรกเวอร์ชันใหม่ด้วยค่า **StartDate** ที่เริ่มต้นจากค่า **EndDate** ก่อนหน้า</span><span class="sxs-lookup"><span data-stu-id="dff2d-240">It records these changes by updating the **EndDate** value and inserting a new version with the **StartDate** value commencing from the previous **EndDate** value.</span></span> <span data-ttu-id="dff2d-241">นอกจากนี้ ข้อเท็จจริงที่เกี่ยวข้องต้องใช้การค้นหาโดยยึดตามเวลาเพื่อค้นคืนค่าคีย์มิติที่สัมพันธ์กับวันที่ตามค่าความจริง</span><span class="sxs-lookup"><span data-stu-id="dff2d-241">Also, related facts must use a time-based lookup to retrieve the dimension key value relevant to the fact date.</span></span> <span data-ttu-id="dff2d-242">แบบจำลอง Power BI ที่ใช้ Power Query ไม่สามารถสร้างผลลัพธ์นี้ได้</span><span class="sxs-lookup"><span data-stu-id="dff2d-242">A Power BI model using Power Query can't produce this result.</span></span> <span data-ttu-id="dff2d-243">อย่างไรก็ตาม แบบจำลองสามารถโหลดข้อมูลจากตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจชนิด SCD ชนิดที่ 2 ที่โหลดไว้ล่วงหน้าได้</span><span class="sxs-lookup"><span data-stu-id="dff2d-243">It can, however, load data from a pre-loaded SCD Type 2 dimension table.</span></span>

<span data-ttu-id="dff2d-244">แบบจำลอง Power BI ควรสนับสนุนการคิวรีข้อมูลประวัติสำหรับสมาชิก โดยไม่คำนึงถึงการเปลี่ยนแปลง และสำหรับเวอร์ชันของสมาชิกซึ่งแสดงสถานะเฉพาะของสมาชิกในเวลา</span><span class="sxs-lookup"><span data-stu-id="dff2d-244">The Power BI model should support querying historical data for a member, regardless of change, and for a version of the member, which represents a particular state of the member in time.</span></span> <span data-ttu-id="dff2d-245">ในบริบทของงานผจญภัย การออกแบบนี้จะช่วยให้คุณสามารถคิวรีพนักงานขายได้ โดยไม่คำนึงถึงภูมิภาคการขายที่กำหนด หรือสำหรับเวอร์ชันเฉพาะของพนักงานขาย</span><span class="sxs-lookup"><span data-stu-id="dff2d-245">In the context of Adventure Works, this design enables you to query the salesperson regardless of assigned sales region, or for a particular version of the salesperson.</span></span>

<span data-ttu-id="dff2d-246">ในการดำเนินการนี้ ตารางชนิดมิติแบบจำลอง Power BI ต้องรวมคอลัมน์สำหรับการกรองพนักงานขาย และคอลัมน์ที่แตกต่างกันสำหรับการกรองเวอร์ชันเฉพาะของพนักงานขาย</span><span class="sxs-lookup"><span data-stu-id="dff2d-246">To achieve this requirement, the Power BI model dimension-type table must include a column for filtering the salesperson, and a different column for filtering a specific version of the salesperson.</span></span> <span data-ttu-id="dff2d-247">ถือเป็นสิ่งสำคัญที่คอลัมน์เวอร์ชันจะต้องมีคำอธิบายที่ไม่กำกวม เช่น "Michael Blythe (12/15/2008-06/26/2019)" หรือ "Michael Blythe (ปัจจุบัน)"</span><span class="sxs-lookup"><span data-stu-id="dff2d-247">It's important that the version column provides a non-ambiguous description, like "Michael Blythe (12/15/2008-06/26/2019)" or "Michael Blythe (current)".</span></span> <span data-ttu-id="dff2d-248">นอกจากนี้ยังถือเป็นสิ่งสำคัญที่จะให้ความรู้แก่ผู้เขียนรายงานและผู้บริโภคเกี่ยวกับพื้นฐานของ SCD ชนิดที่ 2 และวิธีการออกแบบรายงานที่เหมาะสมโดยนำเอาตัวกรองที่ถูกต้องมาใช้</span><span class="sxs-lookup"><span data-stu-id="dff2d-248">It's also important to educate report authors and consumers about the basics of SCD Type 2, and how to achieve appropriate report designs by applying correct filters.</span></span>

<span data-ttu-id="dff2d-249">นอกจากนี้ยังเป็นแนวทางปฏิบัติด้านการออกแบบที่ดีเพื่อรวมลำดับชั้นที่อนุญาตให้วิชวลทำการเจาะลงไปยังระดับเวอร์ชัน</span><span class="sxs-lookup"><span data-stu-id="dff2d-249">It's also a good design practice to include a hierarchy that allows visuals to drill down to the version level.</span></span>

![ตัวอย่างลำดับชั้นในรายการเขตข้อมูล](media/star-schema/hierarchy-drill-down.png)

![เอาท์พุทตัวอย่างของลำดับชั้น](media/star-schema/hierarchy-drill-down2.png)

## <a name="role-playing-dimensions"></a><span data-ttu-id="dff2d-252">มิติการเล่นบทบาท</span><span class="sxs-lookup"><span data-stu-id="dff2d-252">Role-playing dimensions</span></span>

<span data-ttu-id="dff2d-253">**มิติการเล่นบทบาท** คือ มิติที่สามารถกรองค่าความจริงที่เกี่ยวข้องอย่างแตกต่างกันได้</span><span class="sxs-lookup"><span data-stu-id="dff2d-253">A **role-playing dimension** is a dimension that can filter related facts differently.</span></span> <span data-ttu-id="dff2d-254">ตัวอย่างเช่น ในงานผจญภัย ตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจวันที่มีสามความสัมพันธ์ไปยังค่าความจริงยอดขายของผู้ค้าปลีก</span><span class="sxs-lookup"><span data-stu-id="dff2d-254">For example, at Adventure Works, the date dimension table has three relationships to the reseller sales facts.</span></span> <span data-ttu-id="dff2d-255">ตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจเดียวกันสามารถใช้เพื่อกรองค่าความจริงตามวันที่สั่งซื้อ, วันที่ส่งหรือวันที่จัดส่ง</span><span class="sxs-lookup"><span data-stu-id="dff2d-255">The same dimension table can be used to filter the facts by order date, ship date, or delivery date.</span></span>

<span data-ttu-id="dff2d-256">ในคลังข้อมูล วิธีการออกแบบที่ได้รับการยอมรับคือ เพื่อกำหนดตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจวันที่เดี่ยว</span><span class="sxs-lookup"><span data-stu-id="dff2d-256">In a data warehouse, the accepted design approach is to define a single date dimension table.</span></span> <span data-ttu-id="dff2d-257">ณ เวลาที่ทำการคิวรี "บทบาท" ของมิติวันที่จะถูกสร้างขึ้นโดยคอลัมน์ค่าความจริงที่คุณใช้ในการรวมตาราง</span><span class="sxs-lookup"><span data-stu-id="dff2d-257">At query time, the "role" of the date dimension is established by which fact column you use to join the tables.</span></span> <span data-ttu-id="dff2d-258">ตัวอย่างเช่น เมื่อคุณวิเคราะห์ยอดขายตามวันที่ในใบสั่งซื้อ การรวมตารางจะเกี่ยวข้องกับคอลัมน์วันที่ในใบสั่งขายของผู้ค้าปลีก</span><span class="sxs-lookup"><span data-stu-id="dff2d-258">For example, when you analyze sales by order date, the table join relates to the reseller sales order date column.</span></span>

<span data-ttu-id="dff2d-259">ในแบบจำลอง Power BI การออกแบบนี้สามารถลอกเลียนแบบได้โดยการสร้างความสัมพันธ์ที่หลากหลายระหว่างสองตาราง</span><span class="sxs-lookup"><span data-stu-id="dff2d-259">In a Power BI model, this design can be imitated by creating multiple relationships between two tables.</span></span> <span data-ttu-id="dff2d-260">ในตัวอย่างงานผจญภัย ตารางวันที่และยอดขายของผู้ค้าปลีกจะมีสามความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="dff2d-260">In the Adventure Works example, the date and reseller sales tables would have three relationships.</span></span> <span data-ttu-id="dff2d-261">ในขณะที่การออกแบบนี้มีความเป็นไปได้ จำเป็นต้องทำความเข้าใจว่าความสัมพันธ์สามารถใช้งานได้เฉพาะระหว่างสองตารางแบบจำลองของ Power BI เท่านั้น</span><span class="sxs-lookup"><span data-stu-id="dff2d-261">While this design is possible, it's important to understand that there can only be one active relationship between two Power BI model tables.</span></span> <span data-ttu-id="dff2d-262">ต้องตั้งค่าความสัมพันธ์ที่เหลือทั้งหมดเป็นไม่ได้ใช้งาน</span><span class="sxs-lookup"><span data-stu-id="dff2d-262">All remaining relationships must be set to inactive.</span></span> <span data-ttu-id="dff2d-263">การมีความสัมพันธ์ที่ใช้งานเดี่ยวหมายความว่ามีการแพร่กระจายตัวกรองค่าเริ่มต้นจากวันที่ไปยังยอดขายของผู้ค้าปลีก</span><span class="sxs-lookup"><span data-stu-id="dff2d-263">Having a single active relationship means there is a default filter propagation from date to reseller sales.</span></span> <span data-ttu-id="dff2d-264">ในอินสแตนซ์นี้ ความสัมพันธ์ที่ใช้งานอยู่ถูกตั้งค่าเป็นตัวกรองทั่วไปมากที่สุดที่ใช้โดยรายงาน ซึ่งที่งานผจญภัยคือ ความสัมพันธ์ของวันที่สั่งซื้อ</span><span class="sxs-lookup"><span data-stu-id="dff2d-264">In this instance, the active relationship is set to the most common filter that is used by reports, which at Adventure Works is the order date relationship.</span></span>

![ตัวอย่างของมิติการเล่นบทบาทเดี่ยวและความสัมพันธ์](media/star-schema/relationships.png)

<span data-ttu-id="dff2d-266">วิธีเดียวที่จะใช้ความสัมพันธ์ที่ไม่ได้ทำงานคือ เพื่อกำหนดนิพจน์ DAX ที่ใช้ [ฟังก์ชัน USERELATIONSHIP](/dax/userelationship-function-dax)</span><span class="sxs-lookup"><span data-stu-id="dff2d-266">The only way to use an inactive relationship is to define a DAX expression that uses the [USERELATIONSHIP function](/dax/userelationship-function-dax).</span></span> <span data-ttu-id="dff2d-267">ในตัวอย่างของเรา นักพัฒนาแบบจำลองจะต้องสร้างหน่วยวัดเพื่อเปิดใช้งานการวิเคราะห์ยอดขายของผู้ค้าปลีกตามวันที่จัดส่งและวันที่ส่งมอบ</span><span class="sxs-lookup"><span data-stu-id="dff2d-267">In our example, the model developer must create measures to enable analysis of reseller sales by ship date and delivery date.</span></span> <span data-ttu-id="dff2d-268">การทำงานนี้อาจเป็นเรื่องน่าเบื่อ โดยเฉพาะอย่างยิ่งเมื่อตารางผู้ค้าปลีกกำหนดหน่วยวัดจำนวนมาก</span><span class="sxs-lookup"><span data-stu-id="dff2d-268">This work can be tedious, especially when the reseller table defines many measures.</span></span> <span data-ttu-id="dff2d-269">นอกจากนี้ยังสร้างพื้นที่ทำงานของบานหน้าต่าง **เขตข้อมูล** ด้วยหน่วยวัดที่มากเกินไป</span><span class="sxs-lookup"><span data-stu-id="dff2d-269">It also creates **Fields** pane clutter, with an overabundance of measures.</span></span> <span data-ttu-id="dff2d-270">รวมถึงยังมีข้อจำกัดอื่น ๆ อีกด้วย:</span><span class="sxs-lookup"><span data-stu-id="dff2d-270">There are other limitations, too:</span></span>

- <span data-ttu-id="dff2d-271">เมื่อผู้สร้างรายงานอาศัยการสรุปคอลัมน์ แทนที่จะเป็นการกำหนดหน่วยวัด พวกเขาไม่จึงสามารถบรรลุการให้ข้อสรุปสำหรับความสัมพันธ์ที่ไม่ได้ใช้งานโดยไม่ต้องเขียนหน่วยวัดระดับรายงาน</span><span class="sxs-lookup"><span data-stu-id="dff2d-271">When report authors rely on summarizing columns, rather than defining measures, they can't achieve summarization for the inactive relationships without writing a report-level measure.</span></span> <span data-ttu-id="dff2d-272">สามารถกำหนดหน่วยวัดระดับรายงานเมื่อทำการเขียนรายงานใน Power BI Desktop เท่านั้น</span><span class="sxs-lookup"><span data-stu-id="dff2d-272">Report-level measures can only be defined when authoring reports in Power BI Desktop.</span></span>
- <span data-ttu-id="dff2d-273">ด้วยเส้นทางความสัมพันธ์ที่ใช้งานอยู่ระหว่างวันที่และผู้จำหน่ายเท่านั้นจึงเป็นไปไม่ได้ที่จะกรองยอดขายของผู้จำหน่ายได้ในเวลาเดียวกันตามชนิดของวันที่ที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="dff2d-273">With only one active relationship path between date and reseller sales, it's not possible to simultaneously filter reseller sales by different types of dates.</span></span> <span data-ttu-id="dff2d-274">ตัวอย่างเช่น คุณไม่สามารถสร้างวิชวลที่วางแผนยอดขายของวันที่สั่งซื้อตามยอดขายที่จัดส่ง</span><span class="sxs-lookup"><span data-stu-id="dff2d-274">For example, you can't produce a visual that plots order date sales by shipped sales.</span></span>

<span data-ttu-id="dff2d-275">เพื่อเอาชนะข้อจำกัดเหล่านี้ เทคนิคการสร้างแบบจำลอง Power BI ทั่วไปก็คือ เพื่อสร้างตารางชนิดมิติสำหรับแต่ละอินสแตนซ์การเล่นตามบทบาท</span><span class="sxs-lookup"><span data-stu-id="dff2d-275">To overcome these limitations, a common Power BI modeling technique is to create a dimension-type table for each role-playing instance.</span></span> <span data-ttu-id="dff2d-276">โดยทั่วไปคุณสร้างตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจเพิ่มเติมเป็น [ตารางที่มีการคำนวณ](/dax/calculatetable-function-dax) โดยใช้ DAX</span><span class="sxs-lookup"><span data-stu-id="dff2d-276">You typically create the additional dimension tables as [calculated tables](/dax/calculatetable-function-dax), using DAX.</span></span> <span data-ttu-id="dff2d-277">การใช้ตารางที่มีการคำนวณ แบบจำลองสามารถประกอบด้วยตาราง **วันที่** ตาราง **วันที่จัดส่ง** และตาราง **วันที่ส่งมอบ** ซึ่งแต่ละตารางมีความสัมพันธ์แบบเดี่ยวกับแบบที่ใช้งานอยู่ไปยังคอลัมน์ตารางยอดขายของผู้ค้าปลีกที่เกี่ยวข้อง</span><span class="sxs-lookup"><span data-stu-id="dff2d-277">Using calculated tables, the model can contain a **Date** table, a **Ship Date** table and a **Delivery Date** table, each with a single and active relationship to their respective reseller sales table columns.</span></span>

![ตัวอย่างของมิติการเล่นบทบาทและความสัมพันธ์](media/star-schema/relationships2.png)

<span data-ttu-id="dff2d-279">วิธีการออกแบบนี้ไม่จำเป็นต้องให้คุณกำหนดหน่วยวัดหลาหลายให้กับบทบาทวันที่ที่แตกต่างกัน และอนุญาตให้มีการกรองในเวลาเดียวกันตามบทบาทวันที่อื่นที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="dff2d-279">This design approach doesn't require you to define multiple measures for different date roles, and it allows simultaneous filtering by different date roles.</span></span> <span data-ttu-id="dff2d-280">อย่างไรก็ตาม ราคาเล็กน้อยในการชำระเงิน ด้วยวิธีการออกแบบนี้คือ จะมีการทำซ้ำของตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจวันที่ซึ่งส่งผลให้ขนาดพื้นที่จัดเก็บแบบจำลองเพิ่มขึ้น</span><span class="sxs-lookup"><span data-stu-id="dff2d-280">A minor price to pay, however, with this design approach is that there will be duplication of the date dimension table resulting in an increased model storage size.</span></span> <span data-ttu-id="dff2d-281">โดยทั่วไปแล้ว ตารางชนิดมิติจะจัดเก็บแถวน้อยกว่าที่สัมพันธ์กับตารางชนิดค่าความจริง ซึ่งไม่ใช่เรื่องที่น่ากังวลแต่อย่างใด</span><span class="sxs-lookup"><span data-stu-id="dff2d-281">As dimension-type tables typically store fewer rows relative to fact-type tables, it is rarely a concern.</span></span>

<span data-ttu-id="dff2d-282">สังเกตแนวทางปฏิบัติด้านการออกแบบที่ดีต่อไปนี้เมื่อคุณสร้างตารางชนิดมิติแบบจำลองสำหรับแต่ละบทบาท:</span><span class="sxs-lookup"><span data-stu-id="dff2d-282">Observe the following good design practices when you create model dimension-type tables for each role:</span></span>

- <span data-ttu-id="dff2d-283">ตรวจสอบให้แน่ใจว่าชื่อคอลัมน์สามารถอธิบายตัวเอง</span><span class="sxs-lookup"><span data-stu-id="dff2d-283">Ensure that the column names are self-describing.</span></span> <span data-ttu-id="dff2d-284">ในขณะที่เป็นไปได้ที่จะมีคอลัมน์ **ปี** ในตารางวันที่ทั้งหมด (ชื่อคอลัมน์จะไม่ซ้ำกันภายในตารางของเหล่านั้น) ซึ่งจะไม่มีการอธิบายตัวเองตามชื่อวิชวลที่เป็นค่าเริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="dff2d-284">While it's possible to have a **Year** column in all date tables (column names are unique within their table), it's not self-describing by default visual titles.</span></span> <span data-ttu-id="dff2d-285">พิจารณาเปลี่ยนชื่อคอลัมน์ในแต่ละตารางบทบาทมิติ เพื่อให้ตาราง **วันที่จัดส่ง** มีคอลัมน์ปีที่ชื่อว่า **ปีการจัดส่ง** ฯลฯ</span><span class="sxs-lookup"><span data-stu-id="dff2d-285">Consider renaming columns in each dimension role table, so that the **Ship Date** table has a year column named **Ship Year**, etc.</span></span>
- <span data-ttu-id="dff2d-286">เมื่อเกี่ยวเนื่องกัน ตรวจสอบให้แน่ใจว่าคำอธิบายตารางมอบคำติชมไปยังผู้เขียนรายงาน (ผ่านเคล็ดลับเครื่องมือของบานหน้าต่าง **เขตข้อมูล**) เกี่ยวกับวิธีการกำหนดค่าการแพร่กระจายตัวกรอง</span><span class="sxs-lookup"><span data-stu-id="dff2d-286">When relevant, ensure that table descriptions provide feedback to report authors (through **Fields** pane tooltips) about how filter propagation is configured.</span></span> <span data-ttu-id="dff2d-287">ความชัดเจนนี้ถือเป็นสิ่งสำคัญเมื่อแบบจำลองประกอบด้วยตารางที่มีชื่อโดยทั่วไป เช่น **วันที่** ซึ่งถูกใช้เพื่อกรองตารางชนิดค่าความจริงจำนวนมาก</span><span class="sxs-lookup"><span data-stu-id="dff2d-287">This clarity is important when the model contains a generically named table, like **Date**, which is used to filter many fact-type tables.</span></span> <span data-ttu-id="dff2d-288">ตัวอย่างเช่น ในกรณีที่ตารางนี้มีความสัมพันธ์ที่ใช้งานอยู่ไปยังคอลัมน์วันที่ของใบสั่งขายของผู้ค้าปลีก ลองพิจารณาให้คำอธิบายตารางเช่น "กรองยอดขายของผู้ค้าปลีกตามวันที่สั่งซื้อ"</span><span class="sxs-lookup"><span data-stu-id="dff2d-288">In the case that this table has, for example, an active relationship to the reseller sales order date column, consider providing a table description like "Filters reseller sales by order date".</span></span>

<span data-ttu-id="dff2d-289">สำหรับข้อมูลเพิ่มเติม โปรดดู[คำแนะนำความแตกต่างระหว่างความสัมพันธ์ที่ใช้และไม่ได้ใช้งาน](relationships-active-inactive.md)</span><span class="sxs-lookup"><span data-stu-id="dff2d-289">For more information, see [Active vs inactive relationship guidance](relationships-active-inactive.md).</span></span>

## <a name="junk-dimensions"></a><span data-ttu-id="dff2d-290">มิติขยะ</span><span class="sxs-lookup"><span data-stu-id="dff2d-290">Junk dimensions</span></span>

<span data-ttu-id="dff2d-291">**มิติขยะ** มีประโยชน์เมื่อมมิติจำนวนมาก โดยเฉพาะอย่างยิ่งที่ประกอบด้วยสองถึงสามแอตทริบิวต์ (บางทีอาจเป็นหนึ่ง) และเมื่อแอตทริบิวต์เหล่านี้มีค่าไม่มาก</span><span class="sxs-lookup"><span data-stu-id="dff2d-291">A **junk dimension** is useful when there are many dimensions, especially consisting of few attributes (perhaps one), and when these attributes have few values.</span></span> <span data-ttu-id="dff2d-292">ผู้สมัครที่ดีจะรวมคอลัมน์สถานะคำสั่งซื้อ หรือคอลัมน์เชิงประชากรศาสตร์ของลูกค้า (เพศ กลุ่มอายุ ฯลฯ)</span><span class="sxs-lookup"><span data-stu-id="dff2d-292">Good candidates include order status columns, or customer demographic columns (gender, age group, etc.).</span></span>

<span data-ttu-id="dff2d-293">วัตถุประสงค์ในการออกแบบมิติขยะก็คือ เพื่อรวมมิติ "ขนาดเล็ก" จำนวนมากเข้าเป็นมิติเดี่ยวเพื่อทั้งลดขนาดการจัดเก็บแบบจำลองและยังลดกลุ่มของบานหน้าต่าง **เขตข้อมูล** โดยทำให้ตารางแบบจำลองที่น้อยกว่าปรากฎขึ้น</span><span class="sxs-lookup"><span data-stu-id="dff2d-293">The design objective of a junk dimension is to consolidate many "small" dimensions into a single dimension to both reduce the model storage size and also reduce **Fields** pane clutter by surfacing fewer model tables.</span></span>

<span data-ttu-id="dff2d-294">โดยทั่วไปแล้ว ตารางสำหรับจัดเก็บข้อมูลสำหรับแต่ละมิติทางธุรกิจขยะมักจะเป็นผลิตภัณฑ์คาร์ทีเซียนของสมาชิกแอตทริบิวต์มิติทั้งหมดที่มีคอลัมนคีย์ตัวแทน</span><span class="sxs-lookup"><span data-stu-id="dff2d-294">A junk dimension table is typically the Cartesian product of all dimension attribute members, with a surrogate key column.</span></span> <span data-ttu-id="dff2d-295">คีย์ตัวแทนให้การอ้างอิงที่ไม่ซ้ำกันกับแต่ละแถวในตาราง</span><span class="sxs-lookup"><span data-stu-id="dff2d-295">The surrogate key provides a unique reference to each row in the table.</span></span> <span data-ttu-id="dff2d-296">คุณสามารถสร้างมิติในคลังข้อมูล หรือโดยการใช้ Power Query เพื่อสร้างคิวรีที่ดำเนินการ [รวมคิวรีภายนอกแบบเต็ม](/powerquery-m/table-join) จากนั้นจึงเพิ่มคีย์ตัวแทน (คอลัมน์ดัชนี)</span><span class="sxs-lookup"><span data-stu-id="dff2d-296">You can build the dimension in a data warehouse, or by using Power Query to create a query that performs [full outer query joins](/powerquery-m/table-join), then adds a surrogate key (index column).</span></span>

![ตัวอย่างมิติขยะ](media/star-schema/junk-dimension.png)

<span data-ttu-id="dff2d-298">คุณโหลดคิวรีนี้ไปยังแบบจำลองเป็นตารางชนิดมิติ</span><span class="sxs-lookup"><span data-stu-id="dff2d-298">You load this query to the model as a dimension-type table.</span></span> <span data-ttu-id="dff2d-299">นอกจากนี้คุณยังต้องผสานคิวรีนี้กับคิวรีค่าความจริง ดังนั้นจึงมีการโหลดคอลัมน์ดัชนีไปยังแบบจำลองเพื่อสนับสนุนการสร้างความสัมพันธ์แบบจำลองแบบ "หนึ่งต่อกลุ่ม"</span><span class="sxs-lookup"><span data-stu-id="dff2d-299">You also need to merge this query with the fact query, so the index column is  loaded to the model to support the creation of a "one-to-many" model relationship.</span></span>

## <a name="degenerate-dimensions"></a><span data-ttu-id="dff2d-300">ตัวอย่างมิติลดรูป</span><span class="sxs-lookup"><span data-stu-id="dff2d-300">Degenerate dimensions</span></span>

<span data-ttu-id="dff2d-301">**มิติลดรูป** อ้างอิงถึงแอตทริบิวต์ของตารางสำหรับเก็บข้อมูลตัวชี้วัดที่กำหนดสำหรับการกรอง</span><span class="sxs-lookup"><span data-stu-id="dff2d-301">A **degenerate dimension** refers to an attribute of the fact table that is required for filtering.</span></span> <span data-ttu-id="dff2d-302">ในงานผจญภัย หมายเลขใบสั่งขายของผู้ค้าปลีกคือ ตัวอย่างที่ดี</span><span class="sxs-lookup"><span data-stu-id="dff2d-302">At Adventure Works, the reseller sales order number is a good example.</span></span> <span data-ttu-id="dff2d-303">ในกรณีนี้จะไม่ทำให้การออกแบบแบบจำลองที่ดีมีความสมเหตุสมผลในการสร้างตารางอิสระที่ประกอบด้วยแค่หนึ่งคอลัมน์นี้ เนื่องจากมันจะเพิ่มขนาดการจัดเก็บแบบจำลองและผลลัพธ์ในบานหน้าต่าง **เขตข้อมูล** ที่ไม่เป็นระเบียบ</span><span class="sxs-lookup"><span data-stu-id="dff2d-303">In this case, it doesn't make good model design sense to create an independent table consisting of just this one column, because it would increase the model storage size and result in **Fields** pane clutter.</span></span>

<span data-ttu-id="dff2d-304">ในแบบจำลอง Power BI ถือว่าเหมาะสมที่จะเพิ่มคอลัมน์หมายเลขใบสั่งขายไปยังตารางชนิดค่าความจริงเพื่ออนุญาตให้มีการกรองหรือการจัดกลุ่มตามหมายเลขใบสั่งขาย</span><span class="sxs-lookup"><span data-stu-id="dff2d-304">In the Power BI model, it can be appropriate to add the sales order number column to the fact-type table to allow filtering or grouping by sales order number.</span></span> <span data-ttu-id="dff2d-305">ซึ่งเป็นข้อยกเว้นสำหรับกฎที่แนะนำก่อนหน้านี้ที่คุณไม่ควรผสมชนิดของตารางเข้าด้วยกัน (เช่น โดยทั่วไปแล้ว ตารางแบบจำลองควรเป็นชนิดมิติหรือชนิดค่าความจริง)</span><span class="sxs-lookup"><span data-stu-id="dff2d-305">It is an exception to the formerly introduced rule that you should not mix table types (generally, model tables should be either dimension-type or fact-type).</span></span>

![ตัวอย่างมิติลดรูป](media/star-schema/degenerate-dimension.png)

<span data-ttu-id="dff2d-307">อย่างไรก็ตาม ถ้าตารางยอดขายของผู้จำหน่ายใน Adventure Works มีหมายเลขคำสั่งซื้อ _และ_ คอลัมน์หมายเลขบรรทัดคำสั่งซื้อ และคุณจำเป็นต้องใช้ทั้งสองคอลัมน์ในการกรอง ควรเลือกใช้ตารางแบบ degenerate dimension</span><span class="sxs-lookup"><span data-stu-id="dff2d-307">However, if the Adventure Works resellers sales table has order number _and_ order line number columns, and they're required for filtering, a degenerate dimension table would be a good design.</span></span> <span data-ttu-id="dff2d-308">สำหรับข้อมูลเพิ่มเติม โปรดดู[คำแนะนำความสัมพันธ์แบบหนึ่งต่อหนึ่ง (มิติลดรูป)](relationships-one-to-one.md#degenerate-dimensions)</span><span class="sxs-lookup"><span data-stu-id="dff2d-308">For more information, see [One-to-one relationship guidance (Degenerate dimensions)](relationships-one-to-one.md#degenerate-dimensions).</span></span>

## <a name="factless-fact-tables"></a><span data-ttu-id="dff2d-309">ตารางสำหรับเก็บข้อมูลตัวชี้วัดที่ไม่มีการเก็บค่าความจริงหรือมาตรวัดใด ๆ</span><span class="sxs-lookup"><span data-stu-id="dff2d-309">Factless fact tables</span></span>

<span data-ttu-id="dff2d-310">ตาราง **สำหรับเก็บข้อมูลตัวชี้วัดที่ไม่มีการเก็บค่าความจริงหรือมาตรวัดใด ๆ** จะไม่รวมคอลัมน์หน่วยวัดใด ๆ</span><span class="sxs-lookup"><span data-stu-id="dff2d-310">A **factless fact** table doesn't include any measure columns.</span></span> <span data-ttu-id="dff2d-311">ซึ่งประกอบด้วยคีย์มิติเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="dff2d-311">It contains only dimension keys.</span></span>

<span data-ttu-id="dff2d-312">ตารางสำหรับเก็บข้อมูลตัวชี้วัดที่ไม่มีการเก็บค่าความจริงหรือมาตรวัดใด ๆ สามารถจัดเก็บการสังเกตการณ์ที่กำหนดโดยคีย์มิติได้</span><span class="sxs-lookup"><span data-stu-id="dff2d-312">A factless fact table could store observations defined by dimension keys.</span></span> <span data-ttu-id="dff2d-313">ตัวอย่างเช่น ณ วันที่และเวลาเฉพาะ ลูกค้าเฉพาะเข้าสู่ระบบในเว็บไซต์ของคุณ</span><span class="sxs-lookup"><span data-stu-id="dff2d-313">For example, at a particular date and time, a particular customer logged into your web site.</span></span> <span data-ttu-id="dff2d-314">คุณสามารถกำหนดหน่วยวัดเพื่อนับจำนวนแถวของตารางสำหรับเก็บข้อมูลตัวชี้วัดที่ไม่มีการเก็บค่าความจริงหรือมาตรวัดใด ๆ เพื่อดำเนินการวิเคราะห์ว่าจำนวนลูกค้าที่เข้าสู่ระบบมีจำนวนกี่รายและเมื่อใดบ้าง</span><span class="sxs-lookup"><span data-stu-id="dff2d-314">You could define a measure to count the rows of the factless fact table to perform analysis of when and how many customers have logged in.</span></span>

<span data-ttu-id="dff2d-315">การใช้งานที่น่าสนใจมากขึ้นของตารางสำหรับเก็บข้อมูลตัวชี้วัดที่ไม่มีการเก็บค่าความจริงหรือมาตรวัดใด ๆ ก็คือ เพื่อจัดเก็บความสัมพันธ์ระหว่างมิติ และเป็นวิธีการออกแบบแบบจำลอง Power BI ที่เราแนะนำให้กำหนดความสัมพันธ์ของมิติแบบกลุ่ม-ต่อ-กลุ่ม</span><span class="sxs-lookup"><span data-stu-id="dff2d-315">A more compelling use of a factless fact table is to store relationships between dimensions, and it's the Power BI model design approach we recommend defining many-to-many dimension relationships.</span></span> <span data-ttu-id="dff2d-316">ใน [การออกแบบความสัมพันธ์ของมิติแบบกลุ่ม-ต่อ-กลุ่ม](relationships-many-to-many.md#relate-many-to-many-dimensions)ตารางสำหรับเก็บข้อมูลตัวชี้วัดที่ไม่มีการเก็บค่าความจริงหรือมาตรวัดใด ๆ จะเรียกว่าเป็น _ตารางการเชื่อมโยง_</span><span class="sxs-lookup"><span data-stu-id="dff2d-316">In a [many-to-many dimension relationship design](relationships-many-to-many.md#relate-many-to-many-dimensions), the factless fact table is referred to as a _bridging table_.</span></span>

<span data-ttu-id="dff2d-317">ตัวอย่างเช่น พิจารณาว่าพนักงานขายสามารถกำหนดให้กับหนึ่งภูมิภาคการขาย _ขึ้นไป_</span><span class="sxs-lookup"><span data-stu-id="dff2d-317">For example, consider that salespeople can be assigned to one _or more_ sales regions.</span></span> <span data-ttu-id="dff2d-318">ตารางการเชื่อมโยงจะได้รับการออกแบบเป็นตารางสำหรับเก็บข้อมูลตัวชี้วัดที่ไม่มีการเก็บค่าความจริงหรือมาตรวัดใด ๆ ที่ประกอบด้วยสองคอลัมน์: คีย์พนักงานขายและคีย์ภูมิภาค</span><span class="sxs-lookup"><span data-stu-id="dff2d-318">The bridging table would be designed as a factless fact table consisting of two columns: salesperson key and region key.</span></span> <span data-ttu-id="dff2d-319">สามารถจัดเก็บค่าที่ซ้ำกันได้ในทั้งสองคอลัมน์</span><span class="sxs-lookup"><span data-stu-id="dff2d-319">Duplicate values can be stored in both columns.</span></span>

![ตัวอย่างตารางสำหรับเก็บข้อมูลตัวชี้วัดที่ไม่มีการเก็บค่าความจริงหรือมาตรวัดใด ๆ](media/star-schema/factless-fact.png)

<span data-ttu-id="dff2d-321">วิธีการออกแบบแบบกลุ่ม-ต่อ-กลุ่มนี้ได้รับการจัดทำเป็นเอกสารไว้เป็นอย่างดี และสามารถดำเนินการให้สำเร็จได้โดยไม่ต้องมีตารางการเชื่อมโยง</span><span class="sxs-lookup"><span data-stu-id="dff2d-321">This many-to-many design approach is well documented, and it can be achieved without a bridging table.</span></span> <span data-ttu-id="dff2d-322">อย่างไรก็ตาม วิธีการของตารางการเชื่อมโยงถือว่าเป็นแนวทางปฏิบัติที่ดีที่สุดเมื่อสัมพันธ์กับสองมิติ</span><span class="sxs-lookup"><span data-stu-id="dff2d-322">However, the bridging table approach is considered the best practice when relating two dimensions.</span></span> <span data-ttu-id="dff2d-323">สำหรับข้อมูลเพิ่มเติม โปรดดู[คำแนะนำความสัมพันธ์แบบกลุ่มต่อกลุ่ม เชื่อมโยงตารางประเภทมิติสองตาราง)](relationships-many-to-many.md#relate-many-to-many-dimensions)</span><span class="sxs-lookup"><span data-stu-id="dff2d-323">For more information, see [Many-to-many relationship guidance (Relate two dimension-type tables)](relationships-many-to-many.md#relate-many-to-many-dimensions).</span></span>

## <a name="next-steps"></a><span data-ttu-id="dff2d-324">ขั้นตอนถัดไป</span><span class="sxs-lookup"><span data-stu-id="dff2d-324">Next steps</span></span>

<span data-ttu-id="dff2d-325">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการออกแบบแบบจำลองมิติที่มีลักษณะคล้ายดาวและการออกแบบแบบจำลอง Power BI ให้ดูบทความต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="dff2d-325">For more information about star schema design or Power BI model design, see the following articles:</span></span>

- [<span data-ttu-id="dff2d-326">บทความของวิกิพีเดียเกี่ยวกับการทำแบบจำลองเชิงมิติ</span><span class="sxs-lookup"><span data-stu-id="dff2d-326">Dimensional modeling Wikipedia article</span></span>](https://go.microsoft.com/fwlink/p/?linkid=246459)
- [<span data-ttu-id="dff2d-327">สร้างและจัดการความสัมพันธ์ใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="dff2d-327">Create and manage relationships in Power BI Desktop</span></span>](../transform-model/desktop-create-and-manage-relationships.md)
- [<span data-ttu-id="dff2d-328">คำแนะนำความสัมพันธ์แบบหนึ่งต่อหนึ่ง</span><span class="sxs-lookup"><span data-stu-id="dff2d-328">One-to-one relationship guidance</span></span>](relationships-one-to-one.md)
- [<span data-ttu-id="dff2d-329">คำแนะนำความสัมพันธ์แบบกลุ่มต่อกลุ่ม</span><span class="sxs-lookup"><span data-stu-id="dff2d-329">Many-to-many relationship guidance</span></span>](relationships-many-to-many.md)
- [<span data-ttu-id="dff2d-330">คำแนะนำความสัมพันธ์แบบสองทิศทาง</span><span class="sxs-lookup"><span data-stu-id="dff2d-330">Bi-directional relationship guidance</span></span>](relationships-bidirectional-filtering.md)
- [<span data-ttu-id="dff2d-331">คำแนะนำความสัมพันธ์ที่ใช้งานอยู่และไม่ได้ใช้งาน</span><span class="sxs-lookup"><span data-stu-id="dff2d-331">Active vs inactive relationship guidance</span></span>](relationships-active-inactive.md)
- <span data-ttu-id="dff2d-332">มีคำถามหรือไม่</span><span class="sxs-lookup"><span data-stu-id="dff2d-332">Questions?</span></span> [<span data-ttu-id="dff2d-333">ลองถามชุมชน Power BI</span><span class="sxs-lookup"><span data-stu-id="dff2d-333">Try asking the Power BI Community</span></span>](https://community.powerbi.com/)
- <span data-ttu-id="dff2d-334">มีข้อเสนอแนะไหม</span><span class="sxs-lookup"><span data-stu-id="dff2d-334">Suggestions?</span></span> [<span data-ttu-id="dff2d-335">สนับสนุนแนวคิดในการปรับปรุง Power BI</span><span class="sxs-lookup"><span data-stu-id="dff2d-335">Contribute ideas to improve Power BI</span></span>](https://ideas.powerbi.com/)
