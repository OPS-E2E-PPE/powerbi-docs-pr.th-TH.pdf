---
title: เปิดใช้งานการตรวจสอบโครงร่างสำคัญของบริการสำหรับ API ของผู้ดูแลระบบแบบอ่านอย่างเดียว (แสดงตัวอย่าง)
description: เรียนรู้วิธีการตรวจสอบหลักการบริการเพื่ออนุญาตให้ใช้ Api ของผู้ดูแลระบบแบบอ่านอย่างเดียวได้
author: paulinbar
ms.reviewer: ''
ms.service: powerbi
ms.subservice: powerbi-admin
ms.topic: how-to
ms.date: 12/01/2020
ms.author: painbar
ms.custom: ''
LocalizationGroup: Administration
ms.openlocfilehash: 48e1a82b7a88bf4535acea49ea6770cedfdbf304
ms.sourcegitcommit: 1cad78595cca1175b82c04458803764ac36e5e37
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 01/19/2021
ms.locfileid: "98564876"
---
# <a name="enable-service-principal-authentication-for-read-only-admin-apis-preview"></a><span data-ttu-id="ad55f-103">เปิดใช้งานการตรวจสอบโครงร่างสำคัญของบริการสำหรับ API ของผู้ดูแลระบบแบบอ่านอย่างเดียว (แสดงตัวอย่าง)</span><span class="sxs-lookup"><span data-stu-id="ad55f-103">Enable service principal authentication for read-only admin APIs (preview)</span></span>

<span data-ttu-id="ad55f-104">หลักการบริการคือวิธีการรับรองความถูกต้องที่สามารถใช้เพื่ออนุญาตให้มีการเข้าถึงแอปพลิเคชัน Azure Active Directory (Azure AD) เนื้อหาแบริการของ Power BI และ Api ได้</span><span class="sxs-lookup"><span data-stu-id="ad55f-104">Service principal is an authentication method that can be used to let an Azure Active Directory (Azure AD) application access Power BI service content and APIs.</span></span>
<span data-ttu-id="ad55f-105">เมื่อคุณสร้างแอป Azure AD  [วัตถุหลักการบริการ](/azure/active-directory/develop/app-objects-and-service-principals#service-principal-object) จะถูกสร้างขึ้น</span><span class="sxs-lookup"><span data-stu-id="ad55f-105">When you create an Azure AD app, a [service principal object](/azure/active-directory/develop/app-objects-and-service-principals#service-principal-object) is created.</span></span> <span data-ttu-id="ad55f-106">หลักการบริการ ซึ่งเป็นที่รู้จักกันว่าหลักการบริการ จะช่วยให้ Azure AD รับรองความถูกต้องของแอปของคุณ</span><span class="sxs-lookup"><span data-stu-id="ad55f-106">The service principal object, also known simply as the service principal, allows Azure AD to authenticate your app.</span></span> <span data-ttu-id="ad55f-107">เมื่อรับรองความถูกต้องแล้ว แอปจะสามารถเข้าถึงแหล่งข้อมูลผู้เช่า Azure AD</span><span class="sxs-lookup"><span data-stu-id="ad55f-107">Once authenticated, the app can access Azure AD tenant resources.</span></span>

## <a name="method"></a><span data-ttu-id="ad55f-108">วิธีการ</span><span class="sxs-lookup"><span data-stu-id="ad55f-108">Method</span></span>

<span data-ttu-id="ad55f-109">เมื่อต้องการเปิดใช้การตรวจสอบหลักการบริการสำหรับ Api แบบอ่านอย่างเดียวของ Power BI ให้ทำตามขั้นตอนเหล่านี้:</span><span class="sxs-lookup"><span data-stu-id="ad55f-109">To enable service principal authentication for Power BI read-only APIs, follow these steps:</span></span>

1. <span data-ttu-id="ad55f-110">[สร้างแอป Azure AD](/azure/active-directory/develop/howto-create-service-principal-portal)</span><span class="sxs-lookup"><span data-stu-id="ad55f-110">[Create an Azure AD app](/azure/active-directory/develop/howto-create-service-principal-portal).</span></span> <span data-ttu-id="ad55f-111">คุณสามารถข้ามขั้นตอนนี้ได้ถ้าคุณมีแอป Azure AD ที่คุณต้องการใช้อยู่แล้ว</span><span class="sxs-lookup"><span data-stu-id="ad55f-111">You can skip this step if you already have an Azure AD app you want to use.</span></span> <span data-ttu-id="ad55f-112">จด App-Id สำหรับขั้นตอนต่อไป</span><span class="sxs-lookup"><span data-stu-id="ad55f-112">Take note of the App-Id for later steps.</span></span> 
2. <span data-ttu-id="ad55f-113">สร้าง **กลุ่มความปลอดภัย** ใหม่ใน Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="ad55f-113">Create a new **Security Group** in Azure Active Directory.</span></span> <span data-ttu-id="ad55f-114">[อ่านเพิ่มเติมเกี่ยวกับวิธีการสร้างกลุ่มพื้นฐานและเพิ่มสมาชิกโดยใช้ Azure Active Directory](/azure/active-directory/fundamentals/active-directory-groups-create-azure-portal)</span><span class="sxs-lookup"><span data-stu-id="ad55f-114">[Read more about how to create a basic group and add members using Azure Active Directory](/azure/active-directory/fundamentals/active-directory-groups-create-azure-portal).</span></span> <span data-ttu-id="ad55f-115">คุณสามารถข้ามขั้นตอนนี้ได้ถ้าคุณมีกลุ่มความปลอดภัยที่คุณต้องการใช้งานอยู่แล้ว</span><span class="sxs-lookup"><span data-stu-id="ad55f-115">You can skip this step if you already have a security group you would like to use.</span></span>
    <span data-ttu-id="ad55f-116">ตรวจสอบให้แน่ใจว่าได้เลือก **ความปลอดภัย** เป็นประเภทกลุ่ม</span><span class="sxs-lookup"><span data-stu-id="ad55f-116">Make sure to select **Security** as the Group type.</span></span>

    ![สกรีนช็อตกล่องโต้ตอบการสร้างกลุ่มใหม่ในพอร์ทัล Azure](media/read-only-apis-service-principal-auth/azure-portal-new-group-dialog.png)

3. <span data-ttu-id="ad55f-118">เพิ่มApp-Id ของคุณเป็นสมาชิกของกลุ่มความปลอดภัยที่คุณสร้างขึ้น</span><span class="sxs-lookup"><span data-stu-id="ad55f-118">Add your App-Id as a member of the security group you created.</span></span> <span data-ttu-id="ad55f-119">โดยดำเนินการดังนี้:</span><span class="sxs-lookup"><span data-stu-id="ad55f-119">To do so:</span></span>
    1. <span data-ttu-id="ad55f-120">นำทางไปยัง **พอร์ทัล Azure > Azure Active Directory >  กลุ่ม** และเลือกกลุ่มความปลอดภัยที่คุณสร้างในขั้นตอนที่ 2</span><span class="sxs-lookup"><span data-stu-id="ad55f-120">Navigate to **Azure portal > Azure Active Directory > Groups**, and choose the security group you created in Step 2.</span></span>
    1. <span data-ttu-id="ad55f-121">เลือก **เพิ่มสมาชิก**</span><span class="sxs-lookup"><span data-stu-id="ad55f-121">Select **Add Members**.</span></span>
    <span data-ttu-id="ad55f-122">หมายเหตุ: ตรวจสอบให้แน่ใจว่าแอปที่คุณใช้ไม่มีบทบาทผู้ดูแลระบบ Power BI ใดๆ ที่ตั้งค่าไว้ในพอร์ทัล Azure</span><span class="sxs-lookup"><span data-stu-id="ad55f-122">Note: Make sure the app you use does not have any Power BI admin roles set on it in Azure portal.</span></span> <span data-ttu-id="ad55f-123">เมื่อต้องการตรวจสอบ ให้ทำดังนี้:</span><span class="sxs-lookup"><span data-stu-id="ad55f-123">To check this:</span></span> 
       * <span data-ttu-id="ad55f-124">ลงชื่อเข้าใช้ **พอร์ทัล Azure** เป็นผู้ดูแลระบบส่วนกลาง ผู้ดูแลระบบแอปพลิเคชัน หรือผู้ดูแลระบบแอปพลิเคชันระบบคลาวด์</span><span class="sxs-lookup"><span data-stu-id="ad55f-124">Sign into the **Azure portal** as a Global Administrator, an Application Administrator, or a Cloud Application Administrator.</span></span> 
        * <span data-ttu-id="ad55f-125">เลือก **Azure Active Directory** จากนั้น **แอปพลิเคชันขององค์กร**</span><span class="sxs-lookup"><span data-stu-id="ad55f-125">Select **Azure Active Directory**, then **Enterprise applications**.</span></span> 
        * <span data-ttu-id="ad55f-126">เลือกแอปพลิเคชันที่คุณต้องการอนุญาตให้เข้าถึง Power BI</span><span class="sxs-lookup"><span data-stu-id="ad55f-126">Select the application you want to grant access to Power BI.</span></span> 
        * <span data-ttu-id="ad55f-127">เลือก **การอนุญาต**</span><span class="sxs-lookup"><span data-stu-id="ad55f-127">Select **Permissions**.</span></span> <span data-ttu-id="ad55f-128">ตรวจสอบให้แน่ใจว่าไม่มีการอนุญาตที่จำเป็นสำหรับผู้ดูแลระบบ Power BI ที่ตั้งค่าไว้ในแอปพลิเคชันนี้</span><span class="sxs-lookup"><span data-stu-id="ad55f-128">Make sure there are no Power BI admin-consent-required permissions set on this application.</span></span> <span data-ttu-id="ad55f-129">ดู[การจัดการความยินยอมให้กับแอปพลิเคชันและประเมินคำขอการยินยอม](/azure/active-directory/manage-apps/manage-consent-requests)สำหรับข้อมูลเพิ่มเติม</span><span class="sxs-lookup"><span data-stu-id="ad55f-129">See [Managing consent to applications and evaluating consent requests](/azure/active-directory/manage-apps/manage-consent-requests) for more information.</span></span> 
4. <span data-ttu-id="ad55f-130">เปิดใช้งานการตั้งค่าการจัดการบริการของ Power BI</span><span class="sxs-lookup"><span data-stu-id="ad55f-130">Enable the Power BI service admin settings.</span></span> <span data-ttu-id="ad55f-131">ในการทำขั้นตอนนี้:</span><span class="sxs-lookup"><span data-stu-id="ad55f-131">To do this:</span></span>
    1. <span data-ttu-id="ad55f-132">เข้าสู่ระบบพอร์ทัลผู้ดูแลระบบของ Power BI</span><span class="sxs-lookup"><span data-stu-id="ad55f-132">Log into the Power BI admin portal.</span></span> <span data-ttu-id="ad55f-133">คุณจำเป็นต้องเป็นผู้ดูแลระบบ Power BI เพื่อดูหน้าการตั้งค่าผู้เช่า</span><span class="sxs-lookup"><span data-stu-id="ad55f-133">You need to be a Power BI admin to see the tenant settings page.</span></span>
    1. <span data-ttu-id="ad55f-134">ที่ด้านล่าง **การตั้งค่า API ผู้ดูแลระบบ** คุณจะเห็น **อนุญาตให้บริการหลักใช้ API ผู้ดูแลระบบ Power BI แบบอ่านได้เท่านั้น (ตัวอย่าง)**</span><span class="sxs-lookup"><span data-stu-id="ad55f-134">Under **Admin API settings**, you will see **Allow service principals to use read-only Power BI admin APIs (Preview)**.</span></span> <span data-ttu-id="ad55f-135">ตั้งค่าการสลับเป็นเปิดใช้งานจากนั้นเลือกปุ่มตัวเลือก **กลุ่มความปลอดภัยเฉพาะ** และเพิ่มกลุ่มความปลอดภัยที่คุณสร้างไว้ในขั้นตอนที่ 2 ในช่องข้อความที่ปรากฏด้านล่างดังแสดงในรูปด้านล่าง</span><span class="sxs-lookup"><span data-stu-id="ad55f-135">Set the toggle to Enabled, and then select the **Specific security groups** radio button and add the security group you created in Step 2 in the text field that appears below it, as shown in the figure below.</span></span>

        ![สกรีนช็อตการตั้งค่าผู้เช่าที่อนุญาตให้ใช้หลักการบริการ](media/read-only-apis-service-principal-auth/allow-service-principals-tenant-setting.png)

 5. <span data-ttu-id="ad55f-137">เริ่มต้นใช้งาน API ผู้ดูแลแบบอ่านอย่างเดียว</span><span class="sxs-lookup"><span data-stu-id="ad55f-137">Start using the read-only admin APIs.</span></span> <span data-ttu-id="ad55f-138">ดูรายการของ API ที่รองรับด้านล่าง</span><span class="sxs-lookup"><span data-stu-id="ad55f-138">See the list of supported APIs below.</span></span>

    >[!IMPORTANT]
    ><span data-ttu-id="ad55f-139">เมื่อคุณเปิดใช้งานหลักการบริการเพื่อใช้กับ Power BI แล้ว สิทธิ์ Azure AD ของแอปพลิเคชันจะไม่มีผลอีกต่อไป</span><span class="sxs-lookup"><span data-stu-id="ad55f-139">Once you enable the service principal to be used with Power BI, the application's Azure AD permissions no longer have any effect.</span></span> <span data-ttu-id="ad55f-140">มีจัดการสิทธิ์ของแอปพลิเคชันแล้วผ่านทางพอร์ทัลผู้ดูแลระบบ Power BI</span><span class="sxs-lookup"><span data-stu-id="ad55f-140">The application's permissions are then managed through the Power BI admin portal.</span></span>

## <a name="considerations-and-limitations"></a><span data-ttu-id="ad55f-141">ข้อควรพิจารณาและข้อจำกัด</span><span class="sxs-lookup"><span data-stu-id="ad55f-141">Considerations and limitations</span></span>
* <span data-ttu-id="ad55f-142">คุณไม่สามารถลงชื่อเข้าใช้พอร์ทัล Power BI ด้วยบริการหลัก</span><span class="sxs-lookup"><span data-stu-id="ad55f-142">You can't sign into the Power BI portal using service principal.</span></span>
* <span data-ttu-id="ad55f-143">คุณจำเป็นต้องมีสิทธิ์ของผู้ดูแลระบบ Power BI เพื่อเปิดใช้งานบริการหลักในการตั้งค่า API ผู้ดูแลระบบภายในพอร์ทัลผู้ดูแลระบบของ Power BI</span><span class="sxs-lookup"><span data-stu-id="ad55f-143">Power BI admin rights are required to enable service principal in the Admin API settings in the Power BI admin portal.</span></span>
* <span data-ttu-id="ad55f-144">หลักการบริการในขณะนี้สนับสนุน API ต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="ad55f-144">Service principal currently supports the following APIs:</span></span>
    * <span data-ttu-id="ad55f-145">[GetGroupsAsAdmin](/rest/api/power-bi/admin/groups_getgroupsasadmin) ที่มี $expand สำหรับแดชบอร์ด ชุดข้อมูล รายงาน และกระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="ad55f-145">[GetGroupsAsAdmin](/rest/api/power-bi/admin/groups_getgroupsasadmin) with $expand for dashboards, datasets, reports, and dataflows</span></span> 
    * <span data-ttu-id="ad55f-146">[GetDashboardsAsAdmin](/rest/api/power-bi/admin/dashboards_getdashboardsasadmin) ที่มีไทล์ $expand</span><span class="sxs-lookup"><span data-stu-id="ad55f-146">[GetDashboardsAsAdmin](/rest/api/power-bi/admin/dashboards_getdashboardsasadmin) with $expand tiles</span></span>
    * [<span data-ttu-id="ad55f-147">GetDatasourcesAsAdmin</span><span class="sxs-lookup"><span data-stu-id="ad55f-147">GetDatasourcesAsAdmin</span></span>](/rest/api/power-bi/admin/datasets_getdatasourcesasadmin) 
    * [<span data-ttu-id="ad55f-148">GetDatasetToDataflowsLinksAsAdmin</span><span class="sxs-lookup"><span data-stu-id="ad55f-148">GetDatasetToDataflowsLinksAsAdmin</span></span>](/rest/api/power-bi/admin/datasets_getdatasettodataflowslinksingroupasadmin)
    * [<span data-ttu-id="ad55f-149">GetDatasourcesAsAdmin</span><span class="sxs-lookup"><span data-stu-id="ad55f-149">GetDataflowDatasourcesAsAdmin</span></span>](/rest/api/power-bi/admin/dataflows_getdataflowdatasourcesasadmin) 
    * [<span data-ttu-id="ad55f-150">GetDataflowUpstreamDataflowsAsAdmin</span><span class="sxs-lookup"><span data-stu-id="ad55f-150">GetDataflowUpstreamDataflowsAsAdmin</span></span>](/rest/api/power-bi/admin/dataflows_getupstreamdataflowsingroupasadmin) 
    * [<span data-ttu-id="ad55f-151">GetCapacitiesAsAdmin</span><span class="sxs-lookup"><span data-stu-id="ad55f-151">GetCapacitiesAsAdmin</span></span>](/rest/api/power-bi/admin/getcapacitiesasadmin)
    * [<span data-ttu-id="ad55f-152">GetActivityLog</span><span class="sxs-lookup"><span data-stu-id="ad55f-152">GetActivityLog</span></span>](/rest/api/power-bi/admin/getactivityevents)
    * [<span data-ttu-id="ad55f-153">GetModifiedWorkspaces</span><span class="sxs-lookup"><span data-stu-id="ad55f-153">GetModifiedWorkspaces</span></span>](/rest/api/power-bi/admin/workspaceinfo_getmodifiedworkspaces)
    * [<span data-ttu-id="ad55f-154">WorkspaceGetInfo</span><span class="sxs-lookup"><span data-stu-id="ad55f-154">WorkspaceGetInfo</span></span>](/rest/api/power-bi/admin/workspaceinfo_postworkspaceinfo)
    * [<span data-ttu-id="ad55f-155">WorkspaceScanStatus</span><span class="sxs-lookup"><span data-stu-id="ad55f-155">WorkspaceScanStatus</span></span>](/rest/api/power-bi/admin/workspaceinfo_getscanstatus)
    * [<span data-ttu-id="ad55f-156">WorkspaceScanResult</span><span class="sxs-lookup"><span data-stu-id="ad55f-156">WorkspaceScanResult</span></span>](/rest/api/power-bi/admin/workspaceinfo_getscanresult)