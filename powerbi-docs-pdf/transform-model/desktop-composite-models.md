---
title: ใช้แบบจำลองแบบรวมใน Power BI Desktop
description: สร้างโมเดลข้อมูลที่มีการเชื่อมต่อข้อมูลและความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่มมากกว่าหนึ่งแห่งใน Power BI Desktop
author: davidiseminger
ms.author: davidi
ms.reviewer: ''
ms.service: powerbi
ms.subservice: pbi-transform-model
ms.topic: conceptual
ms.date: 12/16/2020
LocalizationGroup: Transform and shape data
ms.openlocfilehash: c29728641560502e19486f47e3ec06e370399640
ms.sourcegitcommit: b472236df99b490db30f0168bd7284ae6e6095fb
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 12/16/2020
ms.locfileid: "97600541"
---
# <a name="use-composite-models-in-power-bi-desktop"></a><span data-ttu-id="e23d3-103">ใช้แบบจำลองแบบรวมใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="e23d3-103">Use composite models in Power BI Desktop</span></span>

<span data-ttu-id="e23d3-104">ก่อนหน้านี้ในเดสก์ทอป Power BI Desktop เมื่อคุณใช้ DirectQuery ในรายงาน ไม่มีการเชื่อมต่อข้อมูลอื่น ไม่ว่าจะ DirectQuery หรือการนำเข้าถูกอนุญาตให้สำหรับรายงานนั้น</span><span class="sxs-lookup"><span data-stu-id="e23d3-104">Previously in Power BI Desktop, when you used a DirectQuery in a report, no other data connections, whether DirectQuery or import, were allowed for that report.</span></span> <span data-ttu-id="e23d3-105">ด้วยโมเดลแบบรวม ข้อกำจัดจะหายไป</span><span class="sxs-lookup"><span data-stu-id="e23d3-105">With composite models, that restriction is removed.</span></span> <span data-ttu-id="e23d3-106">รายงานสามารถรวมกับการเชื่อมต่อข้อมูลอย่างแนบเนียนจากมากว่าหนึ่ง DirectQuery หรือการเชื่อมต่อการนำเข้าข้อมูลในทุกการผสมที่คุณเลือก</span><span class="sxs-lookup"><span data-stu-id="e23d3-106">A report can seamlessly include data connections from more than one DirectQuery or import data connection, in any combination you choose.</span></span>

<span data-ttu-id="e23d3-107">ความสามารถโมเดลแบบรวมใน Power BI Desktop ประกอบด้วยคุณลักษณะสามอย่างที่เกี่ยวข้องกัน:</span><span class="sxs-lookup"><span data-stu-id="e23d3-107">The composite models capability in Power BI Desktop consists of three related features:</span></span>

* <span data-ttu-id="e23d3-108">**โมเดลแบบรวม**: อนุญาตรายงานให้มีการเชื่อมต่อข้อมูลที่หลากหลาย รวมทั้งการเชื่อมต่อ DirectQuery หรือการนำเข้าในทุกการผสม</span><span class="sxs-lookup"><span data-stu-id="e23d3-108">**Composite models**: Allows a report to have multiple data connections, including DirectQuery connections or import, in any combination.</span></span> <span data-ttu-id="e23d3-109">บทความนี้จะอธิบายโมเดลแบบรวมโดยละเอียด</span><span class="sxs-lookup"><span data-stu-id="e23d3-109">This article describes composite models in detail.</span></span>

* <span data-ttu-id="e23d3-110">**ความสัมพันธ์แบบกลุ่มต่อกลุ่ม**: ด้วยโมเดลแบบรวม คุณสามารถตั้ง *ความสัมพันธ์ มาก-ไป-มาก* ระหว่างตาราง</span><span class="sxs-lookup"><span data-stu-id="e23d3-110">**Many-to-many relationships**: With composite models, you can establish *many-to-many relationships* between tables.</span></span> <span data-ttu-id="e23d3-111">วิธีการนี้จะลบขอคำสำหรับค่าเฉพาะในตาราง</span><span class="sxs-lookup"><span data-stu-id="e23d3-111">This approach removes requirements for unique values in tables.</span></span> <span data-ttu-id="e23d3-112">นอกจากนี้ยังลบการแก้ปัญหาชั่วคราวก่อนหน้า เช่น การเริ่มตารางใหม่เพื่อสร้างความสัมพันธ์เท่านั้น</span><span class="sxs-lookup"><span data-stu-id="e23d3-112">It also removes previous workarounds, such as introducing new tables only to establish relationships.</span></span> <span data-ttu-id="e23d3-113">สำหรับข้อมูลเพิ่มเติม ดู [ใช้ความสัมพันธ์ มาก-มาก ใน Power BI Desktop](desktop-many-to-many-relationships.md)</span><span class="sxs-lookup"><span data-stu-id="e23d3-113">For more information, see [Apply many-many relationships in Power BI Desktop](desktop-many-to-many-relationships.md).</span></span>

* <span data-ttu-id="e23d3-114">**โหมดการจัดเก็บข้อมูล**: คุณสามารถระบุเฉพาะว่าวิชวลไหนสอบถามแหล่งข้อมูลส่วนหลัง</span><span class="sxs-lookup"><span data-stu-id="e23d3-114">**Storage mode**: You can now specify which visuals query back-end data sources.</span></span> <span data-ttu-id="e23d3-115">วิชวลที่ไม่ต้องใช้คิวรีจะถูกนำเข้าแม้ว่าจะมาจาก DirectQuery</span><span class="sxs-lookup"><span data-stu-id="e23d3-115">Visuals that don't require a query are imported even if they're based on DirectQuery.</span></span> <span data-ttu-id="e23d3-116">คุณลักษณะนี้จะช่วยปรับปรุงประสิทธิภาพ และลดการโหลดระบบ Back-end</span><span class="sxs-lookup"><span data-stu-id="e23d3-116">This feature helps improve performance and reduce back-end load.</span></span> <span data-ttu-id="e23d3-117">ก่อนหน้านี้ทุกวิชวลเบื้องต้น เช่น ที่หั่น การสอบถามเริ่มต้นไปยังแหล่งข้อมูลส่วนหลัง</span><span class="sxs-lookup"><span data-stu-id="e23d3-117">Previously, even simple visuals, such as slicers, initiated queries to back-end sources.</span></span> <span data-ttu-id="e23d3-118">สำหรับข้อมูล ดู [จัดการโหมดที่เก็บข้อมูลในเดสก์ทอป Power BI](desktop-storage-mode.md).</span><span class="sxs-lookup"><span data-stu-id="e23d3-118">For more information, see [Manage storage mode in Power BI Desktop](desktop-storage-mode.md).</span></span>

## <a name="use-composite-models"></a><span data-ttu-id="e23d3-119">ใช้โมเดลแบบรวม</span><span class="sxs-lookup"><span data-stu-id="e23d3-119">Use composite models</span></span>

<span data-ttu-id="e23d3-120">ด้วยโมเดลแบบรวม คุณสามารถเชื่อมต่อแหล่งข้อมูลประเภทที่แตกต่างกันเมื่อคุณใช้เดสก์ทอป Power BI หรือการบริการ Power BI</span><span class="sxs-lookup"><span data-stu-id="e23d3-120">With composite models, you can connect to different kinds of data sources when you use Power BI Desktop or the Power BI service.</span></span> <span data-ttu-id="e23d3-121">คุณสามารถสร้างการเชื่อมต่อข้อมูลเหล่านี้ได้สองวิธี:</span><span class="sxs-lookup"><span data-stu-id="e23d3-121">You can make those data connections in a couple of ways:</span></span>

* <span data-ttu-id="e23d3-122">โดยการนำเข้าข้อมูลไปยัง Power BI ซึ่งเป็นวิธีทั่วไปในการรับข้อมูล</span><span class="sxs-lookup"><span data-stu-id="e23d3-122">By importing data to Power BI, which is the most common way to get data.</span></span>
* <span data-ttu-id="e23d3-123">โดยการเชื่อมต่อโดยตรงไปยังข้อมูลในคลังแหล่งข้อมูลเดิมโดยการใช้ DirectQuery</span><span class="sxs-lookup"><span data-stu-id="e23d3-123">By connecting directly to data in its original source repository by using DirectQuery.</span></span> <span data-ttu-id="e23d3-124">หากต้องการเรียนรู้เพิ่มเติมเกี่ยวกับ DirectQuery โปรดดู [ใช้ DirectQuery ใน Power BI](../connect-data/desktop-directquery-about.md)</span><span class="sxs-lookup"><span data-stu-id="e23d3-124">To learn more about DirectQuery, see [Use DirectQuery in Power BI](../connect-data/desktop-directquery-about.md).</span></span>

<span data-ttu-id="e23d3-125">เมื่อคุณใช้ DirectQuery โมเดลแบบรวมทำให้เป็นไปได้ที่จะสร้างโมเดล Power BI เช่น ไฟล์เดี่ยว *.pbix* ของ Power BI Desktop ที่ทั้งหนึ่งหรือสองอย่างของการดำเนินการต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e23d3-125">When you use DirectQuery, composite models make it possible to create a Power BI model, such as a single *.pbix* Power BI Desktop file, that does either or both of the following actions:</span></span>

* <span data-ttu-id="e23d3-126">รวมข้อมูลจากแหล่งที่มา DirectQuery หนึ่งแห่งขึ้นไป</span><span class="sxs-lookup"><span data-stu-id="e23d3-126">Combines data from one or more DirectQuery sources.</span></span>
* <span data-ttu-id="e23d3-127">การวมกันของข้อมูลจากแหล่ง DirectQuery และการนำเข้าข้อมูล</span><span class="sxs-lookup"><span data-stu-id="e23d3-127">Combines data from DirectQuery sources and import data.</span></span>

<span data-ttu-id="e23d3-128">ตัวอย่างเช่น โดยการใช้โมเดลแบบรวม คุณสามารถสร้างโมเดลที่รวมประเภทของข้อมูลดังต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e23d3-128">For example, by using composite models, you can build a model that combines the following types of data:</span></span>

* <span data-ttu-id="e23d3-129">ข้อมูลการขายจากคลังข้อมูลวิสาหกิจ</span><span class="sxs-lookup"><span data-stu-id="e23d3-129">Sales data from an enterprise data warehouse.</span></span>
* <span data-ttu-id="e23d3-130">ข้อมูลเป้าหมายการขายจากฐานข้อมูลแผนก SQL Server</span><span class="sxs-lookup"><span data-stu-id="e23d3-130">Sales-target data from a departmental SQL Server database.</span></span>
* <span data-ttu-id="e23d3-131">ข้อมูลที่นำเข้าจากสเปรดชีต</span><span class="sxs-lookup"><span data-stu-id="e23d3-131">Data that's imported from a spreadsheet.</span></span>

<span data-ttu-id="e23d3-132">โมเดลที่รวมข้อมูลจากแหล่งข้อมูล DirectQuery ที่มากกว่าหนึ่งหรือรวม DirectQuery กับการนำเข้าข้อมูลที่เรียกใช้โมเดลแบบรวม</span><span class="sxs-lookup"><span data-stu-id="e23d3-132">A model that combines data from more than one DirectQuery source or that combines DirectQuery with import data is called a composite model.</span></span>

<span data-ttu-id="e23d3-133">คุณสามารถสร้างความสัมพันธ์ระหว่างตารางได้ในขณะที่คุณมีอยู่เสมอแม้ว่าตารางเหล่านั้นมาจากแหล่งข้อมูลที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="e23d3-133">You can create relationships between tables as you always have, even when those tables come from different sources.</span></span> <span data-ttu-id="e23d3-134">ทุกความสัมพันธ์ที่ผสมข้ามแหล่งได้ถูกสร้างด้วยจำนวนของมาก-ไป-มาก ไม่ว่าจะเป็นจำนวนที่แท้จริงก็ตาม</span><span class="sxs-lookup"><span data-stu-id="e23d3-134">Any relationships that are cross-source are created with a cardinality of many-to-many, regardless of their actual cardinality.</span></span> <span data-ttu-id="e23d3-135">คุณสามารถเปลี่ยนเป็นแบบหนึ่งต่อกลุ่ม, กลุ่มต่อหนึ่ง หรือหนึ่งต่อหนึ่งได้</span><span class="sxs-lookup"><span data-stu-id="e23d3-135">You can change them to one-to-many, many-to-one, or one-to-one.</span></span> <span data-ttu-id="e23d3-136">ไม่ว่าจำนวนไหนก็ตามที่คุณตั้งค่าวามสัมพันธ์ที่ผสมข้ามแหล่งมี	พฤติกรรมที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="e23d3-136">Whichever cardinality you set, cross-source relationships have different behavior.</span></span> <span data-ttu-id="e23d3-137">คุณไม่สามารถใช้ฟังก์ชัน Data Analysis Expressions (DAX) กับการเรียกคืนค่า `one`จากด้านสู่อีกด้าน `many`</span><span class="sxs-lookup"><span data-stu-id="e23d3-137">You can't use Data Analysis Expressions (DAX) functions to retrieve values on the `one` side from the `many` side.</span></span> <span data-ttu-id="e23d3-138">นอกจากนี้ คุณอาจเห็นผลกระทบต่อประสิทธิภาพการทำงานเทียบกับความสัมพันธ์แบบกลุ่มต่อกลุ่มภายในแหล่งข้อมูลเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="e23d3-138">You may also see a performance impact versus many-to-many relationships within the same source.</span></span>

> [!NOTE]
> <span data-ttu-id="e23d3-139">ด้วยบริบทของโมเดลแบบรวม ตารางที่นำเข้าทั้งหมดเป็นแหล่งเดียวที่ใช้ได้ผลไม่ว่าจะเป็นแหล่งข้อมูลเบื้องต้นที่แท้จริง</span><span class="sxs-lookup"><span data-stu-id="e23d3-139">Within the context of composite models, all imported tables are effectively a single source, regardless of the actual underlying data sources.</span></span>

## <a name="example-of-a-composite-model"></a><span data-ttu-id="e23d3-140">ตัวอย่างของโมเดลแบบรวม</span><span class="sxs-lookup"><span data-stu-id="e23d3-140">Example of a composite model</span></span>

<span data-ttu-id="e23d3-141">สำหรับตัวอย่างของโมเดลแบบรวม พิจารณาจากรายงานที่ได้เชื่อมต่อไปยังแหล่งเก็บข้อมูลที่ใช้ร่วมกันในSQL Server โดยการใช้ DirectQuery</span><span class="sxs-lookup"><span data-stu-id="e23d3-141">For an example of a composite model, consider a report that has connected to a corporate data warehouse in SQL Server by using DirectQuery.</span></span> <span data-ttu-id="e23d3-142">ในตัวอย่างนี้ คลังข้อมูลบรรจุข้อมูล **การขายตามประเทศ**, **ไตรมาส** และ **จักรยาน (ผลิตภัณฑ์)** ดังแสดงในภาพต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e23d3-142">In this instance, the data warehouse contains **Sales by Country**, **Quarter**, and **Bike (Product)** data, as shown in the following image:</span></span>

![มุมมองความสัมพันธ์สำหรับโมเดลแบบรวม](media/desktop-composite-models/composite-models_04.png)

<span data-ttu-id="e23d3-144">ณ จุดนี้คุณสามารถสร้างภาพง่ายๆ โดยการใช้เขตข้อมูลจากแหล่งที่มานี้</span><span class="sxs-lookup"><span data-stu-id="e23d3-144">At this point, you could build simple visuals by using fields from this source.</span></span> <span data-ttu-id="e23d3-145">รูปภาพดังต่อไปนี้แสดงการขายทั้งหมดโดย *ชื่อผลิตภัณฑ์* สำหรับไตรมาสที่เลือก</span><span class="sxs-lookup"><span data-stu-id="e23d3-145">The following image shows total sales by *ProductName*, for a selected quarter.</span></span>

![วิชวลที่อิงจากข้อมูล](media/desktop-composite-models/composite-models_05.png)

<span data-ttu-id="e23d3-147">แต่หากคุณมีข้อมูลในสเปรดชีตของ Office Excel เกี่ยวกับผู้จัดการผลิตภัณฑ์ที่กำหนดแต่ละผลิตภัณฑ์พร้อมกับลำดับความสำคัญทางการตลาดล่ะ?</span><span class="sxs-lookup"><span data-stu-id="e23d3-147">But what if you have data in an Office Excel spreadsheet about the product manager who's assigned to each product, along with the marketing priority?</span></span> <span data-ttu-id="e23d3-148">หากคุณต้องการดู **จำนวนการขาย** โดย **ผู้จัดการผลิตภัณฑ์** อาจไม่มีความเป็นไปได้ที่จะเพิ่มข้อมูท้องถิ่นนี้ไปยังคลังข้อมูลบริษัท</span><span class="sxs-lookup"><span data-stu-id="e23d3-148">If you want to view **Sales Amount** by **Product Manager**, it might not be possible to add this local data to the corporate data warehouse.</span></span> <span data-ttu-id="e23d3-149">หรืออาจใช้เวลาอย่างน้อยเป็นเดือน</span><span class="sxs-lookup"><span data-stu-id="e23d3-149">Or it might take months at best.</span></span>

<span data-ttu-id="e23d3-150">อาจไม่มีความเป็นไปได้ในการนำเข้าข้อมูลการขายจากคลังข้อมูลแทนการใช้ DirectQuery</span><span class="sxs-lookup"><span data-stu-id="e23d3-150">It might be possible to import that sales data from the data warehouse, instead of using DirectQuery.</span></span> <span data-ttu-id="e23d3-151">และข้อมูลการขายอาจถูกรวมกับข้อมูลที่คุณนำเข้าจากสเปรดชีต</span><span class="sxs-lookup"><span data-stu-id="e23d3-151">And the sales data could then be combined with the data that you imported from the spreadsheet.</span></span> <span data-ttu-id="e23d3-152">อย่างไรก็ตาม วิธีการนี้ไม่สมเหตุสมผลสำหรับสาเหตุที่นำไปสู่การใช้ DirectQuery ตั้งแต่แรก</span><span class="sxs-lookup"><span data-stu-id="e23d3-152">However, that approach is unreasonable, for the reasons that lead to using DirectQuery in the first place.</span></span> <span data-ttu-id="e23d3-153">สาเหตุอาจรวมถึง:</span><span class="sxs-lookup"><span data-stu-id="e23d3-153">The reasons could include:</span></span>

* <span data-ttu-id="e23d3-154">บางการรวมของกฎความปลอดภัยบังคับใช้ในแหล่งข้อมูลเบื้องต้น</span><span class="sxs-lookup"><span data-stu-id="e23d3-154">Some combination of the security rules enforced in the underlying source.</span></span>
* <span data-ttu-id="e23d3-155">ความจำเป็นเพื่อที่จะสามารถดูข้อมูลล่าสุด</span><span class="sxs-lookup"><span data-stu-id="e23d3-155">The need to be able to view the latest data.</span></span>
* <span data-ttu-id="e23d3-156">ขนาดจำนวนมากของข้อมูล</span><span class="sxs-lookup"><span data-stu-id="e23d3-156">The sheer scale of the data.</span></span>

<span data-ttu-id="e23d3-157">และนี่คือจุดที่ โมเดลแบบรวม เข้ามาช่วย</span><span class="sxs-lookup"><span data-stu-id="e23d3-157">Here's where composite models come in.</span></span> <span data-ttu-id="e23d3-158">โมเดลแบบรวมส่วนให้คุณเชื่อมต่อแหล่งเก็บข้อมูลโดยการใช้ DirectQuery และต่อมาใช้ **รับข้อมูล** สำหรับแหล่งข้อมูลเพิ่มเติม</span><span class="sxs-lookup"><span data-stu-id="e23d3-158">Composite models let you connect to the data warehouse by using DirectQuery and then use **Get data** for additional sources.</span></span> <span data-ttu-id="e23d3-159">ในตัวอย่างนี้ เราจะสร้างการเชื่อต่อ DirectQuery ไปยังคลังข้อมูลบริษัทเป็นอันดับแรก</span><span class="sxs-lookup"><span data-stu-id="e23d3-159">In this example, we first establish the DirectQuery connection to the corporate data warehouse.</span></span> <span data-ttu-id="e23d3-160">เราใช้ **รับข้อมูล** เลือก **Excel** และต่อมานำทางไปยังสเปรดชีตที่ประกอบด้วยข้อมูลท้องถื่นของเรา</span><span class="sxs-lookup"><span data-stu-id="e23d3-160">We use **Get data**, choose **Excel**, and then navigate to the spreadsheet that contains our local data.</span></span> <span data-ttu-id="e23d3-161">สุดท้ายนำเข้าสเปรดชีตที่มี *ชื่อผลิตภัณฑ์*, **ผู้จัดการการขาย** ที่กำหนด และ **ลำดับความสำคัญ**</span><span class="sxs-lookup"><span data-stu-id="e23d3-161">Finally, we import the spreadsheet that contains the *Product Names*, the assigned **Sales Manager**, and the **Priority**.</span></span>  

![หน้าต่างตัวนำทาง](media/desktop-composite-models/composite-models_06.png)

<span data-ttu-id="e23d3-163">ในรายการ **เขตข้อมูล** คุณจะเห็นสองตาราง: ตาราง **จักรยาน** เดิมจาก SQL Server และตาราง **ProductManagers**</span><span class="sxs-lookup"><span data-stu-id="e23d3-163">In the **Fields** list, you can see two tables: the original **Bike** table from SQL Server and a new **ProductManagers** table.</span></span> <span data-ttu-id="e23d3-164">ตารางใหม่จะมีข้อมูลที่นำเข้าจาก Excel</span><span class="sxs-lookup"><span data-stu-id="e23d3-164">The new table contains the data that's imported from Excel.</span></span>

![มุมมองเขตข้อมูลของตาราง](media/desktop-composite-models/composite-models_07.png)

<span data-ttu-id="e23d3-166">ในทำนองเดียวกัน ในมุมมอง **ความสัมพันธ์** ใน Power BI Desktop เราจะเห็นตารางเพิ่มเติมที่มีชื่อว่า **ProductManagers**</span><span class="sxs-lookup"><span data-stu-id="e23d3-166">Similarly, in the **Relationship** view in Power BI Desktop, we now see an additional table called **ProductManagers**.</span></span>

![มุมมองความสัมพันธ์ของตาราง](media/desktop-composite-models/composite-models_08.png)

<span data-ttu-id="e23d3-168">เราต้องการเชื่อมตารางเหล่านี้ไปยังตารางอื่นๆ ในโมเดล</span><span class="sxs-lookup"><span data-stu-id="e23d3-168">We now need to relate these tables to the other tables in the model.</span></span> <span data-ttu-id="e23d3-169">เช่นเคย เราสร้างความสัมพันธ์ระหว่างตาราง **จักรยาน** จาก SQL Server และตารางนำเข้า **ProductManagers**</span><span class="sxs-lookup"><span data-stu-id="e23d3-169">As always, we create a relationship between the **Bike** table from SQL Server and the imported **ProductManagers** table.</span></span> <span data-ttu-id="e23d3-170">กล่าวคือ จะเป็นความสัมพันธ์ระหว่าง **จักรยาน[ProductName]** และ **ProductManagers[ProductName]**</span><span class="sxs-lookup"><span data-stu-id="e23d3-170">That is, the relationship is between **Bike[ProductName]** and **ProductManagers[ProductName]**.</span></span> <span data-ttu-id="e23d3-171">ตามที่กล่าวมาก่อนหน้านี้ ทุกความสัมพันธ์ที่ไปผ่านแหล่งข้อมูลที่ตั้งค่าไว้จากจำนวนมาก-ไป-มาก</span><span class="sxs-lookup"><span data-stu-id="e23d3-171">As discussed earlier, all relationships that go across source default to many-to-many cardinality.</span></span>

![หน้าต่าง "สร้างความสัมพันธ์"](media/desktop-composite-models/composite-models_09.png)

<span data-ttu-id="e23d3-173">หลังจากที่สร้างความสัมพันธ์นี้แล้ว ความสัมพันธ์จะแสดงในมุมมอง **ความสัมพันธ์** ใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="e23d3-173">Now that we've established this relationship, it's displayed in the **Relationship** view in Power BI Desktop, as we would expect.</span></span>

![มุมมองความสัมพันธ์ใหม่](media/desktop-composite-models/composite-models_10.png)

<span data-ttu-id="e23d3-175">เราสามารถสร้างวิชวลโดยการใช้ช่องใดๆ ในรายการ **เขตข้อมูล** ได้แล้ว</span><span class="sxs-lookup"><span data-stu-id="e23d3-175">We can now create visuals by using any of the fields in the **Fields** list.</span></span> <span data-ttu-id="e23d3-176">วิธีการนี้จะผสมข้อมูลจากหลายๆ แหล่งเข้าด้วยกัน</span><span class="sxs-lookup"><span data-stu-id="e23d3-176">This approach seamlessly blends data from multiple sources.</span></span> <span data-ttu-id="e23d3-177">เช่น *SalesAmount* ทั้งหมดสำหรับแต่ละ *ผู้จัดการผลิตภัณฑ์* จะแสดงในภาพต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e23d3-177">For example, the total *SalesAmount* for each *Product Manager* is displayed in the following image:</span></span>

![พื้นที่ช่องข้อมูล](media/desktop-composite-models/composite-models_11.png)

<span data-ttu-id="e23d3-179">การแสดงตัวอย่างกรณีดังต่อไปนี้ของ *ขนาด* ตารางเช่น **ผลิตภัณฑ์** หรือ **ลูกค้า** ที่ขยายด้วยบางข้อมูลที่เข้าพิเศษจากที่อื่น</span><span class="sxs-lookup"><span data-stu-id="e23d3-179">The following example displays a common case of a *dimension* table, such as **Product** or **Customer**, that's extended with some extra data imported from somewhere else.</span></span> <span data-ttu-id="e23d3-180">นอกจากนี้ยังสามารถมีตารางใช้ DirectQuery เพื่อเชื่อมต่อแหล่งข้อมูลหลากหลาย</span><span class="sxs-lookup"><span data-stu-id="e23d3-180">It's also possible to have tables use DirectQuery to connect to various sources.</span></span> <span data-ttu-id="e23d3-181">ในตัวอย่างเดียวกัน สมมติว่า **เป้าหมายการขาย** ต่อ **ประเทศ** และ **ช่วงเวลา** ถูกจัดเก็บไว้ในแผนกฐานข้อมูลที่แยกกัน</span><span class="sxs-lookup"><span data-stu-id="e23d3-181">To continue with our example, imagine that **Sales Targets** per **Country** and **Period** are stored in a separate departmental database.</span></span> <span data-ttu-id="e23d3-182">โดยทั่วไป คุณสามารถใช้ **รับข้อมูล** เพื่อเชื่อมต่อไปยังข้อมูลนั้น ตามที่แสดงในรูปภาพดังต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e23d3-182">As usual, you can use **Get data** to connect to that data, as shown in the following image:</span></span>

![หน้าต่างตัวนำทาง](media/desktop-composite-models/composite-models_12.png)

<span data-ttu-id="e23d3-184">ดังที่ทำก่อนหน้านี้ เราสามารถสร้างความสัมพันธ์ระหว่างตารางใหม่และตารางอื่นๆ ในโมเดล จากนั้นสร้างวิชวลที่รวมข้อมูลตาราง</span><span class="sxs-lookup"><span data-stu-id="e23d3-184">As we did earlier, we can create relationships between the new table and other tables in the model and then create visuals that combine the table data.</span></span> <span data-ttu-id="e23d3-185">มาดูมุมมอง **ความสัมพันธ์** ที่สร้างความสัมพันธ์ใหม่เอาไว้อีกครั้ง:</span><span class="sxs-lookup"><span data-stu-id="e23d3-185">Let's look again at the **Relationships** view, where we've established the new relationships:</span></span>

![มุมมองความสัมพันธ์ที่มีหลายตาราง](media/desktop-composite-models/composite-models_13.png)

<span data-ttu-id="e23d3-187">ภาพถัดไปอิงจากข้อมูลใหม่และความสัมพันธ์ที่ได้สร้างไว้</span><span class="sxs-lookup"><span data-stu-id="e23d3-187">The next image is based on the new data and relationships we created.</span></span> <span data-ttu-id="e23d3-188">วิชวลด้านล่างซ้ายแสดง *จำนวนการขาย* เทียบกับ *เป้าหมาย* และการคำนวณความแปรปรวนแสดงความแตกต่าง</span><span class="sxs-lookup"><span data-stu-id="e23d3-188">The visual at the lower left shows total *Sales Amount* versus *Target*, and the variance calculation shows the difference.</span></span> <span data-ttu-id="e23d3-189">ข้อมูล **จำนวนการขาย** และ **เป้าหมาย** มาจากสองฐานข้อมูลของ SQL Server ที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="e23d3-189">The **Sales Amount** and **Target** data come from two different SQL Server databases.</span></span>

![ภาพแสดงข้อมูลเพิ่มเติม](media/desktop-composite-models/composite-models_14.png)

## <a name="set-the-storage-mode"></a><span data-ttu-id="e23d3-191">ตั้งค่าโหมดที่เก็บข้อมูล</span><span class="sxs-lookup"><span data-stu-id="e23d3-191">Set the storage mode</span></span>

<span data-ttu-id="e23d3-192">แต่ละตารางในโมเดลแบบรวมมีโหมดที่เก็บข้อมูลที่แสดงตารางที่ขึ้นอยู่กับ DirectQuery หรือการนำเข้า</span><span class="sxs-lookup"><span data-stu-id="e23d3-192">Each table in a composite model has a storage mode that indicates whether the table is based on DirectQuery or import.</span></span> <span data-ttu-id="e23d3-193">สามารถดูและแก้ไขโหมดที่เก็บข้อมูลได้ในบานหน้าต่าง **คุณสมบัติ**</span><span class="sxs-lookup"><span data-stu-id="e23d3-193">The storage mode can be viewed and modified in the **Property** pane.</span></span> <span data-ttu-id="e23d3-194">หากต้องการแสดงโหมดที่เก็บข้อมูล ให้คลิกขวาที่ตารางในรายการ **เขตข้อมูล** จากนั้นเลือก **คุณสมบัติ**</span><span class="sxs-lookup"><span data-stu-id="e23d3-194">To display the storage mode, right-click a table in the **Fields** list, and then select **Properties**.</span></span> <span data-ttu-id="e23d3-195">ภาพต่อไปนี้แสดงโหมดที่เก็บข้อมูลสำหรับตาราง **เป้าหมายการขาย**</span><span class="sxs-lookup"><span data-stu-id="e23d3-195">The following image shows the storage mode for the **SalesTargets** table.</span></span>

<span data-ttu-id="e23d3-196">สามารถดูโหมดที่เก็บข้อมูลได้จากคำแนะนำเครื่องมือสำหรับแต่ละตาราง</span><span class="sxs-lookup"><span data-stu-id="e23d3-196">The storage mode can also be viewed on the tooltip for each table.</span></span>

![คำแนะนำเครื่องมือที่แสดงโหมดที่เก็บข้อมูล](media/desktop-composite-models/composite-models_16.png)

<span data-ttu-id="e23d3-198">สำหรับทุกไฟล์ Power BI Desktop (ไฟล์ *.pbix*) ที่ประกอบด้วยบางตารางจาก DirectQuery และบางตารางที่นำเข้า แท่งสถานะแสดงโหมดที่เก็บข้อมูลที่เรียกใช้ **ผสม**</span><span class="sxs-lookup"><span data-stu-id="e23d3-198">For any Power BI Desktop file (a *.pbix* file) that contains some tables from DirectQuery and some import tables, the status bar displays a storage mode called **Mixed**.</span></span> <span data-ttu-id="e23d3-199">คุณสามารถคลิกที่ระยะเวลาในแท่งสถานะและเปลี่ยนตารางทั้งหมดเพื่อนำเข้าได้อย่างง่ายดาย</span><span class="sxs-lookup"><span data-stu-id="e23d3-199">You can click that term in the status bar and easily switch all tables to import.</span></span>

<span data-ttu-id="e23d3-200">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับโหมดที่เก็บข้อมูล ดู [จัดการโหมดที่เก็บข้อมูลใน Power BI Desktop](desktop-storage-mode.md)</span><span class="sxs-lookup"><span data-stu-id="e23d3-200">For more information about storage mode, see [Manage storage mode in Power BI Desktop](desktop-storage-mode.md).</span></span>  

> [!NOTE]
> <span data-ttu-id="e23d3-201">คุณสามารถใช้โหมดที่เก็บข้อมูล *ผสม* ใน Power BI Desktop และในบริการของ Power BI ได้</span><span class="sxs-lookup"><span data-stu-id="e23d3-201">You can use *Mixed* storage mode in Power BI Desktop and in the Power BI service.</span></span>

## <a name="calculated-tables"></a><span data-ttu-id="e23d3-202">ตารางที่ได้รับการคำนวณ</span><span class="sxs-lookup"><span data-stu-id="e23d3-202">Calculated tables</span></span>

<span data-ttu-id="e23d3-203">คุณสามารถเพิ่มตารางคำนวณไปยังโมเดลที่ใช้ DirectQuery ได้</span><span class="sxs-lookup"><span data-stu-id="e23d3-203">You can add calculated tables to a model that uses DirectQuery.</span></span> <span data-ttu-id="e23d3-204">Data Analysis Expressions (DAX) ที่กำหนดตารางคำนวณสามารถอ้างอิงได้ทั้งตารางนำเข้าและตาราง DirectQuery หรือผสมทั้งสองตารางก็ได้</span><span class="sxs-lookup"><span data-stu-id="e23d3-204">The Data Analysis Expressions (DAX) that define the calculated table can reference either imported or DirectQuery tables or a combination of the two.</span></span>

<span data-ttu-id="e23d3-205">ตารางคำนวณจะถูกนำเข้าเสมอ และข้อมูลจะถูกรีเฟรชเมื่อคุณรีเฟรชตาราง</span><span class="sxs-lookup"><span data-stu-id="e23d3-205">Calculated tables are always imported, and their data is refreshed when you refresh the tables.</span></span> <span data-ttu-id="e23d3-206">หากตารางคำนวณอ้างอิงถึงตาราง DirectQuery วิชวลที่อ้างถึงตาราง DirectQuery จะแสดงค่าล่าสุดในแหล่งข้อมูลเบื้องต้นเสมอ</span><span class="sxs-lookup"><span data-stu-id="e23d3-206">If a calculated table refers to a DirectQuery table, visuals that refer to the DirectQuery table always show the latest values in the underlying source.</span></span> <span data-ttu-id="e23d3-207">อีกทางหนึ่งคือ วิชวลที่อ้างอิงถึงตารางคำนวณจะแสดงค่าตามเวลาที่ตารางคำนวณรีเฟรชครั้งสุดท้าย</span><span class="sxs-lookup"><span data-stu-id="e23d3-207">Alternatively, visuals that refer to the calculated table show the values at the time when the calculated table was last refreshed.</span></span>

## <a name="security-implications"></a><span data-ttu-id="e23d3-208">ความหมายโดยนัยของความปลอดภัย</span><span class="sxs-lookup"><span data-stu-id="e23d3-208">Security implications</span></span>

<span data-ttu-id="e23d3-209">โมเดลแบบรวมมีความหมายโดยนัยของความปลอดภัยบางอย่าง</span><span class="sxs-lookup"><span data-stu-id="e23d3-209">Composite models have some security implications.</span></span> <span data-ttu-id="e23d3-210">คิวรีที่ส่งไปที่แหล่งข้อมูลหนึ่งแหล่งสามารถรวมค่าข้อมูลที่ได้รับจากแหล่งอื่นได้</span><span class="sxs-lookup"><span data-stu-id="e23d3-210">A query sent to one data source can include data values that have been retrieved from another source.</span></span> <span data-ttu-id="e23d3-211">ในตัวอย่างก่อนหน้านี้ วิชวลได้แสดง **(จำนวนการขาย)** โดย **การจัดการผลิตภัณฑ์** ส่งคำถาม SQL ไปยังฐานข้อมูลเชิงสัมพันธ์ของการขาย</span><span class="sxs-lookup"><span data-stu-id="e23d3-211">In the earlier example, the visual that shows **(Sales Amount)** by **Product Manager** sends an SQL query to the Sales relational database.</span></span> <span data-ttu-id="e23d3-212">คำถาม SQL นั้นอาจประกอบด้วยชื่อของการจัดการผลิตภัณฑ์และผลิตภัณฑ์ที่เกี่ยวข้องของพวกเขา</span><span class="sxs-lookup"><span data-stu-id="e23d3-212">That SQL query might contain the names of Product Managers and their associated Products.</span></span>

![สคริปต์ที่แสดงความหมายโดยนัยของความปลอดภัย](media/desktop-composite-models/composite-models_17.png)

<span data-ttu-id="e23d3-214">ดังนั้นข้อมูลที่เก็บไว้ในสเปรดชีตจะถูกรวมอยู่ในคิวรีที่ส่งไปยังฐานข้อมูลเชิงสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="e23d3-214">Consequently, information that's stored in the spreadsheet is now included in a query that's sent to the relational database.</span></span> <span data-ttu-id="e23d3-215">หากข้อมูลนี้เป็นความลับ คุณควรพิจารณาความหมายโดยนัยของความปลอดภัย</span><span class="sxs-lookup"><span data-stu-id="e23d3-215">If this information is confidential, you should consider the security implications.</span></span> <span data-ttu-id="e23d3-216">โดยเฉพาะ ให้พิจารณาประเด็นต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e23d3-216">In particular, consider the following points:</span></span>

* <span data-ttu-id="e23d3-217">ผู้ดูแลฐานข้อมูลคนใดก็ตามที่สามารถตรวจสอบร่องรอยหรือบันทึกการตรวจสอบ จะสามารถดูข้อมูลนี้แม้จะไม่มีสิทธิ์การใช้งานข้อมูลของแหล่งเดิม</span><span class="sxs-lookup"><span data-stu-id="e23d3-217">Any administrator of the database who can view traces or audit logs could view this information, even without permissions to the data in its original source.</span></span> <span data-ttu-id="e23d3-218">ในตัวอย่างนี้ ผู้ดูแลจำเป็นต้องได้สิทธิ์ไปยังไฟล์ Excel</span><span class="sxs-lookup"><span data-stu-id="e23d3-218">In this example, the administrator would need permissions to the Excel file.</span></span>

* <span data-ttu-id="e23d3-219">ควรพิจารณาการตั้งค่าการเข้ารหัสลับสำหรับแต่ละแหล่งข้อมูล</span><span class="sxs-lookup"><span data-stu-id="e23d3-219">The encryption settings for each source should be considered.</span></span> <span data-ttu-id="e23d3-220">คุณต้องการที่จะหลีกเลี่ยงข้อมูลที่เรียกกลับคืนมาจากหนึ่งแหล่งโดยการเชื่อมต่อที่เข้ารหัสและต่อมาโดยที่ไม่ตั้งใจ รวมถึงในคำถามด้วย ซึ่งได้ส่งไปยังแหล่งอื่นโดยการเชื่อมต่อที่ไม่เข้ารหัส</span><span class="sxs-lookup"><span data-stu-id="e23d3-220">You want to avoid retrieving information from one source by an encrypted connection and then inadvertently including it in a query that's sent to another source by an unencrypted connection.</span></span>

<span data-ttu-id="e23d3-221">ในการทำตามคำยืนยันที่คุณพิจารณาความเกี่ยวข้องที่มั่นคงใดๆ แล้ว Power BI Desktop แสดงข้อความเตือนเมื่อคุณสร้างโมเดลแบบรวม</span><span class="sxs-lookup"><span data-stu-id="e23d3-221">To allow confirmation that you've considered any security implications, Power BI Desktop displays a warning message when you create a composite model.</span></span>  

<span data-ttu-id="e23d3-222">ด้วยเหตุเดียวกันนี้ ขอให้ระวังการเปิดไฟล์ Power BI Desktop ที่ส่งมาจากแหล่งที่ไม่น่าเชื่อถือ</span><span class="sxs-lookup"><span data-stu-id="e23d3-222">For similar reasons, be careful when you open a Power BI Desktop file that's sent from an untrusted source.</span></span> <span data-ttu-id="e23d3-223">หากไฟล์มีโมเดลแบบรวม ข้อมูลที่มีใครบางคนเรียกดูจากแหล่งหนึ่งโดยการใช้ข้อมูลประจำตัวของผู้ใช้ที่เปิดไฟล์จะถูกส่งไปยังแหล่งข้อมูลอื่นถือเป็นส่วนหนึ่งของคิวรี</span><span class="sxs-lookup"><span data-stu-id="e23d3-223">If the file contains composite models, information that someone retrieves from one source by using the credentials of the user who opens the file would be sent to another data source as part of the query.</span></span> <span data-ttu-id="e23d3-224">ข้อมูลอาจได้ถูกดูจากผู้เขียนที่ประสงค์ร้ายต่อไฟล์ Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="e23d3-224">The information could be viewed by the malicious author of the Power BI Desktop file.</span></span> <span data-ttu-id="e23d3-225">เมื่อคุณเปิดไฟล์ Power BI Desktop ในขั้นต้นที่ประกอบด้วยแหล่งที่หลากหลาย Power BI Desktop จะแสดงคำเตือน</span><span class="sxs-lookup"><span data-stu-id="e23d3-225">When you initially open a Power BI Desktop file that contains multiple sources, Power BI Desktop displays a warning.</span></span> <span data-ttu-id="e23d3-226">การเตือนนี้จะคล้ายกับการเตือนที่แสดงขึ้นเมื่อคุณเปิดไฟล์ที่มีคิวรี SQL ดั้งเดิม</span><span class="sxs-lookup"><span data-stu-id="e23d3-226">The warning is similar to the one that's displayed when you open a file that contains native SQL queries.</span></span>  

## <a name="performance-implications"></a><span data-ttu-id="e23d3-227">ความหมายโดยนัยของประสิทธิภาพ</span><span class="sxs-lookup"><span data-stu-id="e23d3-227">Performance implications</span></span>  

<span data-ttu-id="e23d3-228">เมื่อใช้ DirectQuery ประสิทธิภาพควรจะได้รับการพิจารณาทุกครั้ง หลักๆ เพื่อทำให้แน่ใจว่าแหล่งที่มา Back-end มีทรัพยากรที่เพียงพอในการมอบประสบการณ์ที่ดีสำหรับผู้ใช้</span><span class="sxs-lookup"><span data-stu-id="e23d3-228">When you use DirectQuery, you should always consider performance, primarily to ensure that the back-end source has sufficient resources to provide a good experience for users.</span></span> <span data-ttu-id="e23d3-229">ประสบการณ์ที่ดี หมายถึง วิชวลรีเฟรชในห้าวินาทีหรือน้อยกว่านั้น</span><span class="sxs-lookup"><span data-stu-id="e23d3-229">A good experience means that the visuals refresh in five seconds or less.</span></span> <span data-ttu-id="e23d3-230">สำหรับคำแนะนำปฏิบัติการเพิ่มเติม ดู [เกี่ยวกับการใช้ DirectQuery ใน Power BI](../connect-data/desktop-directquery-about.md)</span><span class="sxs-lookup"><span data-stu-id="e23d3-230">For more performance advice, see [About using DirectQuery in Power BI](../connect-data/desktop-directquery-about.md).</span></span>

<span data-ttu-id="e23d3-231">การใช้โมเดลแบบรวมเพิ่มข้อควรพิจารณาด้านสมรรถภาพเพิ่มเติม</span><span class="sxs-lookup"><span data-stu-id="e23d3-231">Using composite models adds additional performance considerations.</span></span> <span data-ttu-id="e23d3-232">การแสดงผลด้วยภาพเดี่ยวสามารถส่งผลให้เกิดการส่งแบบสอบถามไปยังหลายแหล่งข้อมูลได้ ซึ่งมักจะส่งผ่านผลลัพธ์จากแบบสอบถามหนึ่งไปยังแหล่งที่สอง</span><span class="sxs-lookup"><span data-stu-id="e23d3-232">A single visual can result in sending queries to multiple sources, which often pass the results from one query across to a second source.</span></span> <span data-ttu-id="e23d3-233">สถานการณ์นี้สามารถทำให้เกิดการดำเนินการต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e23d3-233">This situation can result in the following forms of execution:</span></span>

* <span data-ttu-id="e23d3-234">**คำถาม SQL ที่รวมถึงจำนวนมากของค่าที่เป็นจริง**: เช่น วิชวลที่ต้องการ **จำนวนการขาย** ทั้งหมดสำหรับชุด **ผู้จัดการผลิตภัณฑ์** ที่เลือกจะต้องค้นหาว่า **ผลิตภัณฑ์** ใดที่ผู้จัดการผลิตภัณฑ์จัดการ</span><span class="sxs-lookup"><span data-stu-id="e23d3-234">**An SQL query that includes a large number of literal values**: For example, a visual that requests total **Sales Amount** for a set of selected **Product Managers** would first need to find which **Products** were managed by those product managers.</span></span> <span data-ttu-id="e23d3-235">เหตุการณ์นี้จะต้องเกิดก่อนที่วิชวลส่งคำถาม SQL ที่รวม ID ผลิตภัณฑ์ทั้งหมดในข้อความ `WHERE`</span><span class="sxs-lookup"><span data-stu-id="e23d3-235">This sequence must happen before the visual sends an SQL query that includes all of the product IDs in a `WHERE` clause.</span></span>

* <span data-ttu-id="e23d3-236">**คำถาม SQL ที่ถามไปที่ระดับที่ต่ำกว่าของส่วนประกอบ ด้วยข้อมูลภายหลังที่ถูกรวบรวมแบบท้องถิ่น**: ตัวเลขของ **ผลิตภัณฑ์** ที่พอดีกับเกณฑ์ตัวกรอง **การจัดการผลิตภัณฑ์** เติบโตบใหญ่ขึ้น มันสามารถไร้ประสิทธิภาพหรือไม่เหมาะสมที่จะรวมผลิตภัณฑ์ทั้งหมดในข้อความ `WHERE`</span><span class="sxs-lookup"><span data-stu-id="e23d3-236">**An SQL query that queries at a lower level of granularity, with the data later being aggregated locally**: As the number of **Products** that meet the filter criteria on **Product Manager** grows large, it can become inefficient or unfeasible to include all products in a `WHERE` clause.</span></span> <span data-ttu-id="e23d3-237">แทนที่ คุณจะสามารถส่งคำถามแหล่งข้อมูลเชิงสัมพันธ์ไปยังระดับที่ต่ำกว่าของ **ผลิตภัณฑ์** แล้วรวบรวมผลแบบท้องถิ่น</span><span class="sxs-lookup"><span data-stu-id="e23d3-237">Instead, you can query the relational source at the lower level of **Products** and then aggregate the results locally.</span></span> <span data-ttu-id="e23d3-238">หากคาร์ดินาลลิตี้ของ **ผลิตภัณฑ์** เกินขีดจำกัด 1 ล้าน คิวรีจะล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="e23d3-238">If the cardinality of **Products** exceeds a limit of 1 million, the query fails.</span></span>

* <span data-ttu-id="e23d3-239">**คิวรี SQL หลายคิวรี หนึ่งคิวรีต่อกลุ่มตามค่า**: เมื่อการรวบรวมใช้ **การนับที่แยกกัน** และจัดกลุ่มโดยแถวจากแหล่งอื่นและหากแหล่งภายนอกไม่สนับสนุนการส่งที่มีประสิทธิภาพของค่าที่แท้จริงหลายค่าที่อธิบายการจัดกลุ่ม มันจำเป็นที่จะส่งหนึ่งคำถาม SQL ต่อกลุ่มโดยค่านั้น</span><span class="sxs-lookup"><span data-stu-id="e23d3-239">**Multiple SQL queries, one per group by value**: When the aggregation uses **DistinctCount** and is grouped by a column from another source, and if the external source doesn't support efficient passing of many literal values that define the grouping, it's necessary to send one SQL query per group by value.</span></span>

   <span data-ttu-id="e23d3-240">วิชวลร้องขอการนับที่แยกกันของ **ตัวเลขบัญชีลูกค้า** จากตารางเซิร์ฟเวอร์ SQL โดย **การจัดการผลิตภัณฑ์** ที่นำเข้าจากสเปรดชีตที่ต้องการส่งผ่านในรายละเอียดจากตาราง **การจัดการผลิตภัณฑ์** ในคำถามที่ส่งไปยังเซิร์ฟเวอร์ SQL</span><span class="sxs-lookup"><span data-stu-id="e23d3-240">A visual that requests a distinct count of **CustomerAccountNumber** from the SQL Server table by **Product Managers** imported from the spreadsheet would need to pass in the details from the **Product Managers** table in the query that's sent to SQL Server.</span></span> <span data-ttu-id="e23d3-241">นอกเหนือแหล่งอื่น Redshift สำหรับตัวอย่าง การดำเนินนี้ไม่เหมาะสม</span><span class="sxs-lookup"><span data-stu-id="e23d3-241">Over other sources, Redshift, for example, this action is unfeasible.</span></span> <span data-ttu-id="e23d3-242">แทนที่ จะมีหนึ่งคำถาม SQL ที่ส่งไปแต่ละ **การจัดการการขาย** ขึ้นอยู่กับบางขีดจำกัดที่ใช้ได้จริงซึ่งทำให้คำถามล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="e23d3-242">Instead, there would be one SQL query sent per **Sales Manager**, up to some practical limit, at which point the query would fail.</span></span>

<span data-ttu-id="e23d3-243">ในแต่ละกรณีดังกล่าวมีความหมายโดยนัยของตัวเองในเรื่องประสิทธิภาพและมีรายละเอียดที่แน่นอนต่างกันไปสำหรับแต่ละแหล่งที่มา</span><span class="sxs-lookup"><span data-stu-id="e23d3-243">Each of these cases has its own implications on performance, and the exact details vary for each data source.</span></span> <span data-ttu-id="e23d3-244">ถึงแม้ว่าจำนวนของแถวที่ใช้ในความสัมพันธ์ที่ร่วมกันกับสองแหล่งที่เหลือน้อยไม่กี่พัน การปฏิบัติการไม่ควรได้รับผล</span><span class="sxs-lookup"><span data-stu-id="e23d3-244">Although the cardinality of the columns used in the relationship that joins the two sources remains low, a few thousand, performance shouldn't be affected.</span></span> <span data-ttu-id="e23d3-245">ขณะที่นี้ดินาลลิตี้ขยาย คุณควรให้ความสำคัญไปยังผลกระทบของผลประสิทธิภาพมากขึ้น</span><span class="sxs-lookup"><span data-stu-id="e23d3-245">As this cardinality grows, you should pay more attention to the impact on the resulting performance.</span></span>

<span data-ttu-id="e23d3-246">นอกจากนี้ การใช้ความสัมพันธ์มาก-ไป-มากหมายความว่าคำถามที่แยกกันจะต้องส่งไปยังแหล่งที่อยู่ใต้กว่าสำหรับแต่ละผลรวมหรือระดับยอดรวมของส่วนหนึ่ง มากกว่าการรวบรวมค่ารายละเอียดแบบท้องถิ่น</span><span class="sxs-lookup"><span data-stu-id="e23d3-246">Additionally, the use of many-to-many relationships means that separate queries must be sent to the underlying source for each total or subtotal level, rather than aggregating the detailed values locally.</span></span> <span data-ttu-id="e23d3-247">ภาพตารางง่าย ๆ พร้อมจำนวนทั้งหมดจะส่งคิวรี SQL สองคิวรี แทนที่จะเป็นคิวรีเดียว</span><span class="sxs-lookup"><span data-stu-id="e23d3-247">A simple table visual with totals would send two SQL queries, rather than one.</span></span>

## <a name="limitations-and-considerations"></a><span data-ttu-id="e23d3-248">ข้อจำกัดและข้อควรพิจารณา</span><span class="sxs-lookup"><span data-stu-id="e23d3-248">Limitations and considerations</span></span>

<span data-ttu-id="e23d3-249">รุ่นของแบบจำลองแบบรวมนี้มีข้อจำกัดเล็กน้อย</span><span class="sxs-lookup"><span data-stu-id="e23d3-249">This release of composite models presents a few limitations:</span></span>

<span data-ttu-id="e23d3-250">ในปัจจุบัน โมเดลแบบรวมที่เชื่อมต่อกับ SQL, Oracle และแหล่งข้อมูล Teradata เท่านั้นที่รองรับ[การรีเฟรชแบบเพิ่ม](../admin/service-premium-incremental-refresh.md)</span><span class="sxs-lookup"><span data-stu-id="e23d3-250">Currently, [incremental refresh](../admin/service-premium-incremental-refresh.md) is supported for composite models connecting to SQL, Oracle, and Teradata data sources only.</span></span>

<span data-ttu-id="e23d3-251">แหล่งขนาดที่หลากหลายของ Live Connect ดังต่อไปนี้ไม่สามารถใช้กับโมเดลแบบรวม:</span><span class="sxs-lookup"><span data-stu-id="e23d3-251">The following Live Connect multi-dimensional sources can't be used with composite models:</span></span>

* <span data-ttu-id="e23d3-252">SAP HANA</span><span class="sxs-lookup"><span data-stu-id="e23d3-252">SAP HANA</span></span>
* <span data-ttu-id="e23d3-253">SAP Business Warehouse</span><span class="sxs-lookup"><span data-stu-id="e23d3-253">SAP Business Warehouse</span></span>
* <span data-ttu-id="e23d3-254">SQL Server Analysis Services</span><span class="sxs-lookup"><span data-stu-id="e23d3-254">SQL Server Analysis Services</span></span>
* <span data-ttu-id="e23d3-255">ชุดข้อมูล Power BI</span><span class="sxs-lookup"><span data-stu-id="e23d3-255">Power BI datasets</span></span>
* <span data-ttu-id="e23d3-256">Azure Analysis Services</span><span class="sxs-lookup"><span data-stu-id="e23d3-256">Azure Analysis Services</span></span>

<span data-ttu-id="e23d3-257">เมื่อคุณเชื่อมต่อไปยังแหล่งขนาดที่หลากหลายเหล่านี้โดยการใช้ DirectQuery คุณไม่สามารถเชื่อมต่อแหล่ง DirectQuery อื่นๆ หรือรวมกับการนำเข้าข้อมูล</span><span class="sxs-lookup"><span data-stu-id="e23d3-257">When you connect to these multi-dimensional sources by using DirectQuery, you can't connect to another DirectQuery source or combine it with import data.</span></span>

<span data-ttu-id="e23d3-258">ข้อจำกัดของ DirectQuery ที่มีอยู่ยังคงมีผลเมื่อใช้โมเดลแบบรวม</span><span class="sxs-lookup"><span data-stu-id="e23d3-258">The existing limitations of DirectQuery still apply when you use composite models.</span></span> <span data-ttu-id="e23d3-259">ข้อจำกัดจำนวนมากเหล่านี้เป็นข้อจำกัดต่อตาราง โดยขึ้นอยู่กับโหมดที่เก็บข้อมูลของตาราง</span><span class="sxs-lookup"><span data-stu-id="e23d3-259">Many of these limitations are now per table, depending upon the storage mode of the table.</span></span> <span data-ttu-id="e23d3-260">สำหรับตัวอย่าง แถวที่ถูกคำนวณในตารางที่นำเข้าสามารถอ้างถึงตารางอื่นๆ แต่แถวที่ถูกคำนวณในตาราง DirectQuery สามารถยังคงอ้างถึงเพียงแถวในตารางเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="e23d3-260">For example, a calculated column on an import table can refer to other tables, but a calculated column on a DirectQuery table can still refer only to columns on the same table.</span></span> <span data-ttu-id="e23d3-261">ข้อจำกัดอื่น ๆ มีผลกับโมเดลทั้งหมด หากมีตารางใดภายในโมเดลที่เป็น DirectQuery</span><span class="sxs-lookup"><span data-stu-id="e23d3-261">Other limitations apply to the model as a whole, if any of the tables within the model are DirectQuery.</span></span> <span data-ttu-id="e23d3-262">ตัวอย่างเช่น คุณลักษณะ QuickInsights และ Q&A จะไม่สามารถใช้งานได้บนโมเดลหากมีตารางใดภายในโมเดลมีโหมดที่เก็บข้อมูลของ DirectQuery</span><span class="sxs-lookup"><span data-stu-id="e23d3-262">For example, the QuickInsights and Q&A features aren't available on a model if any of the tables within it has a storage mode of DirectQuery.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e23d3-263">ขั้นตอนถัดไป</span><span class="sxs-lookup"><span data-stu-id="e23d3-263">Next steps</span></span>

<span data-ttu-id="e23d3-264">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับโมเดลแบบรวมและ DirectQuery โปรดดูบทความต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="e23d3-264">For more information about composite models and DirectQuery, see the following articles:</span></span>

* [<span data-ttu-id="e23d3-265">ความสัมพันธ์แบบกลุ่มต่อกลุ่มใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="e23d3-265">Many-to-many relationships in Power BI Desktop</span></span>](desktop-many-to-many-relationships.md)
* [<span data-ttu-id="e23d3-266">โหมดที่เก็บข้อมูลใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="e23d3-266">Storage mode in Power BI Desktop</span></span>](desktop-storage-mode.md)
* [<span data-ttu-id="e23d3-267">ใช้ DirectQuery ใน Power BI</span><span class="sxs-lookup"><span data-stu-id="e23d3-267">Use DirectQuery in Power BI</span></span>](../connect-data/desktop-directquery-about.md)
* [<span data-ttu-id="e23d3-268">แหล่งข้อมูลที่ได้รับการรองรับโดย DirectQuery ใน Power BI</span><span class="sxs-lookup"><span data-stu-id="e23d3-268">Data sources supported by DirectQuery in Power BI</span></span>](../connect-data/power-bi-data-sources.md)
* [<span data-ttu-id="e23d3-269">การใช้ DirectQuery สำหรับชุดข้อมูล Power BI และ Azure Analysis Services (ตัวอย่าง)</span><span class="sxs-lookup"><span data-stu-id="e23d3-269">Using DirectQuery for Power BI datasets and Azure Analysis Services (preview)</span></span>](../connect-data/desktop-directquery-datasets-azure-analysis-services.md)
