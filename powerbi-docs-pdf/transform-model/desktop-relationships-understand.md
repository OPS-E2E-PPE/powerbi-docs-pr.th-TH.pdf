---
title: ความสัมพันธ์ของแบบจำลองใน Power BI Desktop
description: แนะนำทฤษฎีเกี่ยวกับความสัมพันธ์ของแบบจำลองใน Power BI Desktop
author: peter-myers
ms.author: v-pemyer
ms.reviewer: asaxton
ms.service: powerbi
ms.subservice: pbi-transform-model
ms.topic: conceptual
ms.date: 10/15/2019
ms.openlocfilehash: 7aeae77efeadfa3b39f9c39cadc36b2a046286b2
ms.sourcegitcommit: eeaf607e7c1d89ef7312421731e1729ddce5a5cc
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 01/05/2021
ms.locfileid: "97888625"
---
# <a name="model-relationships-in-power-bi-desktop"></a><span data-ttu-id="b8741-103">ความสัมพันธ์ของแบบจำลองใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="b8741-103">Model relationships in Power BI Desktop</span></span>

<span data-ttu-id="b8741-104">บทความนี้มุ่งเป้าหมายไปที่เรื่อง ตัวสร้างแบบจำลองข้อมูลนำเข้าที่ทำงานกับ Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="b8741-104">This article targets Import data modelers working with Power BI Desktop.</span></span> <span data-ttu-id="b8741-105">นี่เป็นหัวข้อการออกแบบแบบจำลองที่สำคัญ ซึ่งจำเป็นสำหรับการนำเสนอแบบจำลองที่ใช้งานง่าย แม่นยำ และเหมาะสมที่สุด</span><span class="sxs-lookup"><span data-stu-id="b8741-105">It's an important model design topic that's essential to delivering intuitive, accurate, and optimal models.</span></span>

<span data-ttu-id="b8741-106">สำหรับการสนทนาอย่างลึกซึ้งเกี่ยวกับการออกแบบแบบจำลองที่เหมาะสมที่สุด รวมถึงบทบาทและความสัมพันธ์ของตาราง โปรดดูบทความ [เข้าใจโครงสร้างแบบสตาร์และะความสำคัญของสำหรับ Power BI](../guidance/star-schema.md)</span><span class="sxs-lookup"><span data-stu-id="b8741-106">For a deeper discussion on optimal model design, including table roles and relationships, see the [Understand star schema and the importance for Power BI](../guidance/star-schema.md) article.</span></span>

## <a name="relationship-purpose"></a><span data-ttu-id="b8741-107">วัตถุประสงค์ของความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="b8741-107">Relationship purpose</span></span>

<span data-ttu-id="b8741-108">กล่าวง่ายๆ คือความสัมพันธ์ Power BI เผยแพร่ตัวกรองที่ใช้ในคอลัมน์ของตารางแบบจำลองไปยังตารางแบบจำลองอื่นๆ</span><span class="sxs-lookup"><span data-stu-id="b8741-108">Put simply, Power BI relationships propagate filters applied on the columns of model tables to other model tables.</span></span> <span data-ttu-id="b8741-109">ตัวกรองจะเผยแพร่ตราบใดที่มีเส้นทางความสัมพันธ์ที่ต้องติดตามซึ่งอาจเกี่ยวข้องกับการเผยแพร่ไปยังหลายตารางได้</span><span class="sxs-lookup"><span data-stu-id="b8741-109">Filters will propagate so long as there's a relationship path to follow, which can involve propagation to multiple tables.</span></span>

<span data-ttu-id="b8741-110">เส้นทางความสัมพันธ์เป็นแบบกำหนดขึ้น ซึ่งหมายความว่าตัวกรองจะเผยแพร่ในลักษณะเดียวกันเสมอและไม่มีการเปลี่ยนแปลงแบบสุ่ม</span><span class="sxs-lookup"><span data-stu-id="b8741-110">Relationship paths are deterministic, meaning that filters are always propagated in the same way and without random variation.</span></span> <span data-ttu-id="b8741-111">อย่างไรก็ตามคุณสามารถปิดใช้งานความสัมพันธ์ หรือความสัมพันธ์มีบริบทตัวกรองที่ปรับเปลี่ยนโดยการคำนวณแบบจำลองที่ใช้ฟังก์ชัน DAX เฉพาะ</span><span class="sxs-lookup"><span data-stu-id="b8741-111">Relationships can, however, be disabled, or have filter context modified by model calculations that use particular DAX functions.</span></span> <span data-ttu-id="b8741-112">สำหรับข้อมูลเพิ่มเติม โปรดดูหัวข้อ[ฟังก์ชัน DAX ที่เกี่ยวข้อง](#relevant-dax-functions)ในบทความนี้</span><span class="sxs-lookup"><span data-stu-id="b8741-112">For more information, see the [Relevant DAX functions](#relevant-dax-functions) topic later in this article.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b8741-113">สิ่งสำคัญคือต้องเข้าใจว่าความสัมพันธ์ของแบบจำลองไม่บังคับใช้ความสมบูรณ์ของข้อมูล</span><span class="sxs-lookup"><span data-stu-id="b8741-113">It's important to understand that model relationships do not enforce data integrity.</span></span> <span data-ttu-id="b8741-114">สำหรับข้อมูลเพิ่มเติม โปรดดูหัวข้อ[การประเมินผลความสัมพันธ์](#relationship-evaluation)ในบทความนี้</span><span class="sxs-lookup"><span data-stu-id="b8741-114">For more information, see the [Relationship evaluation](#relationship-evaluation) topic later in this article.</span></span> <span data-ttu-id="b8741-115">หัวข้อนี้อธิบายวิธีการทำงานของความสัมพันธ์แบบจำลองเมื่อมีปัญหาเกี่ยวกับความสมบูรณ์ของข้อมูลที่มีต่อข้อมูลของคุณ</span><span class="sxs-lookup"><span data-stu-id="b8741-115">This topics explains how model relationships behave when there are data integrity issues with your data.</span></span>

<span data-ttu-id="b8741-116">มาดูกันว่าความสัมพันธ์เผยแพร่ตัวกรองได้อย่างไรด้วยตัวอย่างภาพเคลื่อนไหว</span><span class="sxs-lookup"><span data-stu-id="b8741-116">Let's see how relationships propagate filters with an animated example.</span></span>

:::image type="content" source="media/desktop-relationships-understand/animation-filter-propagation.gif" alt-text="ตัวอย่างภาพเคลื่อนไหวของการถ่ายทอดตัวกรองความสัมพันธ์":::

<span data-ttu-id="b8741-118">ในตัวอย่างนี้ แบบจำลองประกอบด้วยสี่ตาราง: **หมวดหมู่** **ผลิตภัณฑ์** **ปี** และ **ยอดขาย**</span><span class="sxs-lookup"><span data-stu-id="b8741-118">In this example, the model consists of four tables: **Category**, **Product**, **Year**, and **Sales**.</span></span> <span data-ttu-id="b8741-119">ตาราง **หมวดหมู่** เชื่อมโยงกับตาราง **ผลิตภัณฑ์** และตาราง **ผลิตภัณฑ์** เชื่อมโยงกับตาราง **ยอดขาย**</span><span class="sxs-lookup"><span data-stu-id="b8741-119">The **Category** table relates to the **Product** table, and the **Product** table relates to the **Sales** table.</span></span> <span data-ttu-id="b8741-120">ตาราง **ปี** ยังเชื่อมโยงกับตาราง **ยอดขาย** ด้วย</span><span class="sxs-lookup"><span data-stu-id="b8741-120">The **Year** table also relates to the **Sales** table.</span></span> <span data-ttu-id="b8741-121">ความสัมพันธ์ทั้งหมดจะเป็นแบบหนึ่งต่อกลุ่ม (รายละเอียดจะอธิบายไว้ในส่วนหลังของบทความนี้)</span><span class="sxs-lookup"><span data-stu-id="b8741-121">All relationships are one-to-many (the details of which are described later in this article).</span></span>

<span data-ttu-id="b8741-122">คิวรี — อาจสร้างด้วยการแสดงผลด้วยภาพการ์ด Power BI — คำขอปริมาณยอดขายรวมสำหรับรายการขายที่สร้างขึ้นสำหรับหมวดหมู่เดียว **Cat-A** และสำหรับปีเดียว **CY2018**</span><span class="sxs-lookup"><span data-stu-id="b8741-122">A query—possibly generated by a Power BI card visual—requests the total sales quantity for sales orders made for a single category, **Cat-A**, and for a single year, **CY2018**.</span></span> <span data-ttu-id="b8741-123">นี่คือเหตุผลที่ทำให้คุณสามารถเห็นตัวกรองที่ใช้กับตาราง **หมวดหมู่** และ **ปี** ได้</span><span class="sxs-lookup"><span data-stu-id="b8741-123">It's why you can see filters applied on the **Category** and **Year** tables.</span></span> <span data-ttu-id="b8741-124">ตัวกรองบนตาราง **หมวดหมู่** เผยแพร่ไปยังตาราง **ผลิตภัณฑ์** เพื่อแยกผลิตภัณฑ์สองรายการที่กำหนดให้กับหมวดหมู่ **Cat-A**</span><span class="sxs-lookup"><span data-stu-id="b8741-124">The filter on the **Category** table propagates to the **Product** table to isolate two products that are assigned to the category **Cat-A**.</span></span> <span data-ttu-id="b8741-125">จากนั้นตัวกรองตาราง **ผลิตภัณฑ์** จะเผยแพร่ไปยังตาราง **ยอดขาย** เพื่อแยกแถวยอดขายเพียงสองแถวสำหรับผลิตภัณฑ์เหล่านี้</span><span class="sxs-lookup"><span data-stu-id="b8741-125">Then the **Product** table filters propagate to the **Sales** table to isolate just two sales rows for these products.</span></span> <span data-ttu-id="b8741-126">แถวยอดขายทั้งสองนี้แสดงยอดขายของผลิตภัณฑ์ที่กำหนดให้กับหมวดหมู่ **Cat-A**</span><span class="sxs-lookup"><span data-stu-id="b8741-126">These two sales rows represent the sales of products assigned to category **Cat-A**.</span></span> <span data-ttu-id="b8741-127">ปริมาณรวมทั้งหมดคือ 14 หน่วย</span><span class="sxs-lookup"><span data-stu-id="b8741-127">Their combined quantity is 14 units.</span></span> <span data-ttu-id="b8741-128">ในเวลาเดียวกัน ตัวกรองตาราง **ปี** จะเผยแพร่เพื่อกรองตาราง **ยอดขาย** เพิ่มเติม ส่งผลให้มีเพียงยอดขายแถวเดียวสำหรับผลิตภัณฑ์ที่กำหนดให้กับหมวดหมู่ **Cat-A** และที่สั่งซื้อในปี **CY2018**</span><span class="sxs-lookup"><span data-stu-id="b8741-128">At the same time, the **Year** table filter propagates to further filter the **Sales** table, resulting in just the one sales row that is for products assigned to category **Cat-A** and that was ordered in year **CY2018**.</span></span> <span data-ttu-id="b8741-129">ค่าปริมาณที่ส่งกลับโดยคิวรีคือ 11 หน่วย</span><span class="sxs-lookup"><span data-stu-id="b8741-129">The quantity value returned by the query is 11 units.</span></span> <span data-ttu-id="b8741-130">โปรดทราบว่าเมื่อตัวกรองหลายตัวถูกนำไปใช้กับตาราง (เช่นตาราง **ยอดขาย** ในตัวอย่างนี้) จะเป็นการดำเนินการ AND เสมอโดยกำหนดให้เงื่อนไขทั้งหมดต้องเป็นจริง</span><span class="sxs-lookup"><span data-stu-id="b8741-130">Note that when multiple filters are applied to a table (like the **Sales** table in this example), it's always an AND operation, requiring that all conditions must be true.</span></span>

### <a name="disconnected-tables"></a><span data-ttu-id="b8741-131">ตารางแบบไม่ต่อเนื่อง</span><span class="sxs-lookup"><span data-stu-id="b8741-131">Disconnected tables</span></span>

<span data-ttu-id="b8741-132">ซึ่งเป็นเรื่องผิดปกติที่ตารางแบบจำลองไม่เชื่อมโยงกับตารางแบบจำลองอื่นเลย</span><span class="sxs-lookup"><span data-stu-id="b8741-132">It's unusual that a model table isn't related to another model table.</span></span> <span data-ttu-id="b8741-133">ตารางดังกล่าวในการออกแบบแบบจำลองที่ถูกต้องสามารถอธิบายได้เป็น _ตารางแบบไม่ต่อเนื่อง_</span><span class="sxs-lookup"><span data-stu-id="b8741-133">Such a table in a valid model design can be described as a _disconnected table_.</span></span> <span data-ttu-id="b8741-134">ตารางแบบไม่ต่อเนื่องไม่ได้มีวัตถุประสงค์เพื่อเผยแพร่ตัวกรองไปยังตารางแบบจำลองอื่น</span><span class="sxs-lookup"><span data-stu-id="b8741-134">A disconnected table isn't intended to propagate filters to other model tables.</span></span> <span data-ttu-id="b8741-135">แต่จะใช้เพื่อยอมรับ "การป้อนข้อมูลของผู้ใช้" (อาจเป็นวิชวลตัวแบ่งส่วนข้อมูล) เพื่อช่วยให้การคำนวณแบบจำลองสามารถใช้ค่าอินพุตอย่างมีความหมาย</span><span class="sxs-lookup"><span data-stu-id="b8741-135">Instead, it's used to accept "user input" (perhaps with a slicer visual), allowing model calculations to use the input value in a meaningful way.</span></span> <span data-ttu-id="b8741-136">ตัวอย่างเช่น พิจารณาตารางแบบไม่ต่อเนื่องที่โหลดโหลดด้วยช่วงของค่าอัตราแลกเปลี่ยนสกุลเงิน</span><span class="sxs-lookup"><span data-stu-id="b8741-136">For example, consider a disconnected table that is loaded with a range of currency exchange rate values.</span></span> <span data-ttu-id="b8741-137">ตราบใดที่ตัวกรองถูกนำไปใช้เพื่อกรองตามค่าอัตราเดียว ซึ่งนิพจน์หน่วยวัดสามารถใช้ค่าเพื่อแปลงค่ายอดขายได้</span><span class="sxs-lookup"><span data-stu-id="b8741-137">As long as a filter is applied to filter by a single rate value, the value can be used by a measure expression to convert sales values.</span></span>

<span data-ttu-id="b8741-138">พารามิเตอร์ what-if ของ Power BI Desktop เป็นคุณลักษณะที่สร้างตารางแบบไม่เชื่อมต่อ</span><span class="sxs-lookup"><span data-stu-id="b8741-138">The Power BI Desktop what-if parameter is a feature that creates a disconnected table.</span></span> <span data-ttu-id="b8741-139">สำหรับข้อมูลเพิ่มเติม โปรดดูที่บทความ[สร้างและใช้พารามิเตอร์เพื่อแสดงการแสดงผลด้วยภาพตัวแปรใน Power BI Desktop](desktop-what-if.md)</span><span class="sxs-lookup"><span data-stu-id="b8741-139">For more information, see the [Create and use a What if parameter to visualize variables in Power BI Desktop](desktop-what-if.md) article.</span></span>

## <a name="relationship-properties"></a><span data-ttu-id="b8741-140">คุณสมบัติของความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="b8741-140">Relationship properties</span></span>

<span data-ttu-id="b8741-141">ความสัมพันธ์ของแบบจำลองเชื่อมโยงกับหนึ่งคอลัมน์ในตารางหนึ่งกับอีกหนึ่งคอลัมน์ในตารางที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="b8741-141">A model relationship relates one column in a table to one column in a different table.</span></span> <span data-ttu-id="b8741-142">(มีกรณีพิเศษหนึ่งกรณีที่ข้อกำหนดนี้ไม่เป็นจริง และจะใช้กับความสัมพันธ์แบบหลายคอลัมน์ในแบบจำลอง DirectQuery เท่านั้น</span><span class="sxs-lookup"><span data-stu-id="b8741-142">(There's one specialized case where this requirement isn't true, and it applies only to multi-column relationships in DirectQuery models.</span></span> <span data-ttu-id="b8741-143">สำหรับข้อมูลเพิ่มเติม โปรดดูบทความฟังก์ชัน [COMBINEVALUES](/dax/combinevalues-function-dax) DAX)</span><span class="sxs-lookup"><span data-stu-id="b8741-143">For more information, see the [COMBINEVALUES](/dax/combinevalues-function-dax) DAX function article.)</span></span>

> [!NOTE]
> <span data-ttu-id="b8741-144">ซึ่งเป็นไปไม่ได้ที่จะเชื่อมโยงคอลัมน์หนึ่งกับอีกคอลัมน์ที่แตกต่างกัน _ในตารางเดียวกัน_</span><span class="sxs-lookup"><span data-stu-id="b8741-144">It's not possible to relate a column to a different column _in the same table_.</span></span> <span data-ttu-id="b8741-145">ในบางครั้งอาจสับสนกับความสามารถในการกำหนดข้อจำกัดของคีย์นอก (foreign key) ในฐานข้อมูลเชิงสัมพันธ์นั่นคือการอ้างอิงตัวเองของตาราง</span><span class="sxs-lookup"><span data-stu-id="b8741-145">This is sometimes confused with the ability to define a relational database foreign key constraint that is table self-referencing.</span></span> <span data-ttu-id="b8741-146">แนวคิดของฐานข้อมูลเชิงสัมพันธ์นี้สามารถใช้เพื่อจัดเก็บความสัมพันธ์แบบ พ่อ-ลูก (ตัวอย่างเช่น แต่ละเรกคอร์ดพนักงานเชื่อมโยงกับพนักงาน "รายงานถึง")</span><span class="sxs-lookup"><span data-stu-id="b8741-146">This relational database concept can be used to store parent-child relationships (for example, each employee record is related to a "reports to" employee).</span></span> <span data-ttu-id="b8741-147">การสร้างลำดับชั้นของแบบจำลองโดยยึดตามความสัมพันธ์ประเภทนี้ไม่สามารถแก้ไขได้ด้วยการสร้างความสัมพันธ์ของแบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="b8741-147">Generating a model hierarchy based on this type of relationship can't be solved by creating model relationships.</span></span> <span data-ttu-id="b8741-148">เพื่อให้สามารถทำสิ่งนี้ได้ โปรดดูบทความ [ฟังก์ชันหลักและรอง](/dax/parent-and-child-functions-dax)</span><span class="sxs-lookup"><span data-stu-id="b8741-148">To achieve this, see the [Parent and Child functions](/dax/parent-and-child-functions-dax) article.</span></span>

### <a name="cardinality"></a><span data-ttu-id="b8741-149">คาร์ดินาลลิตี้</span><span class="sxs-lookup"><span data-stu-id="b8741-149">Cardinality</span></span>

<span data-ttu-id="b8741-150">คุณต้องกำหนดความสัมพันธ์ของแบบจำลองแต่ละรายการด้วยชนิดของคาร์ดินาลลิตี้</span><span class="sxs-lookup"><span data-stu-id="b8741-150">Each model relationship must be defined with a cardinality type.</span></span> <span data-ttu-id="b8741-151">มีตัวเลือกประเภทของคาร์ดินาลลิตี้จำนวนสี่แบบ ซึ่งแสดงถึงลักษณะข้อมูลของคอลัมน์ที่เชื่อมโยง "จาก" และ "ไปยัง"</span><span class="sxs-lookup"><span data-stu-id="b8741-151">There are four cardinality type options, representing the data characteristics of the "from" and "to" related columns.</span></span> <span data-ttu-id="b8741-152">ด้าน "หนึ่ง" หมายถึง คอลัมน์มีค่าที่ไม่ซ้ำกัน ด้าน "สอง" หมายถึง คอลัมน์สามารถมีค่าซ้ำกันได้</span><span class="sxs-lookup"><span data-stu-id="b8741-152">The "one" side means the column contains unique values; the "two" side means the column can contain duplicate values.</span></span>

> [!NOTE]
> <span data-ttu-id="b8741-153">หากการรีเฟรชข้อมูลพยายามโหลดค่าที่ซ้ำกันลงในคอลัมน์ด้าน "หนึ่ง" การรีเฟรชข้อมูลทั้งหมดจะล้มเหลว</span><span class="sxs-lookup"><span data-stu-id="b8741-153">If a data refresh operation attempts to load duplicate values into a "one" side column, the entire data refresh will fail.</span></span>

<span data-ttu-id="b8741-154">ตัวเลือกทั้งสี่—พร้อมกับเครื่องหมายแบบย่อของแต่ละตัวเลือก—อธิบายไว้ในรายการหัวข้อย่อยต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="b8741-154">The four options—together with their shorthand notations—are described in the following bulleted list:</span></span>

- <span data-ttu-id="b8741-155">หนึ่งต่อกลุ่ม (1:\*)</span><span class="sxs-lookup"><span data-stu-id="b8741-155">One-to-many (1:\*)</span></span>
- <span data-ttu-id="b8741-156">กลุ่มต่อหนึ่ง (\*:1)</span><span class="sxs-lookup"><span data-stu-id="b8741-156">Many-to-one (\*:1)</span></span>
- <span data-ttu-id="b8741-157">หนึ่งต่อหนึ่ง (1:1)</span><span class="sxs-lookup"><span data-stu-id="b8741-157">One-to-one (1:1)</span></span>
- <span data-ttu-id="b8741-158">กลุ่มต่อกลุ่ม (\*:\*)</span><span class="sxs-lookup"><span data-stu-id="b8741-158">Many-to-many (\*:\*)</span></span>

<span data-ttu-id="b8741-159">เมื่อคุณสร้างความสัมพันธ์ใน Power BI Desktop ตัวออกแบบจะตรวจจับและตั้งค่าประเภทของคาร์ดินาลลิตี้โดยอัตโนมัติ</span><span class="sxs-lookup"><span data-stu-id="b8741-159">When you create a relationship in Power BI Desktop, the designer will automatically detect and set the cardinality type.</span></span> <span data-ttu-id="b8741-160">ตัวออกแบบคิวรีแบบจำลองเพื่อทราบว่าคอลัมน์ใดบ้างที่มีค่าที่ไม่ซ้ำกัน</span><span class="sxs-lookup"><span data-stu-id="b8741-160">The designer queries the model to know which columns contain unique values.</span></span> <span data-ttu-id="b8741-161">สำหรับแบบจำลองนำเข้า จะใช้สถิติของหน่วยเก็บข้อมูลภายใน สำหรับแบบจำลอง DirectQuery จะส่งคิวรีการทำโปรไฟล์ไปยังแหล่งข้อมูล</span><span class="sxs-lookup"><span data-stu-id="b8741-161">For Import models, it uses internal storage statistics; for DirectQuery models it sends profiling queries to the data source.</span></span> <span data-ttu-id="b8741-162">อย่างไรก็ตามบางครั้งอาจเกิดข้อผิดพลาดได้</span><span class="sxs-lookup"><span data-stu-id="b8741-162">Sometimes, however, it can get it wrong.</span></span> <span data-ttu-id="b8741-163">สิ่งนี้เกิดขึ้นเนื่องจากตารางยังไม่สามารถโหลดข้อมูลได้ หรือเนื่องจากคอลัมน์ที่คุณคาดว่าจะมีค่าซ้ำกันในปัจจุบันมีค่าที่ไม่ซ้ำกัน</span><span class="sxs-lookup"><span data-stu-id="b8741-163">It happens because tables are yet to be loaded with data, or because columns that you expect to contain duplicate values currently contain unique values.</span></span> <span data-ttu-id="b8741-164">ในกรณีใดกรณีหนึ่ง คุณสามารถอัปเดตประเภทของคาร์ดินาลลิตี้โดยระบุคอลัมน์ด้าน "หนึ่ง" ที่มีค่าที่ไม่ซ้ำกัน (หรือตารางยังไม่ได้โหลดแถวของข้อมูล)</span><span class="sxs-lookup"><span data-stu-id="b8741-164">In either case, you can update the cardinality type as long as any "one" side columns contain unique values (or the table is yet to be loaded with rows of data).</span></span>

<span data-ttu-id="b8741-165">ตัวเลือกคาร์ดินาลลิตี้แบบ **หนึ่งต่อกลุ่ม** และ **กลุ่มต่อหนึ่ง** นั้นเหมือนกันอย่างแท้จริง และก็เป็นประเภทของคาร์ดินาลลิตี้ที่พบบ่อยที่สุด</span><span class="sxs-lookup"><span data-stu-id="b8741-165">The **One-to-many** and **Many-to-one** cardinality options are essentially the same, and they're also the most common cardinality types.</span></span>

<span data-ttu-id="b8741-166">เมื่อกำหนดค่าความสัมพันธ์แบบหนึ่งต่อกลุ่มหรือกลุ่มต่อหนึ่ง คุณจะต้องเลือกรายการที่ตรงกับลำดับที่คุณเชื่อมโยงคอลัมน์</span><span class="sxs-lookup"><span data-stu-id="b8741-166">When configuring a One-to-many or Many-to-one relationship, you'll choose the one that matches the order in which you related the columns.</span></span> <span data-ttu-id="b8741-167">พิจารณาว่าคุณจะกำหนดค่าความสัมพันธ์จากตาราง **ผลิตภัณฑ์** ไปยังตาราง **ยอดขาย** โดยใช้คอลัมน์ **ProductID** ที่พบในแต่ละตารางได้อย่างไร</span><span class="sxs-lookup"><span data-stu-id="b8741-167">Consider how you would configure the relationship from the **Product** table to the **Sales** table by using the **ProductID** column found in each table.</span></span> <span data-ttu-id="b8741-168">ประเภทของคาร์ดินาลลิตี้จะเป็นแบบ _หนึ่งต่อกลุ่ม_ ซึ่งเป็นคอลัมน์ **ProductID** ในตาราง **ผลิตภัณฑ์** ที่ประกอบด้วยค่าที่ไม่ซ้ำกัน</span><span class="sxs-lookup"><span data-stu-id="b8741-168">The cardinality type would be _One-to-many_, as the **ProductID** column in the **Product** table contains unique values.</span></span> <span data-ttu-id="b8741-169">หากคุณเชื่อมโยงตารางในทิศทางย้อนกลับ **ยอดขาย** ไปยัง **ผลิตภัณฑ์** ดังนั้นคาร์ดินาลลิตี้จะเป็น _กลุ่มต่อหนึ่ง_</span><span class="sxs-lookup"><span data-stu-id="b8741-169">If you related the tables in the reverse direction, **Sales** to **Product**, then the cardinality would be _Many-to-one_.</span></span>

<span data-ttu-id="b8741-170">ความสัมพันธ์แบบ **หนึ่งต่อหนึ่ง** หมายถึง ทั้งสองคอลัมน์มีประกอบด้วยค่าที่ไม่ซ้ำกัน</span><span class="sxs-lookup"><span data-stu-id="b8741-170">A **One-to-one** relationship means both columns contain unique values.</span></span> <span data-ttu-id="b8741-171">ประเภทของคาร์ดินาลลิตี้นี้ไม่ใช่ประเภทปกติ และมีแนวโน้มที่แสดงถึงการออกแบบแบบจำลองที่ต่ำกว่าจุดเหมาะสมเนื่องจากการจัดเก็บข้อมูลซ้ำซ้อน</span><span class="sxs-lookup"><span data-stu-id="b8741-171">This cardinality type isn't common, and it likely represents a suboptimal model design because of the storage of redundant data.</span></span> <span data-ttu-id="b8741-172">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับการใช้ชนิดคาร์ดินาลลิตี้นี้ โปรดดู[คำแนะนำความสัมพันธ์แบบหนึ่งต่อหนึ่ง](../guidance/relationships-one-to-one.md)</span><span class="sxs-lookup"><span data-stu-id="b8741-172">For more information on using this cardinality type, see [One-to-one relationship guidance](../guidance/relationships-one-to-one.md).</span></span>

<span data-ttu-id="b8741-173">ความสัมพันธ์แบบ **กลุ่มต่อกลุ่ม** หมายถึง ทั้งสองคอลัมน์สามารถมีค่าซ้ำกันได้</span><span class="sxs-lookup"><span data-stu-id="b8741-173">A **Many-to-many** relationship means both columns can contain duplicate values.</span></span> <span data-ttu-id="b8741-174">ประเภทของคาร์ดินาลลิตี้นี้มีการใช้งานไม่บ่อยนัก</span><span class="sxs-lookup"><span data-stu-id="b8741-174">This cardinality type is infrequently used.</span></span> <span data-ttu-id="b8741-175">โดยทั่วไปแล้วจะมีประโยชน์เมื่อออกแบบข้อกำหนดแบบจำลองที่ซับซ้อน</span><span class="sxs-lookup"><span data-stu-id="b8741-175">It's typically useful when designing complex model requirements.</span></span> <span data-ttu-id="b8741-176">สำหรับคำแนะนำในการใช้ประเภทของคาร์ดินาลลิตี้ ศึกษา[คำแนะนำความสัมพันธ์แบบกลุ่มต่อกลุ่ม](../guidance/relationships-many-to-many.md)</span><span class="sxs-lookup"><span data-stu-id="b8741-176">For guidance on using this cardinality type, see [Many-to-many relationship guidance](../guidance/relationships-many-to-many.md).</span></span>

> [!NOTE]
> <span data-ttu-id="b8741-177">ในขณะนี้ ประเภทของคาร์ดินาลลิตี้แบบกลุ่มต่อกลุ่มยังไม่ได้รับการสนับสนุนสำหรับแบบจำลองที่พัฒนาขึ้นสำหรับ Power BI Report Server</span><span class="sxs-lookup"><span data-stu-id="b8741-177">The Many-to-many cardinality type isn't currently supported for models developed for Power BI Report Server.</span></span>

> [!TIP]
> <span data-ttu-id="b8741-178">ในมุมมองแบบจำลอง Power BI Desktop คุณสามารถตีความประเภทของคาร์ดินาลลิตี้ของความสัมพันธ์ได้โดยดูที่ตัวบ่งชี้ (1 หรือ \*) ที่ด้านแต่ละด้านของเส้นความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="b8741-178">In Power BI Desktop model view, you can interpret a relationship's cardinality type by looking at the indicators (1 or \*) on either side of the relationship line.</span></span> <span data-ttu-id="b8741-179">หากต้องการระบุว่าคอลัมน์ใดมีความสัมพันธ์แล้ว คุณจะต้องเลือก - หรือวางเคอร์เซอร์ไว้เหนือ - เส้นความสัมพันธ์เพื่อเน้นคอลัมน์</span><span class="sxs-lookup"><span data-stu-id="b8741-179">To determine which columns are related, you'll need to select—or hover the cursor over—the relationship line to highlight the columns.</span></span>

### <a name="cross-filter-direction"></a><span data-ttu-id="b8741-180">ทิศทางตัวกรองข้าม</span><span class="sxs-lookup"><span data-stu-id="b8741-180">Cross filter direction</span></span>

<span data-ttu-id="b8741-181">คุณต้องกำหนดความสัมพันธ์ของแบบจำลองแต่ละรายการด้วยทิศทางตัวกรองข้าม</span><span class="sxs-lookup"><span data-stu-id="b8741-181">Each model relationship must be defined with a cross filter direction.</span></span> <span data-ttu-id="b8741-182">การเลือกของคุณจะกำหนดทิศทางของตัวกรองที่จะเผยแพร่</span><span class="sxs-lookup"><span data-stu-id="b8741-182">Your selection determines the direction(s) that filters will propagate.</span></span> <span data-ttu-id="b8741-183">ตัวเลือก ตัวกรองข้ามที่เป็นไปได้นั้นขึ้นอยู่กับประเภทของคาร์ดินาลลิตี้</span><span class="sxs-lookup"><span data-stu-id="b8741-183">The possible cross filter options are dependent on the cardinality type.</span></span>

| <span data-ttu-id="b8741-184">ประเภทของคาร์ดินาลลิตี้</span><span class="sxs-lookup"><span data-stu-id="b8741-184">Cardinality type</span></span> | <span data-ttu-id="b8741-185">ตัวเลือกของตัวกรองข้าม</span><span class="sxs-lookup"><span data-stu-id="b8741-185">Cross filter options</span></span> |
| --- | --- |
| <span data-ttu-id="b8741-186">แบบหนึ่งต่อกลุ่ม (หรือกลุ่มต่อหนึ่ง)</span><span class="sxs-lookup"><span data-stu-id="b8741-186">One-to-many (or Many-to-one)</span></span> | <span data-ttu-id="b8741-187">เดียว</span><span class="sxs-lookup"><span data-stu-id="b8741-187">Single</span></span><br><span data-ttu-id="b8741-188">ทั้งสอง</span><span class="sxs-lookup"><span data-stu-id="b8741-188">Both</span></span> |
| <span data-ttu-id="b8741-189">หนึ่งต่อหนึ่ง</span><span class="sxs-lookup"><span data-stu-id="b8741-189">One-to-one</span></span> | <span data-ttu-id="b8741-190">ทั้งสอง</span><span class="sxs-lookup"><span data-stu-id="b8741-190">Both</span></span> |
| <span data-ttu-id="b8741-191">กลุ่มต่อกลุ่ม</span><span class="sxs-lookup"><span data-stu-id="b8741-191">Many-to-many</span></span> | <span data-ttu-id="b8741-192">เดียว (Table1 ไปยัง Table2)</span><span class="sxs-lookup"><span data-stu-id="b8741-192">Single (Table1 to Table2)</span></span><br><span data-ttu-id="b8741-193">เดียว (Table2 ไปยัง Table1)</span><span class="sxs-lookup"><span data-stu-id="b8741-193">Single (Table2 to Table1)</span></span><br><span data-ttu-id="b8741-194">ทั้งสอง</span><span class="sxs-lookup"><span data-stu-id="b8741-194">Both</span></span> |

<span data-ttu-id="b8741-195">ทิศทางตัวกรองข้าม _เดียว_ หมายถึง "ทิศทางเดียว" และ _ทั้งสอง_ หมายถึง "ทั้งสองทิศทาง"</span><span class="sxs-lookup"><span data-stu-id="b8741-195">_Single_ cross filter direction means "single direction", and _Both_ means "both directions".</span></span> <span data-ttu-id="b8741-196">ความสัมพันธ์ที่กรองในทั้งสองทิศทางโดยทั่วไปจะอธิบายว่าเป็น _แบบสองทิศทาง_</span><span class="sxs-lookup"><span data-stu-id="b8741-196">A relationship that filters in both directions is commonly described as _bi-directional_.</span></span>

<span data-ttu-id="b8741-197">สำหรับความสัมพันธ์แบบหนึ่งต่อกลุ่ม ทิศทางตัวกรองข้ามจะมาจากด้าน "หนึ่ง" เสมอ และอาจเลือกมาจากด้าน "กลุ่ม" (แบบสองทิศทาง)</span><span class="sxs-lookup"><span data-stu-id="b8741-197">For One-to-many relationships, the cross filter direction is always from the "one" side, and optionally from the "many" side (bi-directional).</span></span> <span data-ttu-id="b8741-198">สำหรับความสัมพันธ์แบบหนึ่งต่อหนึ่ง ทิศทางตัวกรองข้ามจะมาจากทั้งสองตารางเสมอ</span><span class="sxs-lookup"><span data-stu-id="b8741-198">For One-to-one relationships, the cross filter direction is always from both tables.</span></span> <span data-ttu-id="b8741-199">สุดท้ายสำหรับความสัมพันธ์แบบกลุ่มต่อกลุ่ม ทิศทางตัวกรองข้ามสามารถมาจากหนึ่งตารางหรือจากทั้งสองตารางได้</span><span class="sxs-lookup"><span data-stu-id="b8741-199">Lastly, for the Many-to-many relationships, cross filter direction can be from either one of the tables, or from both tables.</span></span> <span data-ttu-id="b8741-200">โปรดสังเกตว่าเมื่อประเภทของคาร์ดินาลลิตี้ประกอบด้วยด้าน "หนึ่ง" ตัวกรองนั้นจะเผยแพร่จากด้านนั้นเสมอ</span><span class="sxs-lookup"><span data-stu-id="b8741-200">Notice that when the cardinality type includes a "one" side, that filters will always propagate from that side.</span></span>

<span data-ttu-id="b8741-201">เมื่อทิศทางตัวกรองข้ามได้รับการตั้งค่าเป็น **ทั้งคู่** คุณสมบัติเพิ่มเติมจะพร้อมใช้งาน</span><span class="sxs-lookup"><span data-stu-id="b8741-201">When the cross filter direction is set to **Both**, an additional property is available.</span></span> <span data-ttu-id="b8741-202">ซึ่งสามารถใช้การกรองแบบสองทิศทางได้เมื่อมีกฎการรักษาความปลอดภัยระดับแถว (RLS)</span><span class="sxs-lookup"><span data-stu-id="b8741-202">It can apply bi-directional filtering when row-level security (RLS) rules are enforced.</span></span> <span data-ttu-id="b8741-203">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับ RLS โปรดดูที่บทความ[การรักษาความปลอดภัยระดับแถว (RLS) ด้วย Power BI Desktop](../create-reports/desktop-rls.md)</span><span class="sxs-lookup"><span data-stu-id="b8741-203">For more information about RLS, see the [Row-level security (RLS) with Power BI Desktop](../create-reports/desktop-rls.md) article.</span></span>

<span data-ttu-id="b8741-204">การปรับเปลี่ยนทิศทางตัวกรองข้ามของความสัมพันธ์—ซึ่งรวมถึงการปิดใช้งานการเผยแพร่ตัวกรอง—ยังสามารถทำได้โดยการคำนวณแบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="b8741-204">Modifying the relationship cross filter direction—including the disabling of filter propagation—can also be done by a model calculation.</span></span> <span data-ttu-id="b8741-205">ซึ่งทำได้โดยใช้ฟังก์ชัน [CROSSFILTER](/dax/crossfilter-function) DAX</span><span class="sxs-lookup"><span data-stu-id="b8741-205">It's achieved by using the [CROSSFILTER](/dax/crossfilter-function) DAX function.</span></span>

<span data-ttu-id="b8741-206">ความสัมพันธ์แบบสองทิศทางสามารถส่งผลเสียต่อประสิทธิภาพการทำงานได้</span><span class="sxs-lookup"><span data-stu-id="b8741-206">Bi-directional relationships can impact negatively on performance.</span></span> <span data-ttu-id="b8741-207">นอกจากนี้ การพยายามกำหนดค่าความสัมพันธ์แบบสองทิศทางอาจส่งผลให้เกิดเส้นทางการเผยแพร่ตัวกรองที่ไม่ชัดเจน</span><span class="sxs-lookup"><span data-stu-id="b8741-207">Further, attempting to configure a bi-directional relationship could result in ambiguous filter propagation paths.</span></span> <span data-ttu-id="b8741-208">ในกรณีนี้ Power BI Desktop อาจล้มเหลวในการยอมรับการเปลี่ยนแปลงความสัมพันธ์ และจะแจ้งเตือนคุณด้วยข้อความแสดงข้อผิดพลาด</span><span class="sxs-lookup"><span data-stu-id="b8741-208">In this case, Power BI Desktop may fail to commit the relationship change and will alert you with an error message.</span></span> <span data-ttu-id="b8741-209">อย่างไรก็ตามในบางครั้ง Power BI Desktop อาจอนุญาตให้คุณกำหนดเส้นทางความสัมพันธ์ที่ไม่ชัดเจนระหว่างตารางได้</span><span class="sxs-lookup"><span data-stu-id="b8741-209">Sometimes, however, Power BI Desktop may allow you to define ambiguous relationship paths between tables.</span></span> <span data-ttu-id="b8741-210">มีการอธิบายกฎที่กำหนดความสำคัญซึ่งส่งผลต่อการตรวจหาความคลุมเครือและการแก้ปัญหาเส้นทางในภายหลังของบทความนี้ในหัวข้อ [กฎที่กำหนดความสำคัญ](#precedence-rules)</span><span class="sxs-lookup"><span data-stu-id="b8741-210">Precedence rules that affect ambiguity detection and path resolution are described later in this article in the [Precedence rules](#precedence-rules) topic.</span></span>

<span data-ttu-id="b8741-211">เราขอแนะนำให้ใช้การกรองแบบสองทิศทางเท่าที่จำเป็น</span><span class="sxs-lookup"><span data-stu-id="b8741-211">We recommend using bi-directional filtering only as needed.</span></span> <span data-ttu-id="b8741-212">สำหรับข้อมูลเพิ่มเติม โปรดดู[คำแนะนำความแตกต่างระหว่างความสัมพันธ์ที่ใช้และไม่ได้ใช้งาน](../guidance/relationships-bidirectional-filtering.md)</span><span class="sxs-lookup"><span data-stu-id="b8741-212">For more information, see [Bi-directional relationship guidance](../guidance/relationships-bidirectional-filtering.md).</span></span>

> [!TIP]
> <span data-ttu-id="b8741-213">ในมุมมองแบบจำลอง Power BI Desktop คุณสามารถตีความทิศทางตัวกรองข้ามของความสัมพันธ์โดยสังเกตหัวลูกศรตามเส้นความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="b8741-213">In Power BI Desktop model view, you can interpret a relationship's cross filter direction by noticing the arrowhead(s) along the relationship line.</span></span> <span data-ttu-id="b8741-214">หัวลูกศรเดียวหมายถึง ตัวกรองทิศทางเดียวในทิศทางของหัวลูกศร หัวลูกศรคู่หมายถึง ความสัมพันธ์แบบสองทิศทาง</span><span class="sxs-lookup"><span data-stu-id="b8741-214">A single arrowhead represents a single-direction filter in the direction of the arrowhead; a double arrowhead represents a bi-directional relationship.</span></span>

### <a name="make-this-relationship-active"></a><span data-ttu-id="b8741-215">เปิดใช้งานความสัมพันธ์นี้</span><span class="sxs-lookup"><span data-stu-id="b8741-215">Make this relationship active</span></span>

<span data-ttu-id="b8741-216">ซึ่งสามารถมีเส้นทางการเผยแพร่ตัวกรองที่ใช้งานอยู่ระหว่างตารางแบบจำลองสองตารางได้เพียงหนึ่งเส้นทางเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="b8741-216">There can only be one active filter propagation path between two model tables.</span></span> <span data-ttu-id="b8741-217">อย่างไรก็ตามอาจเป็นไปได้ที่จะนำเส้นทางความสัมพันธ์เพิ่มเติมเข้ามา แม้ว่าจะต้องมีการกำหนดค่าสัมพันธ์เหล่านี้เป็น _ไม่มีการใช้งาน_</span><span class="sxs-lookup"><span data-stu-id="b8741-217">However, it's possible to introduce additional relationship paths, though these relationships must all be configured as _inactive_.</span></span> <span data-ttu-id="b8741-218">ความสัมพันธ์ที่ไม่ใช้งานสามารถทำให้ใช้งานได้เฉพาะในระหว่างการประเมินผลการคำนวณแบบจำลองเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="b8741-218">Inactive relationships can only be made active during the evaluation of a model calculation.</span></span> <span data-ttu-id="b8741-219">ซึ่งทำได้โดยใช้ฟังก์ชัน [USERELATIONSHIP](/dax/userelationship-function-dax) DAX</span><span class="sxs-lookup"><span data-stu-id="b8741-219">It is achieved by using the [USERELATIONSHIP](/dax/userelationship-function-dax) DAX function.</span></span>

<span data-ttu-id="b8741-220">สำหรับข้อมูลเพิ่มเติม โปรดดู[คำแนะนำความแตกต่างระหว่างความสัมพันธ์ที่ใช้และไม่ได้ใช้งาน](../guidance/relationships-active-inactive.md)</span><span class="sxs-lookup"><span data-stu-id="b8741-220">For more information, see [Active vs inactive relationship guidance](../guidance/relationships-active-inactive.md).</span></span>

> [!TIP]
> <span data-ttu-id="b8741-221">ในมุมมองแบบจำลอง Power BI Desktop คุณสามารถตีความสถานะการใช้งานกับสถานะไม่ได้ใช้งานของความสัมพันธ์ได้</span><span class="sxs-lookup"><span data-stu-id="b8741-221">In Power BI Desktop model view, you can interpret a relationship's active vs inactive status.</span></span> <span data-ttu-id="b8741-222">ความสัมพันธ์ที่ใช้งานอยู่จะแสดงด้วยเส้นทึบ ความสัมพันธ์ที่ไม่ใช้งานจะแสดงด้วยเส้นประ</span><span class="sxs-lookup"><span data-stu-id="b8741-222">An active relationship is represented by a solid line; an inactive relationship is represented as a dashed line.</span></span>

### <a name="assume-referential-integrity"></a><span data-ttu-id="b8741-223">ตั้งสมมุติฐานว่ามีกฎการอ้างอิง</span><span class="sxs-lookup"><span data-stu-id="b8741-223">Assume referential integrity</span></span>

<span data-ttu-id="b8741-224">คุณสมบัติ _สมมติว่ามีความสมบูรณ์ของการอ้างอิง_ พร้อมใช้งานสำหรับความสัมพันธ์แบบหนึ่งต่อกลุ่ม และแบบหนึ่งต่อหนึ่งระหว่างตารางโหมดเก็บข้อมูล DirectQuery สองตารางที่ยึดตามแหล่งข้อมูลเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="b8741-224">The _Assume referential integrity_ property is available only for One-to-many and One-to-one relationships between two DirectQuery storage mode tables that are based on the same data source.</span></span> <span data-ttu-id="b8741-225">เมื่อเปิดใช้งานเนทีฟคิวรีที่ส่งไปยังแหล่งข้อมูลจะรวมสองตารางเข้าด้วยกันโดยใช้ INNER JOIN แทนที่จะเป็น OUTER JOIN</span><span class="sxs-lookup"><span data-stu-id="b8741-225">When enabled, native queries sent to the data source will join the two tables together by using an INNER JOIN rather than an OUTER JOIN.</span></span> <span data-ttu-id="b8741-226">โดยทั่วไปการเปิดใช้งานคุณสมบัตินี้จะปรับปรุงประสิทธิภาพการทำงานของคิวรี แม้ว่าจะขึ้นอยู่กับข้อมูลจำเพาะของแหล่งข้อมูล</span><span class="sxs-lookup"><span data-stu-id="b8741-226">Generally, enabling this property improves query performance, though it does depend on the specifics of the data source.</span></span>

<span data-ttu-id="b8741-227">คุณควรเปิดใช้งานคุณสมบัตินี้ทุกครั้งเมื่อมีข้อจำกัดของคีย์นอกในฐานข้อมูลอยู่ระหว่างสองตาราง</span><span class="sxs-lookup"><span data-stu-id="b8741-227">Always enable this property when a database foreign key constraint exists between the two tables.</span></span> <span data-ttu-id="b8741-228">เมื่อไม่มีข้อจำกัดของคีย์นอก คุณยังคงสามารถเปิดใช้งานคุณสมบัติที่ให้คุณมีความสมบูรณ์ของข้อมูลบางอย่างอยู่ได้</span><span class="sxs-lookup"><span data-stu-id="b8741-228">When a foreign key constraint doesn't exist, you can still enable the property as long as you're certain data integrity exists.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="b8741-229">ถ้าความสมบูรณ์ของข้อมูลลดลง INNER JOIN จะตัดแถวที่ไม่ตรงกันระหว่างตาราง</span><span class="sxs-lookup"><span data-stu-id="b8741-229">If data integrity should become compromised, the inner join will eliminate unmatched rows between the tables.</span></span> <span data-ttu-id="b8741-230">ตัวอย่างเช่น พิจารณาแบบจำลองตาราง **ยอดขาย** ที่มีค่าคอลัมน์ **ProductID** ซึ่งไม่มีอยู่ในตาราง **ผลิตภัณฑ์** ที่เชื่อมโยง</span><span class="sxs-lookup"><span data-stu-id="b8741-230">For example, consider a model **Sales** table with a **ProductID** column value that did not exist in the related **Product** table.</span></span> <span data-ttu-id="b8741-231">การเผยแพร่ตัวกรองจากตาราง **ผลิตภัณฑ์** ไปยังตาราง **ยอดขาย** จะกำจัดแถวยอดขายสำหรับผลิตภัณฑ์ที่ไม่รู้จัก</span><span class="sxs-lookup"><span data-stu-id="b8741-231">Filter propagation from the **Product** table to the **Sales** table will eliminate sales rows for unknown products.</span></span> <span data-ttu-id="b8741-232">ซึ่งจะส่งผลให้คำกล่าวถึงผลลัพธ์ยอดขายน้อยไปกว่าความจริง</span><span class="sxs-lookup"><span data-stu-id="b8741-232">This would result in an understatement of the sales results.</span></span>
>
> <span data-ttu-id="b8741-233">สำหรับข้อมูลเพิ่มเติม โปรดดูบทความ[การตั้งค่าสมมติว่ามีความสมบูรณ์ของการอ้างอิง ใน Power BI Desktop](../connect-data/desktop-assume-referential-integrity.md)</span><span class="sxs-lookup"><span data-stu-id="b8741-233">For more information, see the [Assume referential integrity settings in Power BI Desktop](../connect-data/desktop-assume-referential-integrity.md) article.</span></span>

## <a name="relevant-dax-functions"></a><span data-ttu-id="b8741-234">ฟังก์ชัน DAX ที่เกี่ยวข้อง</span><span class="sxs-lookup"><span data-stu-id="b8741-234">Relevant DAX functions</span></span>

<span data-ttu-id="b8741-235">มีฟังก์ชัน DAX มากมายที่เกี่ยวข้องกับความสัมพันธ์ของแบบจำลอง</span><span class="sxs-lookup"><span data-stu-id="b8741-235">There are several DAX functions that are relevant to model relationships.</span></span> <span data-ttu-id="b8741-236">มีการอธิบายแต่ละฟังก์ชันโดยย่อในรายการหัวข้อย่อยต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="b8741-236">Each function is described briefly in the following bulleted list:</span></span>

- <span data-ttu-id="b8741-237">[RELATED](/dax/related-function-dax): ดึงค่าจากด้าน "หนึ่ง"</span><span class="sxs-lookup"><span data-stu-id="b8741-237">[RELATED](/dax/related-function-dax): Retrieves the value from "one" side.</span></span>
- <span data-ttu-id="b8741-238">[RELATEDTABLE](/dax/relatedtable-function-dax): ดึงข้อมูลตารางของแถวจากด้าน "กลุ่ม"</span><span class="sxs-lookup"><span data-stu-id="b8741-238">[RELATEDTABLE](/dax/relatedtable-function-dax): Retrieve a table of rows from "many" side.</span></span>
- <span data-ttu-id="b8741-239">[USERELATIONSHIP](/dax/userelationship-function-dax): บังคับให้ใช้ความสัมพันธ์ของแบบจำลองที่ไม่ใช้งานแบบเฉพาะเจาะจง</span><span class="sxs-lookup"><span data-stu-id="b8741-239">[USERELATIONSHIP](/dax/userelationship-function-dax): Forces the use of a specific inactive model relationship.</span></span>
- <span data-ttu-id="b8741-240">[CROSSFILTER](/dax/crossfilter-function): ปรับเปลี่ยนทิศทางตัวกรองข้ามของความสัมพันธ์ (เป็นหนึ่งหรือทั้งสอง) หรือปิดใช้งานการเผยแพร่ตัวกรอง (ไม่มี)</span><span class="sxs-lookup"><span data-stu-id="b8741-240">[CROSSFILTER](/dax/crossfilter-function): Modifies the relationship cross filter direction (to one or both), or it disables filter propagation (none).</span></span>
- <span data-ttu-id="b8741-241">[COMBINEVALUES](/dax/combinevalues-function-dax): รวมสตริงข้อความสองรายการขึ้นไปเป็นสตริงข้อความเดียว</span><span class="sxs-lookup"><span data-stu-id="b8741-241">[COMBINEVALUES](/dax/combinevalues-function-dax): Joins two or more text strings into one text string.</span></span> <span data-ttu-id="b8741-242">วัตถุประสงค์ของฟังก์ชันนี้คือการสนับสนุนความสัมพันธ์ที่มีหลายคอลัมน์ในแบบจำลอง DirectQuery</span><span class="sxs-lookup"><span data-stu-id="b8741-242">The purpose of this function is to support multi-column relationships in DirectQuery models.</span></span>
- <span data-ttu-id="b8741-243">[TREATAS](/dax/treatas-function): ใช้ผลลัพธ์ของนิพจน์ตารางเป็นตัวกรองคอลัมน์จากตารางที่ไม่เชื่อมโยง</span><span class="sxs-lookup"><span data-stu-id="b8741-243">[TREATAS](/dax/treatas-function): Applies the result of a table expression as filters to columns from an unrelated table.</span></span>
- <span data-ttu-id="b8741-244">[ฟังก์ชันหลักและรอง](/dax/parent-and-child-functions-dax): ตระกูลของฟังก์ชันที่เกี่ยวข้องที่สามารถใช้ในการสร้างคอลัมน์จากการคำนวณเพื่อทำให้ลำดับชั้นแบบพ่อ-ลูก เป็นธรรมชาติ</span><span class="sxs-lookup"><span data-stu-id="b8741-244">[Parent and Child functions](/dax/parent-and-child-functions-dax): A family of related functions that can be used to generate calculated columns to naturalize a parent-child hierarchy.</span></span> <span data-ttu-id="b8741-245">จากนั้นคุณสามารถใช้คอลัมน์เหล่านี้เพื่อสร้างลำดับชั้นแบบคงที่ได้</span><span class="sxs-lookup"><span data-stu-id="b8741-245">These columns can then be used to create a fixed-level hierarchy.</span></span>

## <a name="relationship-evaluation"></a><span data-ttu-id="b8741-246">การประเมินผลความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="b8741-246">Relationship evaluation</span></span>

<span data-ttu-id="b8741-247">ความสัมพันธ์ของแบบจำลองจากมุมมองของการประเมิน จะถูกจัดประเภทเป็น _แบบธรรมดา_ หรือ _แบบจำกัด_</span><span class="sxs-lookup"><span data-stu-id="b8741-247">Model relationships, from an evaluation perspective, are classified as either _regular_ or _limited_.</span></span> <span data-ttu-id="b8741-248">นี่ไม่ใช่คุณสมบัติความสัมพันธ์ที่สามารถกำหนดค่าได้</span><span class="sxs-lookup"><span data-stu-id="b8741-248">It's not a configurable relationship property.</span></span> <span data-ttu-id="b8741-249">ซึ่งเป็นข้อเท็จจริงที่อนุมานจากประเภทของคาร์ดินาลลิตี้ และแหล่งข้อมูลของตารางที่เชื่อมโยงทั้งสอง</span><span class="sxs-lookup"><span data-stu-id="b8741-249">It is in fact inferred from the cardinality type and the data source of the two related tables.</span></span> <span data-ttu-id="b8741-250">สิ่งสำคัญคือต้องเข้าใจชนิดการประเมินผลเนื่องจากอาจมีผลกระทบต่อประสิทธิภาพการทำงานหรือผลที่ตามมาหากความสมบูรณ์ของข้อมูลลดลง</span><span class="sxs-lookup"><span data-stu-id="b8741-250">It's important to understand the evaluation type because there may be performance implications or consequences should data integrity be compromised.</span></span> <span data-ttu-id="b8741-251">ผลกระทบและผลที่ตามมาจากความสมบูรณ์เหล่านี้จะอธิบายไว้ในหัวข้อนี้</span><span class="sxs-lookup"><span data-stu-id="b8741-251">These implications and integrity consequences are described in this topic.</span></span>

<span data-ttu-id="b8741-252">ก่อนอื่นคุณจำเป็นต้องมีทฤษฎีการสร้างแบบจำลองบางอย่างเพื่อทำความเข้าใจการประเมินผลความสัมพันธ์อย่างสมบูรณ์</span><span class="sxs-lookup"><span data-stu-id="b8741-252">First, some modeling theory is required to fully understand relationship evaluations.</span></span>

<span data-ttu-id="b8741-253">สำหรับแหล่งที่มาของแบบจำลองนำเข้าหรือ DirectQuery ข้อมูลทั้งหมดมาจากแคช Vertipaq หรือฐานข้อมูลต้นทาง</span><span class="sxs-lookup"><span data-stu-id="b8741-253">An Import or DirectQuery model sources all of its data from either the Vertipaq cache or the source database.</span></span> <span data-ttu-id="b8741-254">ในทั้งสองอินสแตนซ์ Power BI สามารถระบุได้ว่ามีด้าน "หนึ่ง" ของความสัมพันธ์อยู่</span><span class="sxs-lookup"><span data-stu-id="b8741-254">In both instances, Power BI is able to determine that a "one" side of a relationship exists.</span></span>

<span data-ttu-id="b8741-255">แบบจำลองผสมสามารถประกอบด้วยตารางที่มาจากการใช้โหมดที่เก็บข้อมูลที่แตกต่างกัน (นำเข้า DirectQuery หรือคู่) หรือแหล่ง DirectQuery หลายแหล่ง</span><span class="sxs-lookup"><span data-stu-id="b8741-255">A Composite model, however, can comprise tables using different storage modes (Import, DirectQuery or Dual), or multiple DirectQuery sources.</span></span> <span data-ttu-id="b8741-256">แหล่งที่มาแต่ละแห่ง รวมถึงแคช Vertipaq ของข้อมูลนำเข้านั้นถือว่าเป็น _กลุ่มแหล่งข้อมูล_</span><span class="sxs-lookup"><span data-stu-id="b8741-256">Each source, including the Vertipaq cache of Import data, is considered to be a _source group_.</span></span> <span data-ttu-id="b8741-257">คุณสามารถจัดประเภทความสัมพันธ์ของแบบจำลองเป็น _แบบภายในกลุ่มแหล่งข้อมูล_ หรือ _แบบระหว่าง/ข้ามแหล่งข้อมูล_ ได้</span><span class="sxs-lookup"><span data-stu-id="b8741-257">Model relationships can then be classified as _intra source group_ or _inter / cross source group_.</span></span> <span data-ttu-id="b8741-258">ความสัมพันธ์แบบภายในกลุ่มแหล่งข้อมูลคือความสัมพันธ์ที่เกี่ยวข้องกับตารางสองตารางภายในกลุ่มแหล่งข้อมูล ในขณะที่ความสัมพันธ์แบบระหว่าง/ข้ามแหล่งข้อมูลเกี่ยวข้องกับตารางจากกลุ่มแหล่งข้อมูลที่แตกต่างกัน</span><span class="sxs-lookup"><span data-stu-id="b8741-258">An intra source group relationship is one that relates two tables within a source group, while a inter / cross source group relationship relates tables from different source group.</span></span> <span data-ttu-id="b8741-259">โปรดทราบว่าความสัมพันธ์ในแบบจำลอง Import หรือ DirectQuery นั้นเป็นแบบภายในกลุ่มแหล่งข้อมูลเสมอ</span><span class="sxs-lookup"><span data-stu-id="b8741-259">Note that relationships in Import or DirectQuery models are always intra source group.</span></span>

<span data-ttu-id="b8741-260">มาดูตัวอย่างของแบบจำลองผสมกัน</span><span class="sxs-lookup"><span data-stu-id="b8741-260">Let's see an example of a Composite model.</span></span>

:::image type="content" source="media/desktop-relationships-understand/source-group-example.png" alt-text="ตัวอย่างแบบจำลองผสมที่ประกอบด้วยกลุ่มแหล่งข้อมูลสองกลุ่ม":::

<span data-ttu-id="b8741-262">ในตัวอย่างนี้ แบบจำลองผสมประกอบด้วยกลุ่มแหล่งข้อมูลสองกลุ่ม: กลุ่มแหล่งข้อมูล Vertipaq และกลุ่มแหล่งข้อมูล DirectQuery</span><span class="sxs-lookup"><span data-stu-id="b8741-262">In this example, the Composite model consists of two source groups: a Vertipaq source group and a DirectQuery source group.</span></span> <span data-ttu-id="b8741-263">กลุ่มแหล่งข้อมูล Vertipaq มีสามตาราง และกลุ่มแหล่งข้อมูล DirectQuery มีสองตาราง</span><span class="sxs-lookup"><span data-stu-id="b8741-263">The Vertipaq source group contains three tables, and the DirectQuery source group contains two tables.</span></span> <span data-ttu-id="b8741-264">มีความสัมพันธ์แบบข้ามกลุ่มแหล่งข้อมูลหนึ่งความสัมพันธ์เพื่อเชื่อมโยงตารางในกลุ่มแหล่งข้อมูล Vertipaq ไปยังตารางในกลุ่มแหล่งข้อมูล DirectQuery</span><span class="sxs-lookup"><span data-stu-id="b8741-264">One cross source group relationship exists to relate a table in the Vertipaq source group to a table in the DirectQuery source group.</span></span>

### <a name="regular-relationships"></a><span data-ttu-id="b8741-265">ความสัมพันธ์แบบธรรมดา</span><span class="sxs-lookup"><span data-stu-id="b8741-265">Regular relationships</span></span>

<span data-ttu-id="b8741-266">ความสัมพันธ์ของแบบจำลองเป็น _แบบธรรมดา_ เมื่อกลไกจัดการคิวรีสามารถกำหนดความสัมพันธ์ด้าน "หนึ่ง" ได้</span><span class="sxs-lookup"><span data-stu-id="b8741-266">A model relationship is _regular_ when the query engine can determine the "one" side of relationship.</span></span> <span data-ttu-id="b8741-267">ซึ่งมีการยืนยันว่าคอลัมน์ด้าน "หนึ่ง" ประกอบด้วยค่าที่ไม่ซ้ำกัน</span><span class="sxs-lookup"><span data-stu-id="b8741-267">It has confirmation that the "one" side column contains unique values.</span></span> <span data-ttu-id="b8741-268">ความสัมพันธ์แบบภายในกลุ่มแหล่งข้อมูลชนิดหนึ่งต่อกลุ่มทั้งหมดมีความสัมพันธ์แบบปกติ</span><span class="sxs-lookup"><span data-stu-id="b8741-268">All One-to-many intra source group relationships are regular relationships.</span></span>

<span data-ttu-id="b8741-269">ในตัวอย่างต่อไปนี้ มีความสัมพันธ์แบบปกติสองความสัมพันธ์ ซึ่งทั้งสองมีเครื่องหมายเป็น **R** ความสัมพันธ์ดังกล่าวประกอบรวมด้วย ความสัมพันธ์แบบหนึ่งต่อกลุ่มที่อยู่ภายในกลุ่มแหล่งข้อมูล Vertipaq และความสัมพันธ์แบบหนึ่งต่อกลุ่มที่อยู่ภายในแหล่งข้อมูล DirectQuery</span><span class="sxs-lookup"><span data-stu-id="b8741-269">In the following example, there are two regular relationships, both marked as **R**. Relationships include the One-to-many relationship contained within the Vertipaq source group, and the One-to-many relationship contained within the DirectQuery source.</span></span>

:::image type="content" source="media/desktop-relationships-understand/source-group-example-regular.png" alt-text="ตัวอย่างของแบบจำลองผสมที่ประกอบด้วยข้อมูลจากสองกลุ่มแหล่งข้อมูล ซึ่งมีเครื่องหมายความสัมพันธ์แบบธรรมดาที่ถูกทำเครื่องหมาย":::

<span data-ttu-id="b8741-271">สำหรับแบบจำลองที่นำเข้า เมื่อข้อมูลทั้งหมดเก็บอยู่ในแคช Vertipaq โครงสร้างข้อมูลจะถูกสร้างขึ้นสำหรับความสัมพันธ์แบบธรรมดาสำหรับแต่ละความสัมพันธ์เมื่อมีการรีเฟรชข้อมูล</span><span class="sxs-lookup"><span data-stu-id="b8741-271">For Import models, where all data is stored in the Vertipaq cache, a data structure is created for each regular relationship at data refresh time.</span></span> <span data-ttu-id="b8741-272">โครงสร้างข้อมูลประกอบด้วยการแมปที่มีการจัดทำดัชนีของค่าคอลัมน์ต่อคอลัมน์ทั้งหมดและวัตถุประสงค์ของพวกเขาคือ เพื่อเร่งความเร็วในการรวมตารางในเวลาที่มีการคิวรี</span><span class="sxs-lookup"><span data-stu-id="b8741-272">The data structures consist of indexed mappings of all column-to-column values, and their purpose is to accelerate joining tables at query time.</span></span>

<span data-ttu-id="b8741-273">ในเวลาที่มีการคิวรี ความสัมพันธ์ที่แบบธรรมดาจะอนุญาตให้มี _การขยายตาราง_ ให้เกิดขึ้น</span><span class="sxs-lookup"><span data-stu-id="b8741-273">At query time, regular relationships permit _table expansion_ to take place.</span></span> <span data-ttu-id="b8741-274">ผลลัพธ์การขยายตารางในการสร้างตารางเสมือนโดยรวมคอลัมน์ดั้งเดิมของตารางฐานและขยายไปยังตารางที่เชื่อมโยง</span><span class="sxs-lookup"><span data-stu-id="b8741-274">Table expansion results in the creation of a virtual table by including the native columns of the base table and then expanding into related tables.</span></span> <span data-ttu-id="b8741-275">สำหรับการนำเข้าตารางนี้จะทำในกลไกจัดการคิวรี สำหรับตาราง DirectQuery จะทำในเนทีฟคิวรีที่ส่งไปยังฐานข้อมูลต้นทาง (โดยที่ไม่ได้เปิดใช้งานคุณสมบัติ "**สมมติว่ามีความสมบูรณ์ของการอ้างอิง**")</span><span class="sxs-lookup"><span data-stu-id="b8741-275">For Import tables, it's done in the query engine; for DirectQuery tables it is done in the native query sent to the source database (as long as the **Assume referential integrity** property isn't enabled).</span></span> <span data-ttu-id="b8741-276">กลไกจัดการคิวรีจะดำเนินการตามตารางที่ขยาย โดยใช้ตัวกรองและการจัดกลุ่มตามค่าในคอลัมน์ของตารางที่ขยาย</span><span class="sxs-lookup"><span data-stu-id="b8741-276">The query engine then acts upon the expanded table, applying filters and grouping by the values in the expanded table columns.</span></span>

> [!NOTE]
> <span data-ttu-id="b8741-277">ความสัมพันธ์ที่ไม่ได้ใช้งานจะขยายด้วย แม้ว่าการคำนวณจะไม่ใช้ความสัมพันธ์นี้ก็ตาม</span><span class="sxs-lookup"><span data-stu-id="b8741-277">Inactive relationships are expanded also, even when the relationship isn't used by a calculation.</span></span> <span data-ttu-id="b8741-278">ความสัมพันธ์แบบสองทิศทางไม่มีผลกระทบต่อการขยายตาราง</span><span class="sxs-lookup"><span data-stu-id="b8741-278">Bi-directional relationships have no impact on table expansion.</span></span>

<span data-ttu-id="b8741-279">การขยายตารางจะเกิดขึ้นจากด้าน "กลุ่ม" ไปยังด้าน "หนึ่ง" โดยใช้ตรรกะ LEFT OUTER JOIN</span><span class="sxs-lookup"><span data-stu-id="b8741-279">For One-to-many relationships, table expansion takes place from the "many" to the "one" sides by using LEFT OUTER JOIN semantics.</span></span> <span data-ttu-id="b8741-280">เมื่อไม่มีค่าที่จับคู่กันจากด้าน "กลุ่ม" ไปยังด้าน "หนึ่ง" แถวเสมือนที่ว่างเปล่าจะถูกเพิ่มลงในตารางด้าน "หนึ่ง"</span><span class="sxs-lookup"><span data-stu-id="b8741-280">When a matching value from the "many" to the "one" side doesn't exist, a blank virtual row is added to the "one" side table.</span></span>

<span data-ttu-id="b8741-281">การขยายตารางยังเกิดขึ้นสำหรับความสัมพันธ์แบบภายในกลุ่มแหล่งข้อมูลชนิดหนึ่งต่อหนึ่ง แต่โดยใช้ตรรกะ FULL OUTER JOIN</span><span class="sxs-lookup"><span data-stu-id="b8741-281">Table expansion also occurs for One-to-one intra source group relationships, but by using FULL OUTER JOIN semantics.</span></span> <span data-ttu-id="b8741-282">ตรวจสอบให้แน่ใจว่ามีการเพิ่มแถวเสมือนที่ว่างเปล่าในด้านใดด้านหนึ่ง เมื่อจำเป็น</span><span class="sxs-lookup"><span data-stu-id="b8741-282">It ensures that blank virtual rows are added on either side, when necessary.</span></span>

<span data-ttu-id="b8741-283">แถวเสมือนที่ว่างเปล่าเป็น _สมาชิกที่ไม่รู้จัก_ อย่างมีประสิทธิภาพ</span><span class="sxs-lookup"><span data-stu-id="b8741-283">The blank virtual rows are effectively _Unknown Members_.</span></span> <span data-ttu-id="b8741-284">สมาชิกที่ไม่รู้จักแสดงถึงการละเมิดความสมบูรณ์ของการอ้างอิงที่ค่าด้าน "กลุ่ม" ไม่มีค่าด้าน "หนึ่ง" ที่สอดคล้องกัน</span><span class="sxs-lookup"><span data-stu-id="b8741-284">Unknown members represent referential integrity violations where the "many" side value has no corresponding "one" side value.</span></span> <span data-ttu-id="b8741-285">ในทางอุดมคติแล้วไม่ควรมีช่องว่างเหล่านี้ และเราสามารถกำจัดช่องว่างได้โดยการทำความสะอาดหรือซ่อมแซมข้อมูลต้นฉบับ</span><span class="sxs-lookup"><span data-stu-id="b8741-285">Ideally these blanks should not exist, and they can be eliminated by cleansing or repairing the source data.</span></span>

<span data-ttu-id="b8741-286">มาดูกันว่าการขยายตารางทำงานอย่างไรด้วยตัวอย่างแบบเคลื่อนไหว</span><span class="sxs-lookup"><span data-stu-id="b8741-286">Let's see how table expansion works with an animated example.</span></span>

:::image type="content" source="media/desktop-relationships-understand/animation-expanded-table.gif" alt-text="ตัวอย่างแบบเคลื่อนไหวของการขยายตาราง":::

<span data-ttu-id="b8741-288">ในตัวอย่างนี้ แบบจำลองประกอบด้วยสามตาราง: **หมวดหมู่** **ผลิตภัณฑ์** และ **ยอดขาย**</span><span class="sxs-lookup"><span data-stu-id="b8741-288">In this example, the model consists of three tables: **Category**, **Product**, and **Sales**.</span></span> <span data-ttu-id="b8741-289">ตาราง **หมวดหมู่** เชื่อมโยงกับตาราง **ผลิตภัณฑ์** ด้วยความสัมพันธ์แบบหนึ่งต่อกลุ่ม และตาราง **ผลิตภัณฑ์** เชื่อมโยงกับตาราง **ยอดขาย** ด้วยความสัมพันธ์แบบหนึ่งต่อกลุ่ม</span><span class="sxs-lookup"><span data-stu-id="b8741-289">The **Category** table relates to the **Product** table with a One-to-many relationship, and the **Product** table relates to the **Sales** table with a One-to-many relationship.</span></span> <span data-ttu-id="b8741-290">ตาราง **หมวดหมู่** มีสองแถว ตาราง **ผลิตภัณฑ์** มีสามแถว และตาราง **ยอดขาย** มีห้าแถว</span><span class="sxs-lookup"><span data-stu-id="b8741-290">The **Category** table contains two rows, the **Product** table contains three rows, and the **Sales** tables contains five rows.</span></span> <span data-ttu-id="b8741-291">ถ้ามีค่าที่จับคู่กันบนด้านทั้งสองของความสัมพันธ์ทั้งหมด หมายความว่าไม่มีการละเมิดความสมบูรณ์ของการอ้างอิง</span><span class="sxs-lookup"><span data-stu-id="b8741-291">There are matching values on both sides of all relationships meaning that there are no referential integrity violations.</span></span> <span data-ttu-id="b8741-292">ตารางที่ขยายในเวลาที่มีการคิวรีจะเปิดเผยออกมา</span><span class="sxs-lookup"><span data-stu-id="b8741-292">A query-time expanded table is revealed.</span></span> <span data-ttu-id="b8741-293">ตารางประกอบด้วยคอลัมน์จากทั้งสามตาราง</span><span class="sxs-lookup"><span data-stu-id="b8741-293">The table consists of the columns from all three tables.</span></span> <span data-ttu-id="b8741-294">ซึ่งเป็นมุมมองดีนอร์มอลไลของข้อมูลที่มีอยู่ในสามตารางอย่างมีประสิทธิภาพ</span><span class="sxs-lookup"><span data-stu-id="b8741-294">It's effectively a denormalized perspective of the data contained in the three tables.</span></span> <span data-ttu-id="b8741-295">แถวใหม่ถูกเพิ่มในตาราง **ยอดขาย** และมีค่าตัวระบุการผลิต (9) ซึ่งไม่มีค่าที่จับคู่กันในตาราง **ผลิตภัณฑ์**</span><span class="sxs-lookup"><span data-stu-id="b8741-295">A new row is added to the **Sales** table, and it has a production identifier value (9) that has no matching value in the **Product** table.</span></span> <span data-ttu-id="b8741-296">นี่เป็นการละเมิดความสมบูรณ์ของการอ้างอิง</span><span class="sxs-lookup"><span data-stu-id="b8741-296">It's a referential integrity violation.</span></span> <span data-ttu-id="b8741-297">ในตารางที่ขยาย แถวใหม่จะมีค่า (ว่าง) สำหรับคอลัมน์ของตาราง **หมวดหมู่** และ **ผลิตภัณฑ์**</span><span class="sxs-lookup"><span data-stu-id="b8741-297">In the expanded table, the new row has (Blank) values for the **Category** and **Product** table columns.</span></span>

### <a name="limited-relationships"></a><span data-ttu-id="b8741-298">ความสัมพันธ์แบบจำกัด</span><span class="sxs-lookup"><span data-stu-id="b8741-298">Limited relationships</span></span>

<span data-ttu-id="b8741-299">ความสัมพันธ์ของแบบจำลองเป็น _แบบจำกัด_ เมื่อไม่มีการรับประกันว่ามีด้าน "หนึ่ง"</span><span class="sxs-lookup"><span data-stu-id="b8741-299">A model relationship is _limited_ when there's no guaranteed "one" side.</span></span> <span data-ttu-id="b8741-300">ซึ่งอาจเป็นไปได้ด้วยเหตุผลสองประการ:</span><span class="sxs-lookup"><span data-stu-id="b8741-300">It can be the case for two reasons:</span></span>

- <span data-ttu-id="b8741-301">ความสัมพันธ์ใช้ประเภทของคาร์ดินาลลิตี้แบบกลุ่มต่อกลุ่ม (แม้ว่าหนึ่งคอลัมน์หรือทั้งสองคอลัมน์ประกอบด้วยค่าที่ไม่ซ้ำกัน)</span><span class="sxs-lookup"><span data-stu-id="b8741-301">The relationship uses a Many-to-many cardinality type (even if one or both columns contain unique values)</span></span>
- <span data-ttu-id="b8741-302">ความสัมพันธ์เป็นแบบข้ามกลุ่มแหล่งข้อมูล (ซึ่งจะเป็นได้เฉพาะสำหรับแบบจำลองผสมเท่านั้น)</span><span class="sxs-lookup"><span data-stu-id="b8741-302">The relationship is cross source group (which can only ever be the case for Composite models)</span></span>

<span data-ttu-id="b8741-303">ในตัวอย่างต่อไปนี้ มีความสัมพันธ์แบบจำกัดสองความสัมพันธ์ ซึ่งทั้งสองมีเครื่องหมายเป็น **L** ความสัมพันธ์สองความสัมพันธ์ประกอบรวมด้วย ความสัมพันธ์แบบกลุ่มต่อกลุ่มที่อยู่ภายในกลุ่มแหล่งข้อมูล Vertipaq และความสัมพันธ์แบบข้ามกลุ่มแหล่งข้อมูลชนิดหนึ่งต่อกลุ่ม</span><span class="sxs-lookup"><span data-stu-id="b8741-303">In the following example, there are two limited relationships, both marked as **L**. The two relationships include the Many-to-many relationship contained within the Vertipaq source group, and the One-to-many cross source group relationship.</span></span>

:::image type="content" source="media/desktop-relationships-understand/source-group-example-limited.png" alt-text="ตัวอย่างของแบบจำลองผสมที่ประกอบด้วยข้อมูลจากสองกลุ่มแหล่งข้อมูล ซึ่งมีเครื่องหมายความสัมพันธ์แบบจำกัดที่ถูกทำเครื่องหมาย":::

<span data-ttu-id="b8741-305">สำหรับแบบจำลองที่นำเข้า โครงสร้างข้อมูลจะไม่ถูกสร้างขึ้นสำหรับความสัมพันธ์แบบจำกัด</span><span class="sxs-lookup"><span data-stu-id="b8741-305">For Import models, data structures are never created for limited relationships.</span></span> <span data-ttu-id="b8741-306">ซึ่งหมายความว่าการรวมตารางจะต้องได้รับการแก้ไขในเวลาที่มีการคิวรี</span><span class="sxs-lookup"><span data-stu-id="b8741-306">This means table joins must be resolved at query time.</span></span>

<span data-ttu-id="b8741-307">การขยายตารางจะไม่เกิดขึ้นเลยสำหรับความสัมพันธ์แบบจำกัด</span><span class="sxs-lookup"><span data-stu-id="b8741-307">Table expansion never occurs for limited relationships.</span></span> <span data-ttu-id="b8741-308">การรวมตารางทำได้โดยใช้ตรรกะ INNER JOIN และด้วยเหตุนี้แถวเสมือนที่ว่างเปล่าจะไม่ถูกเพิ่มเพื่อชดเชยการละเมิดความสมบูรณ์ของการอ้างอิง</span><span class="sxs-lookup"><span data-stu-id="b8741-308">Table joins are achieved by using INNER JOIN semantics, and for this reason, blank virtual rows are not added to compensate for referential integrity violations.</span></span>

<span data-ttu-id="b8741-309">มีข้อจำกัดเพิ่มเติมที่เกี่ยวข้องกับความสัมพันธ์แบบจำกัด:</span><span class="sxs-lookup"><span data-stu-id="b8741-309">There are additional restrictions related to limited relationships:</span></span>

- <span data-ttu-id="b8741-310">ไม่สามารถใช้ฟังก์ชัน RELATED DAX เพื่อดึงค่าคอลัมน์ด้าน "หนึ่ง" ได้</span><span class="sxs-lookup"><span data-stu-id="b8741-310">The RELATED DAX function can't be used to retrieve the "one" side column values</span></span>
- <span data-ttu-id="b8741-311">การบังคับใช้ RLS มีข้อจำกัดของโทโพโลยี</span><span class="sxs-lookup"><span data-stu-id="b8741-311">Enforcing RLS has topology restrictions</span></span>

> [!NOTE]
> <span data-ttu-id="b8741-312">ในมุมมองแบบจำลอง Power BI Desktop จะไม่มีทางตรวจสอบได้ว่าความสัมพันธ์ของแบบจำลองนั้นเป็นแบบธรรมดาหรือแบบจำกัด</span><span class="sxs-lookup"><span data-stu-id="b8741-312">In Power BI Desktop model view, it's not always possible to determine whether a model relationship is regular or limited.</span></span> <span data-ttu-id="b8741-313">ความสัมพันธ์แบบกลุ่มต่อกลุ่มมักจะเป็นแบบจำกัดเสมอ เนื่องจากเป็นความสัมพันธ์แบบหนึ่งต่อกลุ่มเมื่อเป็นความสัมพันธ์แบบข้ามกลุ่มแหล่งข้อมูล</span><span class="sxs-lookup"><span data-stu-id="b8741-313">A Many-to-many relationship will always be limited, as is a One-to-many relationship when it's a cross source group relationship.</span></span> <span data-ttu-id="b8741-314">หากต้องการตรวจสอบว่าเป็นความสัมพันธ์แบบข้ามกลุ่มแหล่งข้อมูลหรือไม่ คุณจะต้องตรวจสอบโหมดที่เก็บข้อมูลและแหล่งข้อมูลของตารางเพื่อให้ได้มาซึ่งการตัดสินที่ถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="b8741-314">To determine whether it's a cross source group relationship, you'll need to inspect the table storage modes and data sources to arrive at the correct determination.</span></span>

### <a name="precedence-rules"></a><span data-ttu-id="b8741-315">กฎที่กำหนดความสำคัญ</span><span class="sxs-lookup"><span data-stu-id="b8741-315">Precedence rules</span></span>

<span data-ttu-id="b8741-316">ความสัมพันธ์แบบสองทิศทางสามารถนำ—และเนื่องจากเส้นทางที่ไม่ชัดเจน—เส้นทางการเผยแพร่ตัวกรองระหว่างตารางแบบจำลองเข้ามาได้หลายเส้นทาง</span><span class="sxs-lookup"><span data-stu-id="b8741-316">Bi-directional relationships can introduce multiple—and therefore ambiguous—filter propagation paths between model tables.</span></span> <span data-ttu-id="b8741-317">รายการต่อไปนี้แสดงกฎที่กำหนดความสำคัญซึ่ง Power BI ใช้สำหรับการตรวจหาความคลุมเครือและการแก้ปัญหาเส้นทาง:</span><span class="sxs-lookup"><span data-stu-id="b8741-317">The following list presents precedence rules that Power BI uses for ambiguity detection and path resolution:</span></span>

1. <span data-ttu-id="b8741-318">ความสัมพันธ์แบบกลุ่มต่อหนึ่งและแบบหนึ่งต่อหนึ่ง รวมถึงความสัมพันธ์แบบจำกัด</span><span class="sxs-lookup"><span data-stu-id="b8741-318">Many-to-one and One-to-one relationships, including limited relationships</span></span>
2. <span data-ttu-id="b8741-319">ความสัมพันธ์แบบกลุ่มต่อกลุ่ม</span><span class="sxs-lookup"><span data-stu-id="b8741-319">Many-to-many relationships</span></span>
3. <span data-ttu-id="b8741-320">ความสัมพันธ์แบบสองทิศทาง ในทิศทางย้อนกลับ (เช่น จากด้าน "กลุ่ม")</span><span class="sxs-lookup"><span data-stu-id="b8741-320">Bi-directional relationships, in the reverse direction (that is, from the "Many" side)</span></span>

### <a name="performance-preference"></a><span data-ttu-id="b8741-321">การกำหนดลักษณะประสิทธิภาพ</span><span class="sxs-lookup"><span data-stu-id="b8741-321">Performance preference</span></span>

<span data-ttu-id="b8741-322">รายการต่อไปนี้เรียงลำดับประสิทธิภาพการเผยแพร่ตัวกรอง จากงประสิทธิภาพเร็วที่สุดไปยังช้าที่สุด:</span><span class="sxs-lookup"><span data-stu-id="b8741-322">The following list orders filter propagation performance, from fastest to slowest performance:</span></span>

1. <span data-ttu-id="b8741-323">ความสัมพันธ์แบบภายในกลุ่มแหล่งข้อมูลชนิดหนึ่งต่อกลุ่ม</span><span class="sxs-lookup"><span data-stu-id="b8741-323">One-to-many intra source group relationships</span></span>
2. <span data-ttu-id="b8741-324">ความสัมพันธ์ของคาร์ดินาลลิตี้แบบกลุ่มต่อกลุ่ม</span><span class="sxs-lookup"><span data-stu-id="b8741-324">Many-to-many cardinality relationships</span></span>
3. <span data-ttu-id="b8741-325">ความสัมพันธ์ของแบบจำลองแบบกลุ่มต่อกลุ่มทำได้ด้วยตารางตัวกลางและเกี่ยวโยงกับความสัมพันธ์แบบสองทิศทางอย่างน้อยหนึ่งความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="b8741-325">Many-to-many model relationships achieved with an intermediary table and that involves at least one bi-directional relationship</span></span>
4. <span data-ttu-id="b8741-326">ความสัมพันธ์แบบข้ามกลุ่มแหล่งข้อมูล</span><span class="sxs-lookup"><span data-stu-id="b8741-326">Cross source group relationships</span></span>

## <a name="next-steps"></a><span data-ttu-id="b8741-327">ขั้นตอนถัดไป</span><span class="sxs-lookup"><span data-stu-id="b8741-327">Next steps</span></span>

<span data-ttu-id="b8741-328">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับบทความนี้ โปรดดูทรัพยากรต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="b8741-328">For more information about this article, check out the following resources:</span></span>

- [<span data-ttu-id="b8741-329">ทำความเข้าใจแบบจำลองมิติที่มีลักษณะคล้ายดาวและความสำคัญที่มีต่อ Power BI</span><span class="sxs-lookup"><span data-stu-id="b8741-329">Understand star schema and the importance for Power BI</span></span>](../guidance/star-schema.md)
- [<span data-ttu-id="b8741-330">คำแนะนำความสัมพันธ์แบบหนึ่งต่อหนึ่ง</span><span class="sxs-lookup"><span data-stu-id="b8741-330">One-to-one relationship guidance</span></span>](../guidance/relationships-one-to-one.md)
- [<span data-ttu-id="b8741-331">คำแนะนำความสัมพันธ์แบบกลุ่มต่อกลุ่ม</span><span class="sxs-lookup"><span data-stu-id="b8741-331">Many-to-many relationship guidance</span></span>](../guidance/relationships-many-to-many.md)
- [<span data-ttu-id="b8741-332">ความสัมพันธ์ระหว่างที่ใช้งานอยู่และไม่ได้ใช้งาน</span><span class="sxs-lookup"><span data-stu-id="b8741-332">Active vs inactive relationship guidance</span></span>](../guidance/relationships-active-inactive.md)
- [<span data-ttu-id="b8741-333">คำแนะนำความสัมพันธ์แบบสองทิศทาง</span><span class="sxs-lookup"><span data-stu-id="b8741-333">Bi-directional relationship guidance</span></span>](../guidance/relationships-bidirectional-filtering.md)
- [<span data-ttu-id="b8741-334">คำแนะนำการแก้ไขปัญหาความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="b8741-334">Relationship troubleshooting guidance</span></span>](../guidance/relationships-troubleshoot.md)
- <span data-ttu-id="b8741-335">วิดีโอ: [สิ่งที่ควรทำและสิ่งที่ไม่ควรทำในความสัมพันธ์ของ Power BI](https://www.youtube.com/watch?v=78d6mwR8GtA)</span><span class="sxs-lookup"><span data-stu-id="b8741-335">Video: [The Do's and Don'ts of Power BI Relationships](https://www.youtube.com/watch?v=78d6mwR8GtA)</span></span>
- <span data-ttu-id="b8741-336">มีคำถามหรือไม่</span><span class="sxs-lookup"><span data-stu-id="b8741-336">Questions?</span></span> [<span data-ttu-id="b8741-337">ลองถามชุมชน Power BI</span><span class="sxs-lookup"><span data-stu-id="b8741-337">Try asking the Power BI Community</span></span>](https://community.powerbi.com/)
- <span data-ttu-id="b8741-338">มีข้อเสนอแนะไหม</span><span class="sxs-lookup"><span data-stu-id="b8741-338">Suggestions?</span></span> [<span data-ttu-id="b8741-339">สนับสนุนแนวคิดในการปรับปรุง Power BI</span><span class="sxs-lookup"><span data-stu-id="b8741-339">Contribute ideas to improve Power BI</span></span>](https://ideas.powerbi.com/)
