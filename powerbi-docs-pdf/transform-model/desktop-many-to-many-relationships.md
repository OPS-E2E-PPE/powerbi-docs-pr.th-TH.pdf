---
title: ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่มใน Power BI Desktop
description: ใช้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่มคาร์ดินัลลิตี้ใน Power BI Desktop
author: davidiseminger
ms.author: davidi
ms.reviewer: ''
ms.service: powerbi
ms.subservice: pbi-transform-model
ms.topic: conceptual
ms.date: 12/19/2019
LocalizationGroup: Transform and shape data
ms.openlocfilehash: 5f64a9a896fbb5ea3e080e1d07f6cc7d980430b8
ms.sourcegitcommit: 653e18d7041d3dd1cf7a38010372366975a98eae
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 12/01/2020
ms.locfileid: "96415714"
---
# <a name="apply-many-many-relationships-in-power-bi-desktop"></a><span data-ttu-id="9ff67-103">ใช้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่มใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="9ff67-103">Apply many-many relationships in Power BI Desktop</span></span>

<span data-ttu-id="9ff67-104">ด้วย *คาร์ดินาลลิตี้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่ม* ใน Power BI Desktop คุณสามารถเข้าร่วมตารางที่ใช้คาร์ดินาลลิตี้ของ *กลุ่ม-ต่อ-กลุ่ม*</span><span class="sxs-lookup"><span data-stu-id="9ff67-104">With *relationships with a many-many cardinality* in Power BI Desktop, you can join tables that use a cardinality of *many-to-many*.</span></span> <span data-ttu-id="9ff67-105">คุณสามารถสร้างโมเดลข้อมูลที่มีสองแหล่งข้อมูลหรือมากกว่าได้อย่างง่ายดาย</span><span class="sxs-lookup"><span data-stu-id="9ff67-105">You can more easily and intuitively create data models that contain two or more data sources.</span></span> <span data-ttu-id="9ff67-106">*คาร์ดินาลลิตี้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่ม* คือหนึ่งในความสามารถของ *โมเดลแบบรวม* ที่ใหญ่ขึ้นใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="9ff67-106">*Relationships with a many-many cardinality* are part of the larger *composite models* capabilities in Power BI Desktop.</span></span>

![ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่มในบานหน้าต่าง "แก้ไขความสัมพันธ์" Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_01.png)

<span data-ttu-id="9ff67-108">*คาร์ดินาลลิตี้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่ม* ใน Power BI Desktop ประกอบด้วยหนึ่งใน 3 คุณลักษณะที่เกี่ยวข้อง:</span><span class="sxs-lookup"><span data-stu-id="9ff67-108">A *relationship with a many-many cardinality* in Power BI Desktop is composed of one of three related features:</span></span>

* <span data-ttu-id="9ff67-109">**โมเดลแบบรวม**: *โมเดลแบบรวม* อนุญาตให้รายงานมีการเชื่อมต่อข้อมูลตั้งแต่สองแบบขึ้นไป รวมถึงการเชื่อมต่อ DirectQuery หรือการนำเข้าในรูปแบบใด ๆ ก็ตาม</span><span class="sxs-lookup"><span data-stu-id="9ff67-109">**Composite models**: A *composite model* allows a report to have two or more data connections, including DirectQuery connections or Import, in any combo.</span></span> <span data-ttu-id="9ff67-110">สำหรับข้อมูลเพิ่มเติม โปรดดูการ[ใช้โมเดลแบบรวมใน Power BI Desktop](desktop-composite-models.md)</span><span class="sxs-lookup"><span data-stu-id="9ff67-110">For more information, see [Use composite models in Power BI Desktop](desktop-composite-models.md).</span></span>

* <span data-ttu-id="9ff67-111">**ความสัมพันธ์แบบกลุ่ม-กลุ่มคาร์ดิลิตี้**: ด้วยโมเดลแบบรวม คุณสามารถสร้าง *คาร์ดินาลลิตี้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่ม* ระหว่างตารางได้</span><span class="sxs-lookup"><span data-stu-id="9ff67-111">**Relationships with a many-many cardinality**: With composite models, you can establish *relationships with a many-many cardinality* between tables.</span></span> <span data-ttu-id="9ff67-112">วิธีการนี้จะลบขอคำสำหรับค่าเฉพาะในตาราง</span><span class="sxs-lookup"><span data-stu-id="9ff67-112">This approach removes requirements for unique values in tables.</span></span> <span data-ttu-id="9ff67-113">นอกจากนี้ยังลบการแก้ปัญหาชั่วคราวก่อนหน้า เช่น การเริ่มตารางใหม่เพียงเพื่อสร้างความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="9ff67-113">It also removes previous workarounds, such as introducing new tables only to establish relationships.</span></span> <span data-ttu-id="9ff67-114">จะอธิบายคุณลักษณะต่อไปในบทความนี้</span><span class="sxs-lookup"><span data-stu-id="9ff67-114">The feature is described further in this article.</span></span>

* <span data-ttu-id="9ff67-115">**โหมดการจัดเก็บข้อมูล**: คุณสามารถระบุวิชวลที่ต้องการคิวรีไปยังแหล่งข้อมูลระบบ Back-end ได้</span><span class="sxs-lookup"><span data-stu-id="9ff67-115">**Storage mode**: You can now specify which visuals require a query to back-end data sources.</span></span> <span data-ttu-id="9ff67-116">วิชวลที่ไม่ต้องใช้คิวรีจะถูกนำเข้าแม้ว่าจะมาจาก DirectQuery</span><span class="sxs-lookup"><span data-stu-id="9ff67-116">Visuals that don't require a query are imported even if they're based on DirectQuery.</span></span> <span data-ttu-id="9ff67-117">คุณลักษณะนี้จะช่วยปรับปรุงประสิทธิภาพ และลดการโหลดระบบ Back-end</span><span class="sxs-lookup"><span data-stu-id="9ff67-117">This feature helps improve performance and reduce back-end load.</span></span> <span data-ttu-id="9ff67-118">ก่อนหน้านี้ แม้กระทั่งวิชวลพื้นฐานอย่าง Slicers ก็เริ่มคิวรีที่ถูกส่งไปยังแหล่งระบบ Back-end</span><span class="sxs-lookup"><span data-stu-id="9ff67-118">Previously, even simple visuals, such as slicers, began queries that were sent to back-end sources.</span></span> <span data-ttu-id="9ff67-119">สำหรับข้อมูลเพิ่มเติม โปรดดู [โหมดการจัดเก็บข้อมูลใน Power BI Desktop](desktop-storage-mode.md)</span><span class="sxs-lookup"><span data-stu-id="9ff67-119">For more information, see [Storage mode in Power BI Desktop](desktop-storage-mode.md).</span></span>

## <a name="what-a-relationship-with-a-many-many-cardinality-solves"></a><span data-ttu-id="9ff67-120">การแก้ไขปัญหาของคาร์ดินาลลิตี้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่ม</span><span class="sxs-lookup"><span data-stu-id="9ff67-120">What a relationship with a many-many cardinality solves</span></span>

<span data-ttu-id="9ff67-121">ก่อนที่จะมี *คาร์ดินาลลิตี้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่ม* ความสัมพันธ์ระหว่างสองตารางถูกกำหนดไว้ใน Power BI</span><span class="sxs-lookup"><span data-stu-id="9ff67-121">Before *relationships with a many-many cardinality* became available, the relationship between two tables was defined in Power BI.</span></span> <span data-ttu-id="9ff67-122">อย่างน้อยหนึ่งในคอลัมน์ของตารางที่อยู่ในความสัมพันธ์ต้องมีค่าเฉพาะ</span><span class="sxs-lookup"><span data-stu-id="9ff67-122">At least one of the table columns involved in the relationship had to contain unique values.</span></span> <span data-ttu-id="9ff67-123">แต่บ่อยครั้งที่ไม่มีคอลัมน์ที่มีค่าเฉพาะ</span><span class="sxs-lookup"><span data-stu-id="9ff67-123">Often, though, no columns contained unique values.</span></span>

<span data-ttu-id="9ff67-124">ตัวอย่างเช่น สองตารางอาจมีคอลัมน์ที่มีชื่อว่า Country </span><span class="sxs-lookup"><span data-stu-id="9ff67-124">For example, two tables might have had a column labeled Country.</span></span> <span data-ttu-id="9ff67-125">ค่าของ Country ไม่ได้เฉพาะเจาะจงในตารางแต่อย่างใด</span><span class="sxs-lookup"><span data-stu-id="9ff67-125">The values of Country weren't unique in either table, though.</span></span> <span data-ttu-id="9ff67-126">ในการรวมตารางดังกล่าว คุณจะต้องสร้างการแก้ปัญหาชั่วคราว</span><span class="sxs-lookup"><span data-stu-id="9ff67-126">To join such tables, you had to create a workaround.</span></span> <span data-ttu-id="9ff67-127">การแก้ปัญหาชั่วคราวอย่างหนึ่งอาจจะเป็นการแนะนำตารางเพิ่มเติมที่มีค่าที่ไม่ซ้ำกันที่จำเป็น</span><span class="sxs-lookup"><span data-stu-id="9ff67-127">One workaround might be to introduce extra tables with the needed unique values.</span></span> <span data-ttu-id="9ff67-128">ด้วย *คาร์ดินาลลิตี้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่ม* คุณสามารถรวมตารางดังกล่าวได้โดยตรงได้หากคุณใช้คาร์ดินาลลิตี้ความสัมพันธ์ของ *กลุ่ม-ต่อ-กลุ่ม*</span><span class="sxs-lookup"><span data-stu-id="9ff67-128">With *relationships with a many-many cardinality*, you can join such tables directly, if you use a relationship with a cardinality of *many-to-many*.</span></span>

## <a name="use-relationships-with-a-many-many-cardinality"></a><span data-ttu-id="9ff67-129">ใช้คาร์ดินาลลิตี้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่ม</span><span class="sxs-lookup"><span data-stu-id="9ff67-129">Use relationships with a many-many cardinality</span></span>

<span data-ttu-id="9ff67-130">เมื่อทำการกำหนดความสัมพันธ์ระหว่างตารางสองตารางใน Power BI คุณจะต้องกำหนดคาร์ดินาลลิตี้ของความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="9ff67-130">When you define a relationship between two tables in Power BI, you must define the cardinality of the relationship.</span></span> <span data-ttu-id="9ff67-131">ตัวอย่างเช่น ความสัมพันธ์ระหว่าง ProductSales และ Product&mdash;โดยใช้คอลัมน์ ProductSales[ProductCode] และ Product[ProductCode]&mdash;จะได้รับการกำหนดเป็น *Many-1*</span><span class="sxs-lookup"><span data-stu-id="9ff67-131">For example, the relationship between ProductSales and Product&mdash;using columns ProductSales[ProductCode] and Product[ProductCode]&mdash;would be defined as *Many-1*.</span></span> <span data-ttu-id="9ff67-132">เรากำหนดความสัมพันธ์ด้วยวิธีนี้เพราะแต่ละผลิตภัณฑ์มียอดขายจำนวนมาก และคอลัมน์ในตารางผลิตภัณฑ์ (ProductCode) เป็นคอลัมน์เฉพาะ</span><span class="sxs-lookup"><span data-stu-id="9ff67-132">We define the relationship in this way, because each product has many sales, and the column in the Product table (ProductCode) is unique.</span></span> <span data-ttu-id="9ff67-133">เมื่อคุณกำหนดคาร์ดินาลลิตี้ความสัมพันธ์เป็น *Many-1*, *1-Many* หรือ *1-1* Power BI จะตรวจสอบ ดังนั้นคาร์ดินาลลิตี้ที่คุณเลือกจะตรงกับข้อมูลจริง</span><span class="sxs-lookup"><span data-stu-id="9ff67-133">When you define a relationship cardinality as *Many-1*, *1-Many*, or *1-1*, Power BI validates it, so the cardinality that you select matches the actual data.</span></span>

<span data-ttu-id="9ff67-134">ตัวอย่างเช่น ลองดูโมเดลง่าย ๆ ในภาพนี้:</span><span class="sxs-lookup"><span data-stu-id="9ff67-134">For example, take a look at the simple model in this image:</span></span>

![ProductSales และตารางผลิตภัณฑ์ มุมมองความสัมพันธ์ Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_02.png)

<span data-ttu-id="9ff67-136">สมมติว่าตาราง **ผลิตภัณฑ์** แสดงเพียงสองแถวดังภาพ:</span><span class="sxs-lookup"><span data-stu-id="9ff67-136">Now, imagine that the **Product** table displays just two rows, as shown:</span></span>

![วิชวลตารางผลิตภัณฑ์ที่มีสองแถว Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_03.png)

<span data-ttu-id="9ff67-138">และสมมติว่าตารางยอดขายมีเพียงสี่แถว ซึ่งรวมถึงแถวสำหรับผลิตภัณฑ์ C เนื่องจากข้อผิดพลาดของ Referential Integrity จึงไม่มีแถวของผลิตภัณฑ์ C ในตาราง **ผลิตภัณฑ์**</span><span class="sxs-lookup"><span data-stu-id="9ff67-138">Also imagine that the Sales table has just four rows, including a row for a product C. Because of a referential integrity error, the product C row doesn't exist in the **Product** table.</span></span>

![วิชวลตารางยอดขายที่มีสี่แถว Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_04.png)

<span data-ttu-id="9ff67-140">**ProductName** และ **ราคา** (จากตาราง **ผลิตภัณฑ์**) พร้อมกับ **จำนวน** รวมสำหรับแต่ละผลิตภัณฑ์ (จากตาราง ProductSales) จะแสดงดังภาพ:</span><span class="sxs-lookup"><span data-stu-id="9ff67-140">The **ProductName** and **Price** (from the **Product** table), along with the total **Qty** for each product (from the ProductSales table), would be displayed as shown:</span></span>

![วิชวลที่แสดงชื่อผลิตภัณฑ์, ราคา และปริมาณ Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_05.png)

<span data-ttu-id="9ff67-142">ดังที่เห็นในภาพก่อน แถว **ProductName** ที่ว่างจะสัมพันธ์กับยอดขายสำหรับผลิตภัณฑ์ C แถวว่างนี้สามารถอธิบายได้ดังต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="9ff67-142">As you can see in the preceding image, a blank **ProductName** row is associated with sales for product C. This blank row accounts for the following:</span></span>

* <span data-ttu-id="9ff67-143">แถวใดๆ ในตาราง **ProductSales** ที่ไม่สอดคล้องกับแถวอยู่ในตาราง **ผลิตภัณฑ์**</span><span class="sxs-lookup"><span data-stu-id="9ff67-143">Any rows in the **ProductSales** table for which no corresponding row exists in the **Product** table.</span></span> <span data-ttu-id="9ff67-144">มีปัญหา Referential Integrity ตามที่เราเห็นสำหรับผลิตภัณฑ์ C ในตัวอย่างนี้</span><span class="sxs-lookup"><span data-stu-id="9ff67-144">There's a referential integrity issue, as we see for product C in this example.</span></span>

* <span data-ttu-id="9ff67-145">แถวใดๆ ในตาราง **ProductSales** ที่คอลัมน์คีย์นอกเป็น Null</span><span class="sxs-lookup"><span data-stu-id="9ff67-145">Any rows in the **ProductSales** table for which the foreign key column is null.</span></span>

<span data-ttu-id="9ff67-146">เนื่องด้วยเหตุผลดังกล่าว ในทั้งสองกรณีแถวที่เว้นว่างมีสาเหตุมาจากการขายที่ไม่ทราบ **ProductName** และ **ราคา**</span><span class="sxs-lookup"><span data-stu-id="9ff67-146">For these reasons, the blank row in both cases accounts for sales where the **ProductName** and **Price** are unknown.</span></span>

<span data-ttu-id="9ff67-147">บางครั้งที่ตารางถูกรวมเข้าด้วยกันโดยคอลัมน์สองคอลัมน์ แต่ไม่มีคอลมน์ใดที่เป็นค่าเฉพาะเลย</span><span class="sxs-lookup"><span data-stu-id="9ff67-147">Sometimes the tables are joined by two columns, yet neither column is unique.</span></span> <span data-ttu-id="9ff67-148">ตัวอย่างเช่น ลองพิจารณาตารางสองตารางเหล่านี้:</span><span class="sxs-lookup"><span data-stu-id="9ff67-148">For example, consider these two tables:</span></span>

* <span data-ttu-id="9ff67-149">ตาราง **การขาย** แสดงข้อมูลการขายตาม **รัฐ** และแต่ละแถวมีจำนวนการขายของประเภทการขายในรัฐนั้นๆ</span><span class="sxs-lookup"><span data-stu-id="9ff67-149">The **Sales** table displays sales data by **State**, and each row contains the sales amount for the type of sale in that state.</span></span> <span data-ttu-id="9ff67-150">รัฐรวมถึง CA, WA และ TX</span><span class="sxs-lookup"><span data-stu-id="9ff67-150">The states include CA, WA, and TX.</span></span>

    ![ตารางยอดขายที่แสดงยอดขายตามรัฐ Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_06.png)

* <span data-ttu-id="9ff67-152">ตาราง **CityData** แสดงข้อมูลเกี่ยวกับเมืองต่าง ๆ รวมทั้งประชากรและรัฐ (เช่น CA, WA และนิวยอร์ก)</span><span class="sxs-lookup"><span data-stu-id="9ff67-152">The **CityData** table displays data on cities, including the population and state (such as CA, WA, and New York).</span></span>

    ![ตารางยอดขายที่แสดงเมือง, รัฐ และประชากร Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_07.png)

<span data-ttu-id="9ff67-154">ตอนนี้คอลัมน์สำหรับ **รัฐ** มีอยู่ทั้งสองตาราง</span><span class="sxs-lookup"><span data-stu-id="9ff67-154">A column for **State** is now in both tables.</span></span> <span data-ttu-id="9ff67-155">ซึ่งเหมาะสมที่จะต้องการรายงานทั้งยอดขายรวมตามรัฐและจำนวนประชากรทั้งหมดของแต่ละรัฐ</span><span class="sxs-lookup"><span data-stu-id="9ff67-155">It's reasonable to want to report on both total sales by state and total population of each state.</span></span> <span data-ttu-id="9ff67-156">อย่างไรก็ตาม มีปัญหา: คอลัมน์ **รัฐ** ไม่มีค่าเฉพาะในตารางทั้งสอง</span><span class="sxs-lookup"><span data-stu-id="9ff67-156">However, a problem exists: the **State** column isn't unique in either table.</span></span>

## <a name="the-previous-workaround"></a><span data-ttu-id="9ff67-157">การแก้ปัญหาชั่วคราวก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="9ff67-157">The previous workaround</span></span>

<span data-ttu-id="9ff67-158">ก่อนหน้าเวอร์ชัน Power BI Desktop ที่เปิดตัวในเดือนกรกฎาคม 2018 คุณไม่สามารถสร้างความสัมพันธ์โดยตรงระหว่างตารางเหล่านี้ได้</span><span class="sxs-lookup"><span data-stu-id="9ff67-158">Before the July 2018 release of Power BI Desktop, you couldn't create a direct relationship between these tables.</span></span> <span data-ttu-id="9ff67-159">การแก้ปัญหาชั่วคราวทั่วไปคือ:</span><span class="sxs-lookup"><span data-stu-id="9ff67-159">A common workaround was to:</span></span>

* <span data-ttu-id="9ff67-160">สร้างตารางที่สามที่มีเพียง ID รัฐเฉพาะเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="9ff67-160">Create a third table that contains only the unique State IDs.</span></span> <span data-ttu-id="9ff67-161">อาจเป็นตารางทั้งหมดหรือตารางใดตารางหนึ่งจาก:</span><span class="sxs-lookup"><span data-stu-id="9ff67-161">The table could be any or all of:</span></span>
  * <span data-ttu-id="9ff67-162">ตารางการคำนวณ (กำหนดโดยการใช้ Data Analysis Expressions [DAX])</span><span class="sxs-lookup"><span data-stu-id="9ff67-162">A calculated table (defined by using Data Analysis Expressions [DAX]).</span></span>
  * <span data-ttu-id="9ff67-163">ตารางจากคิวรีที่ถูกกำหนดในตัวแก้ไขคิวรี ซึ่งอาจแสดง ID เฉพาะที่ดึงมาจากตารางใดตารางหนึ่ง</span><span class="sxs-lookup"><span data-stu-id="9ff67-163">A table based on a query that's defined in Query Editor, which could display the unique IDs drawn from one of the tables.</span></span>
  * <span data-ttu-id="9ff67-164">ชุดรวมต็มรูปแบบ</span><span class="sxs-lookup"><span data-stu-id="9ff67-164">The combined full set.</span></span>

* <span data-ttu-id="9ff67-165">จากนั้นเชื่อมโยงสองตารางเดิมเข้ากับตารางใหม่ โดยใช้ความสัมพันธ์แบบ *Many-1* ทั่วไป</span><span class="sxs-lookup"><span data-stu-id="9ff67-165">Then relate the two original tables to that new table by using common *Many-1* relationships.</span></span>

<span data-ttu-id="9ff67-166">คุณสามารถแสดงตารางการแก้ปัญหาชั่วคราว</span><span class="sxs-lookup"><span data-stu-id="9ff67-166">You could leave the workaround table visible.</span></span> <span data-ttu-id="9ff67-167">หรือคุณอาจซ่อนตารางการแก้ปัญหาชั่วคราว ดังนั้นจึงไม่ปรากฏในรายการ **เขตข้อมูล**</span><span class="sxs-lookup"><span data-stu-id="9ff67-167">Or you may hide the workaround table, so it doesn't appear in the **Fields** list.</span></span> <span data-ttu-id="9ff67-168">หากคุณซ่อนตาราง ความสัมพันธ์ *Many-1* จะถูกตั้งค่าสำหรับตัวกรองในสองทิศทาง และคุณสามารถใช้เขตข้อมูลรัฐจากทั้งสองตารางได้</span><span class="sxs-lookup"><span data-stu-id="9ff67-168">If you hide the table, the *Many-1* relationships would commonly be set to filter in both directions, and you could use the State field from either table.</span></span> <span data-ttu-id="9ff67-169">การกรองข้ามที่ตามมาจะเผยแพร่ไปยังตารางอื่น</span><span class="sxs-lookup"><span data-stu-id="9ff67-169">The later cross filtering would propagate to the other table.</span></span> <span data-ttu-id="9ff67-170">วิธีการนี้แสดงตามภาพต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="9ff67-170">That approach is shown in the following image:</span></span>

![ตารางรัฐที่ซ่อนไว้ มุมมองความสัมพันธ์ Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_08.png)

<span data-ttu-id="9ff67-172">วิชวลที่แสดง **รัฐ** (จากตาราง **CityData**) กับจำนวน **ประชากร** ทั้งหมด และ **การขาย** ทั้งหมด จะปรากฏดังนี้:</span><span class="sxs-lookup"><span data-stu-id="9ff67-172">A visual that displays **State** (from the **CityData** table), along with total **Population** and total **Sales**, would then appear as follows:</span></span>

![สกรีนช็อตแสดงตารางที่มีข้อมูลรัฐ ประชากร และยอดขาย](media/desktop-many-to-many-relationships/many-to-many-relationships_09.png)

> [!NOTE]
> <span data-ttu-id="9ff67-174">เนื่องจากรัฐจากตาราง **CityData** ถูกใช้ในการแก้ปัญหาชั่วคราว จึงมีเพียงรัฐในตารางนั้นเท่านั้นที่แสดงในรายการ เพราะฉะนั้นจะไม่มี TX</span><span class="sxs-lookup"><span data-stu-id="9ff67-174">Because the state from the **CityData** table is used in this workaround, only the states in that table are listed, so TX is excluded.</span></span> <span data-ttu-id="9ff67-175">นอกจากนี้ สิ่งที่ไม่เหมือนกับความสัมพันธ์แบบ *Many-1* ก็คือในขณะที่แถวทั้งหมดประกอบด้วย **ยอดขาย** รวม (รวมถึงของ TX) รายละเอียดจะไม่รวมแถวที่เว้นว่าง ซึ่งครอบคลุมแถวที่ไม่ตรงกันดังกล่าว</span><span class="sxs-lookup"><span data-stu-id="9ff67-175">Also, unlike *Many-1* relationships, while the total row includes all **Sales** (including those of TX), the details don't include a blank row covering such mismatched rows.</span></span> <span data-ttu-id="9ff67-176">เช่นเดียวกัน จะไม่มีแถวที่เว้นว่างที่ครอบคลุม **ยอดขาย** ใดๆ ซึ่งมีค่า Null สำหรับ **รัฐ**</span><span class="sxs-lookup"><span data-stu-id="9ff67-176">Similarly, no blank row would cover **Sales** for which there's a null value for the **State**.</span></span>

<span data-ttu-id="9ff67-177">สมมติว่าคุณยังเพิ่มเมืองลงในวิชวลนั้นด้วย</span><span class="sxs-lookup"><span data-stu-id="9ff67-177">Suppose you also add City to that visual.</span></span> <span data-ttu-id="9ff67-178">แม้ว่าจะทราบจำนวนประชากรต่อเมือง **ยอดขาย** ที่แสดงสำหรับเมืองจะเพียงแค่ทำซ้ำ **ยอดขาย** สำหรับ **รัฐ** ที่สอดคล้องกัน</span><span class="sxs-lookup"><span data-stu-id="9ff67-178">Although the population per City is known, the **Sales** shown for City simply repeats the **Sales** for the corresponding **State**.</span></span> <span data-ttu-id="9ff67-179">สถานการณ์นี้มักจะเกิดขึ้นเมื่อการจัดกลุ่มคอลัมน์ไม่เกี่ยวข้องกับหน่วยวัดการรวมบางรายการดังที่แสดงไว้ที่นี่:</span><span class="sxs-lookup"><span data-stu-id="9ff67-179">This scenario normally occurs when the column grouping is unrelated to some aggregate measure, as shown here:</span></span>

![รัฐและเมือง ประชากรและยอดขาย Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_10.png)

<span data-ttu-id="9ff67-181">สมมติว่าคุณได้กำหนดตารางยอดขายใหม่เป็นการรวมกันของรัฐทั้งหมดที่นี่ และเราแสดงตารางดังกล่าวในรายการ **เขตข้อมูล**</span><span class="sxs-lookup"><span data-stu-id="9ff67-181">Let's say you define the new Sales table as the combination of all States here, and we make it visible in the **Fields** list.</span></span> <span data-ttu-id="9ff67-182">วิชวลเดียวกันจะแสดง **รัฐ** (ในตารางใหม่) **จำนวนประชากร** รวม และ **ยอดขาย** รวม:</span><span class="sxs-lookup"><span data-stu-id="9ff67-182">The same visual would display **State** (on the new table), the total **Population**, and total **Sales**:</span></span>

![วิชวลรัฐ ประชากร และยอดขาย Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_11.png)

<span data-ttu-id="9ff67-184">ดังที่เห็น &mdash;TX **ที่มีข้อมูล** ยอดขาย แต่ไม่ทราบข้อมูล *ประชากร*&mdash;และนิวยอร์ก&mdash;ที่มีข้อมูล **ประชากร** ที่ทราบแต่ไม่มีข้อมูล **ยอดขาย**&mdash;จะรวมอยู่ด้วย</span><span class="sxs-lookup"><span data-stu-id="9ff67-184">As you can see, TX&mdash;with **Sales** data but unknown *Population* data&mdash;and New York&mdash;with known **Population** data but no **Sales** data&mdash;would be included.</span></span> <span data-ttu-id="9ff67-185">การแก้ปัญหาชั่วคราวนี้ไม่เหมาะสม และมีหลายปัญหา</span><span class="sxs-lookup"><span data-stu-id="9ff67-185">This workaround isn't optimal, and it has many issues.</span></span> <span data-ttu-id="9ff67-186">สำหรับคาร์ดินาลลิตี้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่ม ปัญหาที่เกิดขึ้นได้รับการแก้ไขดังที่อธิบายในส่วนถัดไป</span><span class="sxs-lookup"><span data-stu-id="9ff67-186">For relationships with a many-many cardinality, the resulting issues are addressed, as described in the next section.</span></span>

## <a name="use-a-relationship-with-a-many-many-cardinality-instead-of-the-workaround"></a><span data-ttu-id="9ff67-187">ใช้คาร์ดินาลลิตี้ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่มแทนการแก้ปัญหาชั่วคราว</span><span class="sxs-lookup"><span data-stu-id="9ff67-187">Use a relationship with a many-many cardinality instead of the workaround</span></span>

<span data-ttu-id="9ff67-188">ด้วย Power BI Desktop เวอร์ชันเดือนกรกฎาคม 2018 คุณสามารถเชื่อมตารางได้โดยตรงดังเช่นที่อธิบายไว้ข้างต้น โดยไม่ต้องพึ่งการแก้ปัญหาชั่วคราวที่คล้ายกัน</span><span class="sxs-lookup"><span data-stu-id="9ff67-188">With the July 2018 version of Power BI Desktop, you can directly relate tables, such as the ones we described earlier, without having to resort to similar workarounds.</span></span> <span data-ttu-id="9ff67-189">สามารถตั้งค่าคาร์ดินาลลิตี้ความสัมพันธ์เป็นแบบ *กลุ่ม-ต่อ-กลุ่ม* ได้แล้ว</span><span class="sxs-lookup"><span data-stu-id="9ff67-189">It's now possible to set the relationship cardinality to *many-to-many*.</span></span> <span data-ttu-id="9ff67-190">การตั้งค่านี้บ่งบอกว่าไม่มีตารางใดที่มีค่าเฉพาะ</span><span class="sxs-lookup"><span data-stu-id="9ff67-190">This setting indicates that neither table contains unique values.</span></span> <span data-ttu-id="9ff67-191">สำหรับความสัมพันธ์ดังกล่าว คุณยังสามารถควบคุมว่าตารางใดที่จะกรองตารางอื่น</span><span class="sxs-lookup"><span data-stu-id="9ff67-191">For such relationships, you may still control which table filters the other table.</span></span> <span data-ttu-id="9ff67-192">หรือคุณสามารถใช้การกรองแบบสองทิศทางที่แต่ละตารางจะกรองตารางอื่น</span><span class="sxs-lookup"><span data-stu-id="9ff67-192">Or you can apply bidirectional filtering, where each table filters the other.</span></span>

<span data-ttu-id="9ff67-193">ใน Power BI Desktop คาร์ดินาลลิตี้จะใช้ *กลุ่ม-ต่อ-กลุ่ม* เป็นค่าเริ่มต้น เมื่อพบว่าไม่มีตารางใดที่มีค่าเฉพาะสำหรับคอลัมน์ความสัมพันธ์</span><span class="sxs-lookup"><span data-stu-id="9ff67-193">In Power BI Desktop, the cardinality defaults to *many-to-many* when it determines neither table contains unique values for the relationship columns.</span></span> <span data-ttu-id="9ff67-194">ในกรณีเช่นนี้ ข้อความการแจ้งเตือนยืนยันว่าคุณต้องการตั้งค่าความสัมพันธ์และการเปลี่ยนแปลงไม่ใช่ผลที่เกิดขึ้นโดยไม่ตั้งใจจากปัญหาข้อมูล</span><span class="sxs-lookup"><span data-stu-id="9ff67-194">In such cases, a warning message confirms you want to set a relationship, and the change isn't the unintended effect of a data issue.</span></span>

<span data-ttu-id="9ff67-195">ตัวอย่างเช่น เมื่อคุณสร้างความสัมพันธ์โดยตรงระหว่าง CityData และยอดขาย &mdash;ซึ่งตัวกรองควรโฟลว์จาก CityData ไปยังยอดขาย&mdash; Power BI Desktop จะแสดงกล่องโต้ตอบ **แก้ไขความสัมพันธ์** ดังภาพต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="9ff67-195">For example, when you create a relationship directly between CityData and Sales&mdash;where filters should flow from CityData to Sales&mdash;Power BI Desktop displays the **Edit relationship** dialog box:</span></span>

![กล่องโต้ตอบแก้ไขความสัมพันธ์ Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_01.png)

<span data-ttu-id="9ff67-197">**มุมมองความสัมพันธ์** ที่ปรากฏจะแสดงความสัมพันธ์แบบกลุ่มต่อกลุ่มโดยตรงระหว่างสองตาราง</span><span class="sxs-lookup"><span data-stu-id="9ff67-197">The resulting **Relationship** view would then display the direct, many-to-many relationship between the two tables.</span></span> <span data-ttu-id="9ff67-198">ลักษณะของตารางในรายการ **เขตข้อมูล** และการทำงานที่ตามมาเมื่อสร้างวิชวลจะคล้ายกับเมื่อใช้การแก้ปัญหาชั่วคราว</span><span class="sxs-lookup"><span data-stu-id="9ff67-198">The tables' appearance in the **Fields** list, and their later behavior when the visuals are created, are similar to when we applied the workaround.</span></span> <span data-ttu-id="9ff67-199">ในการแก้ปัญหาชั่วคราว จะมองไม่เห็นตารางพิเศษที่แสดงข้อมูลรัฐที่แตกต่างชัดเจน</span><span class="sxs-lookup"><span data-stu-id="9ff67-199">In the workaround, the extra table that displays the distinct State data isn't made visible.</span></span> <span data-ttu-id="9ff67-200">ดังที่อธิบายไว้ก่อนหน้านี้ วิชวลที่แสดงข้อมูล **รัฐ** **ประชากร** และ **ยอดขาย** จะแสดงขึ้นมา:</span><span class="sxs-lookup"><span data-stu-id="9ff67-200">As described earlier, a visual that shows **State**, **Population**, and **Sales** data would be displayed:</span></span>

![รัฐ ประชากร และตารางยอดขาย Power BI Desktop](media/desktop-many-to-many-relationships/many-to-many-relationships_12.png)

<span data-ttu-id="9ff67-202">ความแตกต่างที่สำคัญระหว่างความสัมพันธ์แบบ *กลุ่มต่อกลุ่มคาร์ดินัลลิตี้* กับความสัมพันธ์แบบ *Many-1* ทั่วไปมีดังนี้:</span><span class="sxs-lookup"><span data-stu-id="9ff67-202">The major differences between *relationships with a many-many cardinality* and the more typical *Many-1* relationships are as follows:</span></span>

* <span data-ttu-id="9ff67-203">ค่าที่แสดงไม่รวมแถวว่างที่เป็นเหตุของแถวที่ไม่ตรงในตารางอื่น</span><span class="sxs-lookup"><span data-stu-id="9ff67-203">The values shown don't include a blank row that accounts for mismatched rows in the other table.</span></span> <span data-ttu-id="9ff67-204">นอกจากนี้ ค่าที่ไม่สามารถอธิบายแถวที่คอลัมน์ถูกใช้ในความสัมพันธ์ในตารางอื่นจะเป็น Null</span><span class="sxs-lookup"><span data-stu-id="9ff67-204">Also, the values don't account for rows where the column used in the relationship in the other table is null.</span></span>
* <span data-ttu-id="9ff67-205">คุณไม่สามารถใช้ฟังก์ชัน `RELATED()`ได้เนื่องจากมีแถวมากกว่าหนึ่งแถวที่อาจเกี่ยวข้อง</span><span class="sxs-lookup"><span data-stu-id="9ff67-205">You can't use the `RELATED()` function, because more than one row could be related.</span></span>
* <span data-ttu-id="9ff67-206">การใช้ `ALL()` ฟังก์ชันบนตารางไม่ได้เป็นการลบตัวกรองที่ใช้กับตารางอื่นๆ ที่เชื่อมโยงโดยความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่ม</span><span class="sxs-lookup"><span data-stu-id="9ff67-206">Using the `ALL()` function on a table doesn't remove filters that are applied to other, related tables by a many-to-many relationship.</span></span> <span data-ttu-id="9ff67-207">ในตัวอย่างก่อนหน้า หน่วยวัดที่กำหนดดังแสดงในที่นี่จะไม่ลบตัวกรองบนคอลัมน์ในตาราง CityData ที่เชื่อมโยง:</span><span class="sxs-lookup"><span data-stu-id="9ff67-207">In the preceding example, a measure that's defined as shown here wouldn't remove filters on columns in the related CityData table:</span></span>

    ![ตัวอย่างสคริปต์](media/desktop-many-to-many-relationships/many-to-many-relationships_13.png)

    <span data-ttu-id="9ff67-209">วิชวลที่แสดงข้อมูล **รัฐ** **ยอดขาย** และ **ยอดขายรวม** จะเป็นดังภาพนี้:</span><span class="sxs-lookup"><span data-stu-id="9ff67-209">A visual showing **State**, **Sales**, and **Sales total** data would result in this graphic:</span></span>

    ![วิชวลตาราง](media/desktop-many-to-many-relationships/many-to-many-relationships_14.png)

<span data-ttu-id="9ff67-211">ด้วยการคำนึงถึงความแตกต่างก่อนหน้านี้ ตรวจสอบให้แน่ใจว่าการคำนวณที่ใช้ `ALL(<Table>)` เช่น *% ของยอดรวม* จะแสดงค่าผลลัพธ์ที่เจาะจง</span><span class="sxs-lookup"><span data-stu-id="9ff67-211">With the preceding differences in mind, make sure the calculations that use `ALL(<Table>)`, such as *% of grand total*, are returning the intended results.</span></span>

## <a name="limitations-and-considerations"></a><span data-ttu-id="9ff67-212">ข้อจำกัดและข้อควรพิจารณา</span><span class="sxs-lookup"><span data-stu-id="9ff67-212">Limitations and considerations</span></span>

<span data-ttu-id="9ff67-213">มีข้อจำกัดบางอย่างสำหรับการวางจำหน่าย *ความสัมพันธ์กับจำนวนนับแบบกลุ่มคาร์ดินัลลิตี้* และโมเดลแบบรวม</span><span class="sxs-lookup"><span data-stu-id="9ff67-213">There are a few limitations for this release of *relationships with a many-many cardinality* and composite models.</span></span>

<span data-ttu-id="9ff67-214">แหล่งที่มา Live Connect (หลายมิติ) ดังต่อไปนี้ไม่สามารถใช้กับโมเดลแบบรวมได้:</span><span class="sxs-lookup"><span data-stu-id="9ff67-214">The following Live Connect (multidimensional) sources can't be used with composite models:</span></span>

* <span data-ttu-id="9ff67-215">SAP HANA</span><span class="sxs-lookup"><span data-stu-id="9ff67-215">SAP HANA</span></span>
* <span data-ttu-id="9ff67-216">SAP Business Warehouse</span><span class="sxs-lookup"><span data-stu-id="9ff67-216">SAP Business Warehouse</span></span>
* <span data-ttu-id="9ff67-217">SQL Server Analysis Services</span><span class="sxs-lookup"><span data-stu-id="9ff67-217">SQL Server Analysis Services</span></span>
* <span data-ttu-id="9ff67-218">ชุดข้อมูล Power BI</span><span class="sxs-lookup"><span data-stu-id="9ff67-218">Power BI datasets</span></span>
* <span data-ttu-id="9ff67-219">Azure Analysis Services</span><span class="sxs-lookup"><span data-stu-id="9ff67-219">Azure Analysis Services</span></span>

<span data-ttu-id="9ff67-220">เมื่อทำการเชื่อมต่อกับแหล่งที่มาหลายมิติเหล่านี้โดยใช้ DirectQuery คุณจะไม่สามารถเชื่อมต่อกับแหล่งที่มา DirectQuery อีกแห่ง หรือรวมเข้ากับข้อมูลที่นำเข้าได้</span><span class="sxs-lookup"><span data-stu-id="9ff67-220">When you connect to these multidimensional sources by using DirectQuery, you can't connect to another DirectQuery source or combine it with imported data.</span></span>

<span data-ttu-id="9ff67-221">ข้อจำกัดในการใช้ DirectQuery ที่ยังมีอยู่จะยังคงมีผลเมื่อใช้ *ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่มคาร์ดินัลลิตี้* </span><span class="sxs-lookup"><span data-stu-id="9ff67-221">The existing limitations of using DirectQuery still apply when you use *relationships with a many-many cardinality*.</span></span> <span data-ttu-id="9ff67-222">ข้อจำกัดจำนวนมากเป็นข้อจำกัดต่อตาราง โดยขึ้นอยู่กับโหมดที่เก็บข้อมูลของตาราง</span><span class="sxs-lookup"><span data-stu-id="9ff67-222">Many limitations are now per table, depending upon the storage mode of the table.</span></span> <span data-ttu-id="9ff67-223">ตัวอย่างเช่น คอลัมน์ที่ได้รับการคำนวณบนตารางที่นำเข้าสามารถอ้างอิงไปยังตารางอื่น แต่คอลัมน์ที่ได้รับการคำนวณบนตาราง DirectQuery จะยังคงถูกอ้างอิงไปยังคอลัมน์บนตารางเดียวกันเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="9ff67-223">For example, a calculated column on an imported table can refer to other tables, but a calculated column on a DirectQuery table can still refer only to columns on the same table.</span></span> <span data-ttu-id="9ff67-224">ข้อจำกัดอื่น ๆ มีผลกับโมเดลทั้งหมดหากมีตารางใดภายในโมเดลที่เป็น DirectQuery</span><span class="sxs-lookup"><span data-stu-id="9ff67-224">Other limitations apply to the whole model if any tables within the model are DirectQuery.</span></span> <span data-ttu-id="9ff67-225">ตัวอย่างเช่น คุณลักษณะ QuickInsights และถามตอบจะไม่สามารถใช้งานได้บนโมเดลหากมีตารางใดภายในโมเดลมีโหมดที่เก็บข้อมูลของ DirectQuery</span><span class="sxs-lookup"><span data-stu-id="9ff67-225">For example, the QuickInsights and Q&A features are unavailable on a model if any table within it has a storage mode of DirectQuery.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9ff67-226">ขั้นตอนถัดไป</span><span class="sxs-lookup"><span data-stu-id="9ff67-226">Next steps</span></span>

<span data-ttu-id="9ff67-227">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับโมเดลแบบรวมและ DirectQuery โปรดดูบทความต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="9ff67-227">For more information about composite models and DirectQuery, see the following articles:</span></span>
* [<span data-ttu-id="9ff67-228">ใช้แบบจำลองแบบรวมใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="9ff67-228">Use composite models in Power BI Desktop</span></span>](desktop-composite-models.md)
* [<span data-ttu-id="9ff67-229">โหมดที่เก็บข้อมูลใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="9ff67-229">Storage mode in Power BI Desktop</span></span>](desktop-storage-mode.md)
* [<span data-ttu-id="9ff67-230">ใช้ DirectQuery ใน Power BI</span><span class="sxs-lookup"><span data-stu-id="9ff67-230">Use DirectQuery in Power BI</span></span>](../connect-data/desktop-directquery-about.md)
* [<span data-ttu-id="9ff67-231">แหล่งข้อมูล Power BI</span><span class="sxs-lookup"><span data-stu-id="9ff67-231">Power BI data sources</span></span>](../connect-data/power-bi-data-sources.md)
