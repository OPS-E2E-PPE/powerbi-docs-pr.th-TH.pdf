---
title: กำหนดค่าปริมาณงานกระแสข้อมูลของ Power BI Premium
description: วิธีกำหนดค่าปริมาณงานกระแสข้อมูลของ Power BI Premium
author: davidiseminger
ms.author: davidi
ms.reviewer: ''
ms.service: powerbi
ms.subservice: pbi-dataflows
ms.topic: how-to
ms.date: 11/13/2020
ms.custom: references_regions
LocalizationGroup: Data from files
ms.openlocfilehash: 64ad881f4deb2d106254f49c588e9d34b15bea2f
ms.sourcegitcommit: 653e18d7041d3dd1cf7a38010372366975a98eae
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 12/01/2020
ms.locfileid: "96414058"
---
# <a name="configure-power-bi-premium-dataflow-workloads"></a><span data-ttu-id="4cd04-103">กำหนดค่าปริมาณงานกระแสข้อมูลของ Power BI Premium</span><span class="sxs-lookup"><span data-stu-id="4cd04-103">Configure Power BI Premium dataflow workloads</span></span>

<span data-ttu-id="4cd04-104">คุณสามารถกำหนดปริมาณงานของกระแสข้อมูลในการสมัครใช้งาน Power BI Premium ได้</span><span class="sxs-lookup"><span data-stu-id="4cd04-104">You can create dataflow workloads in your Power BI Premium subscription.</span></span> <span data-ttu-id="4cd04-105">Power BI ใช้แนวคิดของ *ปริมาณงาน* เพื่ออธิบายเนื้อหาพรีเมียม</span><span class="sxs-lookup"><span data-stu-id="4cd04-105">Power BI uses the concept of *workloads* to describe Premium content.</span></span> <span data-ttu-id="4cd04-106">ปริมาณงานรวมถึง ชุดข้อมูล รายงานที่มีการแบ่งหน้า กระแสข้อมูลและ AI</span><span class="sxs-lookup"><span data-stu-id="4cd04-106">Workloads include Datasets, Paginated Reports, Dataflows, and AI.</span></span> <span data-ttu-id="4cd04-107">ปริมาณงานของ *กระแสข้อมูล* ช่วยให้คุณใช้การเตรียมข้อมูลแบบบริการตนเองของกระแสข้อมูลเพื่อนำเข้า แปลง รวม และเพิ่มข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-107">The *dataflows* workload lets you use dataflows self-service data preparation to ingest, transform, integrate, and enrich data.</span></span> <span data-ttu-id="4cd04-108">กระแสข้อมูลของ Power BI Premium ถูกจัดการใน **พอร์ทัลผู้ดูแลระบบ**</span><span class="sxs-lookup"><span data-stu-id="4cd04-108">Power BI Premium dataflows are managed in the **Admin portal**.</span></span>

![พอร์ทัลผู้ดูแลระบบสำหรับกระแสข้อมูลใน Power BI premium](media/dataflows-premium-workload-configuration/dataflows-premium-workloads-01.png)

<span data-ttu-id="4cd04-110">ส่วนต่อไปนี้อธิบายวิธีการเปิดใช้งานกระแสข้อมูลในองค์กรของคุณ วิธีการปรับปรุงการตั้งค่าในความจุพรีเมียมของคุณและคำแนะนำสำหรับการใช้งานทั่วไป</span><span class="sxs-lookup"><span data-stu-id="4cd04-110">The following sections describe how to enable dataflows in your organization, how to refine their settings in your Premium capacity, and guidance for common usage.</span></span>

## <a name="enabling-dataflows-in-power-bi-premium"></a><span data-ttu-id="4cd04-111">เปิดใช้งานกระแสข้อมูลใน Power BI premium</span><span class="sxs-lookup"><span data-stu-id="4cd04-111">Enabling dataflows in Power BI premium</span></span>

<span data-ttu-id="4cd04-112">ข้อกำหนดแรกสำหรับการใช้กระแสข้อมูลในการสมัครใช้งาน Power BI premium ของคุณคือเปิดการสร้างและการใช้กระแสข้อมูลสำหรับองค์กรของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-112">The first requirement for using dataflows in your Power BI premium subscription is to enable the creation and use of dataflows for your organization.</span></span> <span data-ttu-id="4cd04-113">ใน **พอร์ทัลผู้ดูแลระบบ** เลือก **การตั้งค่าผู้เช่า** และสลับแถบเลื่อนภายใต้ **การตั้งค่า กระแสข้อมูล** เพื่อ **เปิดใช้งาน** ดังที่แสดงในรูปต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="4cd04-113">In the **Admin portal**, select **Tenant Settings** and switch the slider under **Dataflow settings** to **Enabled**, as shown in the following image.</span></span>

![พอร์ทัลผู้ดูแลระบบสำหรับกระแสข้อมูลใน Power BI premium](media/dataflows-premium-workload-configuration/dataflows-premium-workloads-01.png)

<span data-ttu-id="4cd04-115">หลังจากเปิดใช้งานปริมาณงานกระแสข้อมูลจะมีการกำหนดค่าด้วยการตั้งค่าเริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-115">After enabling the Dataflows workload, it is configured with default settings.</span></span> <span data-ttu-id="4cd04-116">คุณอาจต้องการปรับแต่งการตั้งค่าเหล่านี้ตามที่คุณเห็นว่าเหมาะสม</span><span class="sxs-lookup"><span data-stu-id="4cd04-116">You might want to tweak these settings as you see fit.</span></span> <span data-ttu-id="4cd04-117">ถัดไปเราจะอธิบายว่าการตั้งค่าเหล่านี้แสดงอยู่ที่ใดและจะช่วยให้คุณเข้าใจว่าเมื่อใดคุณอาจต้องการเปลี่ยนแปลงค่าเพื่อปรับปรุงประสิทธิภาพการทำงานของกระแสข้อมูลให้เหมาะสม</span><span class="sxs-lookup"><span data-stu-id="4cd04-117">Next, we'll describe where these settings live, describe each, and help you understand when you might want to change the values to optimize your dataflow performance.</span></span>

## <a name="refining-dataflow-settings"></a><span data-ttu-id="4cd04-118">ปรับแต่งการตั้งค่ากระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-118">Refining dataflow settings</span></span>

<span data-ttu-id="4cd04-119">เมื่อเปิดใช้งานกระแสข้อมูลคุณสามารถใช้ **พอร์ทัลผู้ดูแลระบบ** เพื่อเปลี่ยนแปลงหรือปรับแต่งวิธีการสร้างกระแสข้อมูลและวิธีการใช้ทรัพยากรในการสมัครใช้งาน Power BI Premium ของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-119">Once dataflows are enabled, you can use the **Admin portal** to change, or refine, how dataflows are created and how they use resources in your Power BI Premium subscription.</span></span> <span data-ttu-id="4cd04-120">ขั้นตอนต่อไปนี้แสดงวิธีการปรับการตั้งค่ากระแสข้อมูลของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-120">The following steps show how to adjust your dataflow settings.</span></span>

1. <span data-ttu-id="4cd04-121">ใน **พอร์ทัลผู้ดูแลระบบ** เลือก **การตั้งค่าผู้เช่า** เพื่อแสดงรายการความจุทั้งหมดที่ถูกสร้างขึ้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-121">In the **Admin portal**, select **Tenant settings** to list all capacities that have been created.</span></span> <span data-ttu-id="4cd04-122">เลือกความจุเพื่อจัดการการตั้งค่านั้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-122">Select a capacity to manage its settings.</span></span>

    ![เลือกความจุเพื่อจัดการการตั้งค่า](media/dataflows-premium-workload-configuration/dataflows-premium-workloads-02.png)

2. <span data-ttu-id="4cd04-124">ความจุ Power BI Premium ของคุณสะท้อนให้เห็นถึงทรัพยากรที่พร้อมใช้งานสำหรับกระแสข้อมูลของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-124">Your Power BI Premium capacity reflects the resources available for your dataflows.</span></span> <span data-ttu-id="4cd04-125">คุณสามารถเปลี่ยนขนาดความจุของคุณได้โดยการเลือกปุ่ม **เปลี่ยนขนาด** ดังที่แสดงในรูปต่อไปนี้</span><span class="sxs-lookup"><span data-stu-id="4cd04-125">You can change your capacity's size by selecting the **Change size** button, as shown in the following image.</span></span>

    ![เปลี่ยนขนาดของความจุ](media/dataflows-premium-workload-configuration/dataflows-premium-workloads-03.png)

3. <span data-ttu-id="4cd04-127">ในการตั้งค่าความจุคุณสามารถกำหนดค่าการตั้งค่ากระแสข้อมูลได้โดยการขยาย **ปริมาณงาน**</span><span class="sxs-lookup"><span data-stu-id="4cd04-127">In Capacity settings, you can configure dataflow settings by expanding **Workloads**.</span></span>

    ![ขยายส่วนปริมาณงาน](media/dataflows-premium-workload-configuration/dataflows-premium-workloads-04.png)

4. <span data-ttu-id="4cd04-129">ในส่วน **ปริมาณงาน** เลื่อนไปยังบริเวณ **กระแสข้อมูล**</span><span class="sxs-lookup"><span data-stu-id="4cd04-129">In the **Workloads** section, scroll to the **Dataflows** area.</span></span> <span data-ttu-id="4cd04-130">รูปภาพต่อไปนี้แสดงการตั้งค่าที่คุณสามารถใช้เพื่อควบคุมหรือปรับแต่งพฤติกรรมของปริมาณงานกระแสข้อมูลสำหรับความจุของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-130">The following image shows the settings you can use to control or refine the dataflow workload's behavior for your capacity.</span></span>

    ![การตั้งค่าปริมาณงานของกระแสข้อมูล](media/dataflows-premium-workload-configuration/dataflows-premium-workloads-05.png)

<span data-ttu-id="4cd04-132">ตารางต่อไปนี้แสดงคำอธิบายพื้นฐานของการตั้งค่ากระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-132">The following table provides a basic description of the dataflows settings.</span></span>



| <span data-ttu-id="4cd04-133">**ส่วนของผู้ดูแลระบบ**</span><span class="sxs-lookup"><span data-stu-id="4cd04-133">**Admin section**</span></span> | <span data-ttu-id="4cd04-134">**การตั้งค่าชื่อ**</span><span class="sxs-lookup"><span data-stu-id="4cd04-134">**Setting name**</span></span> | <span data-ttu-id="4cd04-135">**คำอธิบาย**</span><span class="sxs-lookup"><span data-stu-id="4cd04-135">**Description**</span></span> |
|---------|---------|---------|
| <span data-ttu-id="4cd04-136">**ขนาดความจุ**</span><span class="sxs-lookup"><span data-stu-id="4cd04-136">**Capacity Size**</span></span> | <span data-ttu-id="4cd04-137">**เปลี่ยนแปลงขนาด**</span><span class="sxs-lookup"><span data-stu-id="4cd04-137">**Change Size**</span></span> | <span data-ttu-id="4cd04-138">ความจุที่เลือกใช้ในปัจจุบันจะแสดงอยู่ พร้อมด้วยตัวเลือกเพื่อเปลี่ยนความจุ</span><span class="sxs-lookup"><span data-stu-id="4cd04-138">The current selected capacity is listed, with options to change the capacity.</span></span> <span data-ttu-id="4cd04-139">การเปลี่ยนการตั้งค่านี้จะช่วยให้สามารถปรับขนาดเพิ่มหรือลดขนาดของความจุได้</span><span class="sxs-lookup"><span data-stu-id="4cd04-139">Changing this setting allows for scale up or scale down of the capacity.</span></span> |
| <span data-ttu-id="4cd04-140">**ปริมาณงาน**</span><span class="sxs-lookup"><span data-stu-id="4cd04-140">**Workload**</span></span> | <span data-ttu-id="4cd04-141">**หน่วยความจำสูงสุด (%)**</span><span class="sxs-lookup"><span data-stu-id="4cd04-141">**Max Memory (%)**</span></span> | <span data-ttu-id="4cd04-142">เปอร์เซ็นต์สูงสุดของหน่วยความจำที่พร้อมใช้งานซึ่งกระแสข้อมูลสามารถใช้ความจุนี้ได้</span><span class="sxs-lookup"><span data-stu-id="4cd04-142">The maximum percentage of available memory that dataflows can use in a capacity.</span></span> |
| <span data-ttu-id="4cd04-143">**ปริมาณงาน**</span><span class="sxs-lookup"><span data-stu-id="4cd04-143">**Workload**</span></span> | <span data-ttu-id="4cd04-144">**เพิ่มประสิทธิภาพของเครื่องคำนวณกระแสข้อมูล**</span><span class="sxs-lookup"><span data-stu-id="4cd04-144">**Enhanced Dataflows Compute Engine**</span></span> | <span data-ttu-id="4cd04-145">เปิดใช้งานตัวเลือกนี้เพื่อให้การคำนวณเอนทิตี่มีการคำนวณเร็วขึ้นถึง 20 เท่า เมื่อทำงานกับข้อมูลจำนวนมาก</span><span class="sxs-lookup"><span data-stu-id="4cd04-145">Enable this option for up to 20x faster calculation of computed entities when working with large-scale data volumes.</span></span>  <span data-ttu-id="4cd04-146">**คุณต้องรีสตาร์ทความจุเพื่อเปิดใช้งานเครื่องใหม่**</span><span class="sxs-lookup"><span data-stu-id="4cd04-146">**You must restart the capacity to activate the new engine.**</span></span>  <span data-ttu-id="4cd04-147">กรุณาดูข้อมูลเพิ่มเติมที่ [ปรับปรุงเครื่องคำนวณกระแสข้อมูลให้มีประสิทธิภาพมากขึ้น](../../admin/service-admin-premium-workloads.md#enhanced-dataflows-compute-engine)</span><span class="sxs-lookup"><span data-stu-id="4cd04-147">For more information, see [Enhanced dataflows compute engine](../../admin/service-admin-premium-workloads.md#enhanced-dataflows-compute-engine).</span></span> |
| <span data-ttu-id="4cd04-148">**ปริมาณงาน**</span><span class="sxs-lookup"><span data-stu-id="4cd04-148">**Workload**</span></span> | <span data-ttu-id="4cd04-149">**ขนาดคอนเทนเนอร์**</span><span class="sxs-lookup"><span data-stu-id="4cd04-149">**Container Size**</span></span> | <span data-ttu-id="4cd04-150">ขนาดสูงสุดของคอนเทนเนอร์ที่กระแสข้อมูลใช้สำหรับเอนทิตีแต่ละรายการในกระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-150">The maximum size of the container that dataflows use for each entity in the dataflow.</span></span> <span data-ttu-id="4cd04-151">ค่าเริ่มต้นคือ 700 MB</span><span class="sxs-lookup"><span data-stu-id="4cd04-151">The default value is 700 MB.</span></span> <span data-ttu-id="4cd04-152">กรุณาดูข้อมูลเพิ่มเติมที่ [ขนาดคอนเทนเนอร์](../../admin/service-admin-premium-workloads.md#container-size)</span><span class="sxs-lookup"><span data-stu-id="4cd04-152">For more information, see [Container size](../../admin/service-admin-premium-workloads.md#container-size).</span></span> |
| <span data-ttu-id="4cd04-153">**ปริมาณงาน**</span><span class="sxs-lookup"><span data-stu-id="4cd04-153">**Workload**</span></span> | <span data-ttu-id="4cd04-154">**คำนวณหน่วยความจำเครื่อง (%)**</span><span class="sxs-lookup"><span data-stu-id="4cd04-154">**Compute engine memory (%)**</span></span> | <span data-ttu-id="4cd04-155">เปอร์เซ็นต์สูงสุดของหน่วยความจำที่ปันส่วนไปยังเครื่องคำนวณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-155">The maximum percentage of memory allocated to the compute engine.</span></span> <span data-ttu-id="4cd04-156">ค่าเริ่มต้นคือ 30%</span><span class="sxs-lookup"><span data-stu-id="4cd04-156">The default value is 30%</span></span> |

<span data-ttu-id="4cd04-157">ในส่วนต่อไปนี้เราจะไปยังรายละเอียดเกี่ยวกับการตั้งค่าแต่ละรายการและวิธีการส่งผลกระทบต่อปริมาณงานกระแสข้อมูลของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-157">In the following sections, we go into detail about each of the settings and how they affect your dataflow workload.</span></span>

### <a name="understanding-dataflow-workload-options"></a><span data-ttu-id="4cd04-158">การทำความเข้าใจตัวเลือกปริมาณงานกระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-158">Understanding dataflow workload options</span></span>

<span data-ttu-id="4cd04-159">วิธีง่าย ๆ ในการคิดเกี่ยวกับตัวเลือกปริมาณงานกระแสข้อมูลคือการใช้การเปรียบเทียบ</span><span class="sxs-lookup"><span data-stu-id="4cd04-159">A simple way to think about dataflow workload options is to use an analogy.</span></span> <span data-ttu-id="4cd04-160">*ขนาดความจุ* หรือชนิดของอินสแตนซ์ Power BI Premium ที่คุณมีให้คิดว่าเป็น *ร้านอาหาร* ของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-160">The *Capacity size*, or the type of Power BI Premium Instance you have, can be thought of as your *restaurant*.</span></span> <span data-ttu-id="4cd04-161">ภายในร้านอาหารของคุณ จะมี *หน่วยความจำปริมาณงาน* ซึ่งก็คือ *ครัว* ของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-161">Within your restaurant, you have your *workload memory*, which is your *kitchen*.</span></span> <span data-ttu-id="4cd04-162">*เครื่องคำนวณข้อมูล* เป็น *เตาอบ* ของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-162">The *compute engine* is your *oven*.</span></span> <span data-ttu-id="4cd04-163">และสุดท้าย *คอนเทนเนอร์* คือการจัดเรียงของคุณภาพของ *พ่อครัว* ของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-163">And lastly, the *container* is the sort of quality of your *chef*.</span></span> <span data-ttu-id="4cd04-164">ในการประเมินตัวเลือกปริมาณงานกระแสข้อมูลของคุณให้นึกภาพการเตรียมอาหารสำหรับอาหารค่ำขนาดใหญ่หรืออย่างมีนัยสำคัญมาก</span><span class="sxs-lookup"><span data-stu-id="4cd04-164">To evaluate your dataflow workload options, imagine preparing a meal for a large, or very significant dinner.</span></span> <span data-ttu-id="4cd04-165">คุณมีแขกที่สำคัญมากกำลังมาและคุณต้องมีอาหารค่ำพร้อมให้บริการโดยเวลาที่พวกเขามาถึง</span><span class="sxs-lookup"><span data-stu-id="4cd04-165">You have important guests coming over and you must have dinner ready to be served by the time they arrive.</span></span>

<span data-ttu-id="4cd04-166">เราจะใช้การเปรียบเทียบร้านอาหารนี้ เพื่ออธิบายและให้คำแนะนำเกี่ยวกับการตั้งค่าแต่ละรายการ</span><span class="sxs-lookup"><span data-stu-id="4cd04-166">We'll use this restaurant analogy as we explain and provide guidance on each of the setting.</span></span> <span data-ttu-id="4cd04-167">เราจะเริ่มต้นที่ระดับบนสุด - ความจุพรีเมียมของคุณ - เนื่องจากนี่คือตัวเลือกแรกที่คุณทำเมื่อใช้ Power BI Premium</span><span class="sxs-lookup"><span data-stu-id="4cd04-167">We'll start at the top level - your Premium Capacity - as this is the first choice you make when using Power BI Premium.</span></span>

#### <a name="premium-capacity-skus---scale-up-the-hardware"></a><span data-ttu-id="4cd04-168">ความจุพรีเมียม Sku - ขยายฮาร์ดแวร์</span><span class="sxs-lookup"><span data-stu-id="4cd04-168">Premium capacity SKUs - scale up the hardware</span></span>

<span data-ttu-id="4cd04-169">ปริมาณงาน Power BI Premium ใช้การผสมผสานแกนประมวลผลด้านหน้าและด้านหลังเพื่อให้บริการคิวรีอย่างรวดเร็วระหว่างปริมาณงานชนิดต่าง ๆ</span><span class="sxs-lookup"><span data-stu-id="4cd04-169">Power BI Premium workloads use a combination of front-end and backend cores to serve fast queries across the various workload types.</span></span> <span data-ttu-id="4cd04-170">[โหนดความจุ](../../admin/service-premium-what-is.md#capacity-nodes) บทความรวมแผนภูมิที่แสดงข้อมูลจำเพาะปัจจุบันของแต่ละข้อเสนอปริมาณงาน</span><span class="sxs-lookup"><span data-stu-id="4cd04-170">The [capacity nodes](../../admin/service-premium-what-is.md#capacity-nodes) article includes a chart that illustrates the current specifications across each of the available workload offerings.</span></span> <span data-ttu-id="4cd04-171">ความจุ A3 และที่สูงกว่าจะสามารถใช้ประโยชน์จากเครื่องมือคำนวณ ดังนั้นเมื่อคุณต้องการใช้เครื่องคำนวณขั้นสูงให้เริ่มต้นที่ – [โหนดความจุ](../../admin/service-premium-what-is.md#capacity-nodes)</span><span class="sxs-lookup"><span data-stu-id="4cd04-171">Capacities of A3 and greater can take advantage of the compute engine, so when you want to use the enhanced compute engine, start there – [Capacity nodes](../../admin/service-premium-what-is.md#capacity-nodes).</span></span> 

<span data-ttu-id="4cd04-172">ในการเปรียบเทียบกับร้านอาหารของเรา การเลือกความจุเหมือนกับการเลือกร้านอาหารที่มีคุณภาพสูง</span><span class="sxs-lookup"><span data-stu-id="4cd04-172">In our restaurant analogy, choosing a capacity is like choosing a higher-quality restaurant.</span></span> <span data-ttu-id="4cd04-173">แม้ว่าค่าใช้จ่ายสูงกว่าคุณสามารถคาดหวังประสิทธิภาพการทำงานที่สูงขึ้นเนื่องจากการเพิ่มขึ้นในแกนประมวลผลด้านหน้าแกนประมวลผลด้านหลังและหน่วยความจำเพิ่มเติม</span><span class="sxs-lookup"><span data-stu-id="4cd04-173">Though a higher cost, you can expect a higher level of performance due to the increase in front-end cores, backend cores, and more memory.</span></span> <span data-ttu-id="4cd04-174">เมื่อคุณไปสู่ร้านอาหารที่ใหญ่กว่าเดิม คุณจะได้รับห้องครัวที่ใหญ่กว่าและพ่อครัวที่ดีกว่าซึ่งจะเหมือนกับการปรับรุ่นเป็น SKU ที่สูงขึ้นใน Power BI Premium ช่วยให้คุณได้รับประโยชน์จากการเพิ่มความเร็ว CPU เพิ่มหน่วยความจำต่อการดำเนินการและการเพิ่มความขนานกันมากขึ้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-174">When you go to a bigger restaurant, you get a bigger kitchen, and better chefs, which are akin to upgrading to a higher SKU in Power BI Premium, giving you the benefit of increasing CPU speed, increasing memory per operation and adding more parallelism.</span></span>

#### <a name="max-memory---dedicating-a-capacity-for-dataflows"></a><span data-ttu-id="4cd04-175">หน่วยความจำสูงสุด - ทุ่มเทความจุสำหรับกระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-175">Max memory - dedicating a capacity for dataflows</span></span> 

<span data-ttu-id="4cd04-176">การตั้งค่า **หน่วยความจำสูงสุด %** เป็นเปอร์เซ็นต์ของหน่วยความจำจากหน่วยความจำกายภาพที่พร้อมใช้งานสำหรับความจุพรีเมียมที่ให้ไว้สำหรับปริมาณงานกระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-176">The **Max Memory %** setting is the percentage of memory, out of the physical memory available to the Premium capacity, provided for dataflows workloads.</span></span> <span data-ttu-id="4cd04-177">คุณสามารถทุ่มเทให้กับความจุทั้งหมดได้อย่างมีประสิทธิภาพสำหรับปริมาณงานกระแสข้อมูลและความจุจะปรับขนาดแบบไดนามิกตามที่จำเป็นสำหรับการจัดสรรที่คุณตั้งค่าไว้</span><span class="sxs-lookup"><span data-stu-id="4cd04-177">You can effectively dedicate up to the full capacity for a dataflows workload, and the capacity will scale up dynamically as needed to the allocation you set.</span></span> <span data-ttu-id="4cd04-178">ในการเปรียบเทียบของเราถ้าคุณทำให้ครัวของคุณใหญกว่าเดิม คุณสามารถปรุงอาหารได้มากขึ้น - เช่นเดียวกับที่คุณสามารถเพิ่มขนาดปริมาณงานของความจุสำหรับกระแสข้อมูลและให้กระแสข้อมูลได้มากขึ้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-178">In our analogy, if you make your kitchen bigger you can cook more meals – similarly, you can increase your capacity's workload size for dataflows and allow more dataflows.</span></span> <span data-ttu-id="4cd04-179">ในขณะที่มีการกำกับดูแลทรัพยากรแบบไดนามิกในสถานที่่ตัวเลือกการกำหนดค่า *หน่วยความจำสูงสุด %* ช่วยให้คุณสามารถทุ่มเท 100% ของหน่วยความจำสำหรับปริมาณงานกระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-179">While there is dynamic resource governance in place, the *Max Memory %* configuration option lets you dedicate 100% of the memory for the dataflows workload.</span></span> <span data-ttu-id="4cd04-180">สิ่งนี้ใช้สำหรับสถานการณ์ที่หายากเมื่อคุณต้องการตรวจสอบให้แน่ใจว่าหน่วยความจำของความจุสามารถใช้ได้สำหรับปริมาณงานกระแสข้อมูลของคุณแทนที่จะพึ่งพาการกำกับดูแลทรัพยากร</span><span class="sxs-lookup"><span data-stu-id="4cd04-180">This is for the rare situation when you want to ensure the capacity's memory is available for your dataflow workload, rather than relying on the Resource Governance.</span></span> <span data-ttu-id="4cd04-181">ด้วยการเปรียบเทียบ นี่จะเหมือนกับการตรวจสอบให้แน่ใจว่าห้องครัวของคุณมุ่งเน้นไปที่การเตรียมอาหารที่เฉพาะเจาะจงสำหรับแขก โดยทุ่มเทครัวเต็มรูปแบบไปยังงานนั้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-181">Using our analogy, this would be like making sure your kitchen is focusing on preparing a specific meal for a guest, dedicating the full kitchen to the task(s).</span></span> <span data-ttu-id="4cd04-182">แน่นอน ความสามารถในการทุ่มเทที่มากขึ้นไม่ได้หมายถึงอาหารที่ดีขึ้นหรือเวลาที่เร็วขึ้นไปยังตาราง – ในส่วนถัดไปจะอธิบาย</span><span class="sxs-lookup"><span data-stu-id="4cd04-182">Of course, the ability to dedicate more doesn't mean better food, or faster time to table – as the next section explains.</span></span>

#### <a name="container-size---refresh-or-out-of-memory-issues"></a><span data-ttu-id="4cd04-183">ขนาดคอนเทนเนอร์ - รีเฟรชหรือปัญหาหน่วยความจำไม่เพียงพอ</span><span class="sxs-lookup"><span data-stu-id="4cd04-183">Container size - refresh or out of memory issues</span></span>

<span data-ttu-id="4cd04-184">ถัดไป เราลองพูดคุยเกี่ยวกับการตั้งค่า **ขนาดของคอนเทนเนอร์ (Mb)**</span><span class="sxs-lookup"><span data-stu-id="4cd04-184">Next let's discuss the **Container Size (Mb)** setting.</span></span> <span data-ttu-id="4cd04-185">ภายใน กระแสข้อมูลใช้กระบวนการที่เรียกว่า *แมชอัปคอนเทนเนอร์* เพื่อประเมินกระบวนการ ETL ของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-185">Internally, dataflows use a process called *mashup containers* to evaluate your ETL processes.</span></span> <span data-ttu-id="4cd04-186">กลไกจัดการแยกตรรกะคิวรีของคุณลงในคอนเทนเนอร์เหล่านี้และสามารถดำเนินการควบคู่กันได้</span><span class="sxs-lookup"><span data-stu-id="4cd04-186">The engine splits your query logic into these containers and they can process in parallel.</span></span> <span data-ttu-id="4cd04-187">จำนวนของคอนเทนเนอร์ทำให้ประมวลผลพร้อมกันอย่างมีประสิทธิภาพและเพิ่มประสิทธิภาพการทำงานได้</span><span class="sxs-lookup"><span data-stu-id="4cd04-187">The number of containers effectively provides concurrent processing and increases performance.</span></span> <span data-ttu-id="4cd04-188">คอนเทนเนอร์เหล่านี้จะถูกจำกัดโดย **ความจุ** เป็นลำดับแรก การตั้งค่า **หน่วยความจำสูงสุด %** เป็นลำดับสอง จากนั้นจำนวนหน่วยความจำที่คุณจัดสรรโดยเฉพาะในการตั้งค่าคอนเทนเนอร์ซึ่งเป็นค่าเริ่มต้นคือ 700Mb</span><span class="sxs-lookup"><span data-stu-id="4cd04-188">These containers are constrained by the **Capacity** first, the **Max Memory %** setting second, and then the amount of memory you specifically allocate to them in the container setting, which by default is 700Mb.</span></span> <span data-ttu-id="4cd04-189">ดังนั้นจึงเป็นไปได้ที่จะเพิ่มปริมาณของหน่วยความจำฮาร์ดแวร์และเพิ่มขนาดคอนเทนเนอร์ แต่การทำเช่นนั้นจะลดการดำเนินการแบบขนานในขณะทีเพิ่มหน่วยความจำมากขึ้นสำหรับกระบวนการ ETL เฉพาะภายในคอนเทนเนอร์ของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-189">So it's possible to increase the amount of hardware memory, and increase the container size, but doing so will decrease the parallel operations while dedicating more memory for specific ETL process within your containers.</span></span> <span data-ttu-id="4cd04-190">จำนวนของคอนเทนเนอร์ได้รับการปรับให้เหมาะสมที่สุดสามเท่าของจำนวนแกนประมวลผลด้านหลังซึ่งเป็นสิ่งสำคัญเนื่องจากคุณไม่สามารถทำให้คอนเทนเนอร์มีขนาดเล็กมากและมีคอนเทนเนอร์ขนานมากเกินกว่าจุดนั้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-190">The number of containers is capped at three times the number of backend cores, which is important because you can't make the container very small, and have a lot of parallel containers beyond that point.</span></span> <span data-ttu-id="4cd04-191">ขนาดต่ำสุดที่คุณสามารถทำคอนเทนเนอร์คือ 200Mb</span><span class="sxs-lookup"><span data-stu-id="4cd04-191">The minimum size you can make a container is 200Mb.</span></span> <span data-ttu-id="4cd04-192">ขนาดคอนเทนเนอร์ยังคลุมไปยังระดับคิวรีซึ่งหมายความว่าแต่ละคิวรีได้รับการดำเนินการในคอนเทนเนอร์ของตนเองยกเว้นเมื่อคิวรีจะอ้างอิงคิวรีอื่น ๆ ในกรณีที่มีการรีเฟรชเป็นส่วนหนึ่งของคอนเทนเนอร์เดียวกัน</span><span class="sxs-lookup"><span data-stu-id="4cd04-192">The container size is also scoped to a query level, which means each query gets executed in its own container except when queries are referencing other queries, in which case they are refreshed as part of the same container.</span></span>

<span data-ttu-id="4cd04-193">ย้อนกลับไปยังการเปรียบเทียบของเรา การมีจำนวนพ่อครัวที่น้อยลงแต่มุ่งเน้นมากขึ้นในครัวช่วยให้คุณสามารถปรุงอาหารได้รวดเร็วขึ้นอยู่กับชนิดของคำสั่งอาหารที่วางไว้และความซับซ้อนของอาหาร</span><span class="sxs-lookup"><span data-stu-id="4cd04-193">Going back to our analogy, having fewer but more focused cooks in the kitchen enables you to cook a meal much faster, depending on the types of orders that are placed and the complexity of the meal.</span></span> <span data-ttu-id="4cd04-194">สิ่งที่ต้องแลกเปลี่ยนในที่นี้คือการมีพ่อครัวน้อยลงแต่มีเวลาที่มุ่งเน้นมากขึ้นสำหรับการเตรียมการ</span><span class="sxs-lookup"><span data-stu-id="4cd04-194">The tradeoff here is having fewer chefs, but more focused time for preparation.</span></span> <span data-ttu-id="4cd04-195">ในทำนองเดียวกันการเพิ่มหน่วยวัดขนาดคอนเทนเนอร์ไปที่ 1200-1500 MB สามารถหมายถึงจำนวนงาน ETL ที่น้อยลงแต่ซับซ้อนมากขึ้น – กิจกรรมเช่นการรวม การสร้าง ไพวอท การจัดการแถวหรือคอลัมน์ - สามารถมองเห็นการเพิ่มประสิทธิภาพในขณะที่เรามีหน่วยความจำเพิ่มเติมสำหรับแต่ละคอนเทนเนอร์ แต่ในการดำเนินการดังกล่าวลดจำนวนคอนเทนเนอร์ลง</span><span class="sxs-lookup"><span data-stu-id="4cd04-195">Similarly, increasing the container size measure to 1200-1500 MB can mean that a smaller number of more complex ETL jobs – activities such as aggregations, joins, pivots, row or column manipulations - can see a performance increase as we provide more memory for each container, but in doing so, reduce the number of containers.</span></span> <span data-ttu-id="4cd04-196">เช่นเดียวกับการเปรียบเทียบบ่งบอกว่าคำสั่งอาหารจำนวนมากเกินไปสามารถลดความเร็วในการออกผลผลิตจากห้องครัว ซึ่งเป็นวิธีที่คุณสามารถคิดเกี่ยวกับขนาดคอนเทนเนอร์ – ใช้สิ่งนี้เมื่อคุณจำเป็นต้องมีการดำเนินการเอนทิตีที่ซับซ้อนเพื่อให้เสร็จสมบูรณ์และคุณยินดีที่จะแลกเปลี่ยนแบบขนานเพื่อประสิทธิภาพการทำงานเนื่องจากการเพิ่มทรัพยากรนี้แบ่งหน่วยความจำที่จัดสรรให้คอนเทนเนอร์น้อยลง</span><span class="sxs-lookup"><span data-stu-id="4cd04-196">Just as the analogy implies, too many orders can actually slow down the kitchen output, which is how you can think about container size – use this when you need complex entity operations to complete, and you're willing to trade parallelism for performance, since increasing this resource divides the memory allocated to fewer containers.</span></span>

<span data-ttu-id="4cd04-197">โดยสรุป คุณต้องการปรับขนาดคอนเทนเนอร์ของคุณให้เหมาะสมตามคิวรีที่ใช้</span><span class="sxs-lookup"><span data-stu-id="4cd04-197">To summarize, you want to optimize your container size based on the queries being used.</span></span> <span data-ttu-id="4cd04-198">ตัวอย่างเช่น เพียงแค่โหลดข้อมูลจากแหล่งที่มาลงในเอนทิตี โดยไม่จำเป็นต้องดึงข้อมูลและดำเนินการใด ๆ เพียงแค่โหลดข้อมูลไปยังที่เก็บข้อมูลเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-198">For example, simply loading data from a source into an entity does not need to pull in data and perform any operations and just loads the data to storage.</span></span> <span data-ttu-id="4cd04-199">คุณต้องการความขนานมากที่สุดเท่าที่เป็นไปได้สำหรับสถานการณ์น ี้ตามที่คุณต้องการเพิ่มความเร็วในการโหลดและการรีเฟรช</span><span class="sxs-lookup"><span data-stu-id="4cd04-199">You want as much parallelism as possible for this situation, as you want to increase the speed of the load and refresh operations.</span></span> <span data-ttu-id="4cd04-200">ตรงกันข้ามเมื่อคุณเพิ่มการดำเนินการแปลงเพิ่มเติม – ตัวกรองที่ซับซ้อน การรวม การรวมหน่วยความจำอาจสูงกว่าที่เราอาจจำเป็นต้องดำเนินการบางอย่างของการดำเนินการแปลงเหล่านี้ในหน่วยความจำ</span><span class="sxs-lookup"><span data-stu-id="4cd04-200">Conversely, when you add more transformation operations – complex filters, joins, aggregations, the memory may be much higher as we may need to process some of these transformation operations in memory.</span></span> <span data-ttu-id="4cd04-201">โปรดระวังว่าถ้าคุณมีการดำเนินการกระแสข้อมูลอื่น ๆ ที่ทำงานอยู่บนความจุนั้น การดำเนินการเหล่านั้นจะช้าลงและบังคับให้เข้าคิวเพื่อให้มีสล็อตการดำเนินการ</span><span class="sxs-lookup"><span data-stu-id="4cd04-201">Be aware that if you have other dataflow operations running on the capacity, it can slow those operations and force them to queue up to have an execution slot.</span></span> <span data-ttu-id="4cd04-202">ในการสิ้นสุดการตรวจสอบและการจัดการของกระแสข้อมูล การรีเฟรชประสิทธิภาพการทำงานและความจุทั้งหมดได้รับการช่วยเหลือจากเมตริกความจุของแอป **Power BI Premium**</span><span class="sxs-lookup"><span data-stu-id="4cd04-202">To this end, monitoring and management of dataflows, refresh performance, and the entire capacity is aided by the **Power BI Premium Capacity Metrics** app.</span></span> <span data-ttu-id="4cd04-203">คุณสามารถใช้แอป[เมตริกความจุ Power BI Premium](../../admin/service-premium-capacity-optimize.md#what-content-is-using-up-my-capacity)เพื่อกรองตามความจุ และตรวจสอบเมตริกประสิทธิภาพการทำงานสำหรับเนื้อหาของพื้นที่ทำงานได้</span><span class="sxs-lookup"><span data-stu-id="4cd04-203">You can use the [Power BI Premium Capacity Metrics](../../admin/service-premium-capacity-optimize.md#what-content-is-using-up-my-capacity) app to filter by capacity, and review performance metrics for workspace content.</span></span> <span data-ttu-id="4cd04-204">คุณสามารถตรวจสอบเมตริกประสิทธิภาพการทำงานและการใช้งานทรัพยากรเป็นชั่วโมงในช่วงเจ็ดวันที่ผ่านมาสำหรับเนื้อหาทั้งหมดที่จัดเก็บไว้ภายในความจุแบบพรีเมียม - เพื่อตรวจสอบประสิทธิภาพการทำงานของกระแสข้อมูล จึงขอแนะนำให้เริ่มต้นด้วยแอป</span><span class="sxs-lookup"><span data-stu-id="4cd04-204">It's possible to review the performance metrics and resource usage by hour, for the past seven days, for all content stored within a Premium capacity – so for investigating dataflow performance, it's recommended to start with the app.</span></span>

#### <a name="enhanced-compute-engine---an-opportunity-to-improve-performance"></a><span data-ttu-id="4cd04-205">เพิ่มกลไกการคำนวณ - โอกาสในการปรับปรุงประสิทธิภาพการทำงาน</span><span class="sxs-lookup"><span data-stu-id="4cd04-205">Enhanced compute engine - an opportunity to improve performance</span></span>

<span data-ttu-id="4cd04-206">ในการเปรียบเทียบของเรา [กลไกการคำนวณขั้นสูง](dataflows-premium-features.md#the-enhanced-compute-engine) เหมือนกับเตาอบ</span><span class="sxs-lookup"><span data-stu-id="4cd04-206">In our analogy, the [enhanced compute engine](dataflows-premium-features.md#the-enhanced-compute-engine) is like an oven.</span></span> <span data-ttu-id="4cd04-207">Power BI ใช้เครื่องมือคำนวณเพื่อประมวลผลคิวรีและการรีเฟรชของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-207">Power BI uses a compute engine to process your queries and refresh operations.</span></span> <span data-ttu-id="4cd04-208">กลไกการคำนวณขั้นสูงคือการพัฒนากลไกมาตรฐานและทำงานโดยการโหลดข้อมูลไปยังแคช SQL และใช้ SQL เพื่อเร่งการแปลงเอนทิตี การดำเนินการรีเฟรชและเปิดใช้งานการเชื่อมต่อ DirectQuery</span><span class="sxs-lookup"><span data-stu-id="4cd04-208">The enhanced compute engine is an improvement over the standard engine, and works by loading data to a SQL Cache and uses SQL to accelerate entity transformation, refresh operations and enables DirectQuery connectivity.</span></span> <span data-ttu-id="4cd04-209">ถ้าเราเปรียบเทียบกลไกกับเตาอบ ขณะที่คุณใช้ประโยชน์จากเตาอบขั้นสูงคุณอาจสามารถปรุงอาหารได้รวดเร็วและมีประสิทธิภาพมากขึ้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-209">If we compare the engines to ovens, as you leverage the enhanced oven, you may be able to cook meals faster and more effectively.</span></span> <span data-ttu-id="4cd04-210">เมื่อกำหนดค่าให้ **เปิด** หรือ **ปรับให้เหมาะสม** สำหรับเอนทิตีที่มีการคำนวณถ้าตรรกะทางธุรกิจของคุณอนุญาตให้ Power BI ใช้ SQL เร่งประสิทธิภาพการทำงาน</span><span class="sxs-lookup"><span data-stu-id="4cd04-210">When configured to **On** or **Optimized** for computed entities, if your business logic allows for it, Power BI uses SQL speed up the performance.</span></span> <span data-ttu-id="4cd04-211">กลไกยังมีการ **เปิด** สำหรับการเชื่อมต่อ DirectQuery</span><span class="sxs-lookup"><span data-stu-id="4cd04-211">Having the engine **On** also provides for DirectQuery connectivity.</span></span> <span data-ttu-id="4cd04-212">อาจเปรียบเทียบได้กับ – อาหารบางอย่างอาจไม่จำเป็นต้องมีเตาอบหรือใช้ประโยชน์จากเตาอบ</span><span class="sxs-lookup"><span data-stu-id="4cd04-212">As the analogy suggests – certain meals might not need an oven, nor take advantage of the oven.</span></span> <span data-ttu-id="4cd04-213">กลไกการคำนวณขั้นสูงสามารถคิดได้ในลักษณะที่คล้ายกัน – ตรวจสอบให้แน่ใจว่าการใช้งานกระแสข้อมูลของคุณเป็นไปตามกลไกการคำนวณที่ได้รับการปรับปรุงอย่างถูกต้อง</span><span class="sxs-lookup"><span data-stu-id="4cd04-213">The enhanced compute engine can be thought of in a similar manner – make sure your dataflow usage is leveraging the enhanced compute engine properly.</span></span>

> [!NOTE]
> <span data-ttu-id="4cd04-214">กลไกการคำนวณขั้นสูงยังไม่พร้อมใช้งานในทุกภูมิภาค</span><span class="sxs-lookup"><span data-stu-id="4cd04-214">The enhanced compute engine is not yet available in all regions.</span></span>

## <a name="guidance-for-common-scenarios"></a><span data-ttu-id="4cd04-215">คำแนะนำสำหรับสถานการณ์ทั่วไป</span><span class="sxs-lookup"><span data-stu-id="4cd04-215">Guidance for common scenarios</span></span>

<span data-ttu-id="4cd04-216">ส่วนนี้จะให้คำแนะนำสำหรับสถานการณ์ทั่วไปเมื่อใช้ปริมาณงานกระแสข้อมูลด้วย Power BI Premium</span><span class="sxs-lookup"><span data-stu-id="4cd04-216">This section provides guidance for common scenarios when using dataflow workloads with Power BI Premium.</span></span>

### <a name="slow-refresh-times"></a><span data-ttu-id="4cd04-217">เวลารีเฟรชช้า</span><span class="sxs-lookup"><span data-stu-id="4cd04-217">Slow refresh times</span></span>

<span data-ttu-id="4cd04-218">เวลาการรีเฟรชช้ามักจะเป็นปัญหาแบบขนาน</span><span class="sxs-lookup"><span data-stu-id="4cd04-218">Slow refresh times are usually a parallelism issue.</span></span> <span data-ttu-id="4cd04-219">คุณควรตรวจทานตัวเลือกดังต่อไปนี้ตามลำดับ:</span><span class="sxs-lookup"><span data-stu-id="4cd04-219">You should review the following options, in order:</span></span>

1. <span data-ttu-id="4cd04-220">แนวคิดหลักสำหรับเวลาการรีเฟรชช้าคือลักษณะของการเตรียมข้อมูลของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-220">A key concept for slow refresh times is the nature of your data preparation.</span></span> <span data-ttu-id="4cd04-221">ในการเปรียบเทียบกับร้านอาหารของเราซึ่งมีการอธิบายไว้ในบทความก่อนหน้านี้ ลองนึกภาพอาหารที่เตรียมไว้แล้วรอให้ใช้งาน</span><span class="sxs-lookup"><span data-stu-id="4cd04-221">In our restaurant analogy explained earlier in this article, imagine having prepared food already, waiting to be used.</span></span> <span data-ttu-id="4cd04-222">ในสถานการณ์นี้อาหารสามารถปรุงได้เร็วขึ้นเนื่องจากเวลาการเตรียมงานน้อยที่สุด</span><span class="sxs-lookup"><span data-stu-id="4cd04-222">In this scenario, the food can be cooked much faster due to minimal prep time.</span></span> <span data-ttu-id="4cd04-223">ในทำนองเดียวกันเมื่อใดก็ตามที่คุณสามารถปรับเวลาการรีเฟรชช้าของคุณโดยการใช้ประโยชน์จากแหล่งข้อมูลของคุณ เพื่อเตรียมการและการดำเนินการตรรกะคิวรีล่วงหน้าคุณควรทำเช่นนั้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-223">Similarly, whenever you can optimize your slow refresh times by taking advantage of your data source actually doing the preparation and performing upfront query logic, you should do s.</span></span> <span data-ttu-id="4cd04-224">โดยเฉพาะเมื่อใช้ฐานข้อมูลเชิงสัมพันธ์เช่น SQL เป็นแหล่งข้อมูลของคุณควรดูว่าสามารถเรียกใช้คิวรีเริ่มต้นบนแหล่งข้อมูลและใช้คิวรีต้นทางดังกล่าวสำหรับการแยกกระแสข้อมูลสำหรับแหล่งข้อมูลได้หรือไม่</span><span class="sxs-lookup"><span data-stu-id="4cd04-224">Specifically, when using a relational database such as SQL as your source, see if the initial query can be run on the source, and use that source query for your initial extraction dataflow for the data source.</span></span> <span data-ttu-id="4cd04-225">ถ้าคุณไม่สามารถใช้คิวรีดั้งเดิมในระบบต้นทางให้ดำเนินการที่เครื่องมือ [กระแสข้อมูลสามารถพับไปยังแหล่งข้อมูล](/power-query/power-query-folding)ได้</span><span class="sxs-lookup"><span data-stu-id="4cd04-225">If you cannot use a native query in the source system, perform operations that the dataflows [engine can fold to the data source](/power-query/power-query-folding).</span></span>

2. <span data-ttu-id="4cd04-226">ประเมินการเผยแพร่เวลารีเฟรชในความจุเดียวกัน</span><span class="sxs-lookup"><span data-stu-id="4cd04-226">Evaluate spreading out refresh times on the same capacity.</span></span> <span data-ttu-id="4cd04-227">การดำเนินการรีเฟรชคือกระบวนการที่จำเป็นต้องมีการคำนวณที่สำคัญ</span><span class="sxs-lookup"><span data-stu-id="4cd04-227">Refresh operations are a process that requires significant compute.</span></span> <span data-ttu-id="4cd04-228">เมื่อใช้การเปรียบเทียบร้านอาหารของเรา การขยายเวลาการรีเฟรชจะเหมือนกับการจำกัดจำนวนแขกในร้านอาหารของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-228">Using our restaurant analogy, spreading out refresh times is akin to limiting the number of guests in your restaurant.</span></span> <span data-ttu-id="4cd04-229">เช่นเดียวกับที่ร้านอาหารจะกำหนดตารางเวลาของแขกและวางแผนสำหรับความจุ คุณยังต้องการพิจารณาการดำเนินการรีเฟรชในช่วงเวลาที่การใช้งานไม่ได้อยู่ในจุดสูงสุดทั้งหมด</span><span class="sxs-lookup"><span data-stu-id="4cd04-229">Just as restaurants will schedule guests and plan for capacity, you also want to consider refresh operations during times when usage is not at its full peak.</span></span> <span data-ttu-id="4cd04-230">ซึ่งสามารถใช้วิธีนี้บรรเทาไม่ให้ความจุทำงานหนักเกินไปได้อย่างยาวนาน</span><span class="sxs-lookup"><span data-stu-id="4cd04-230">This can go a long way toward alleviating strain on the capacity.</span></span>

3. <span data-ttu-id="4cd04-231">เพิ่มจำนวนหน่วยความจำโดยรวมที่มอบให้กับปริมาณงาน</span><span class="sxs-lookup"><span data-stu-id="4cd04-231">Increase the overall amount of memory given to the workload.</span></span> <span data-ttu-id="4cd04-232">ลองนึกถึงขนาดของห้องครัว</span><span class="sxs-lookup"><span data-stu-id="4cd04-232">Think of this as the size of kitchen.</span></span> <span data-ttu-id="4cd04-233">การปรับแต่งทรัพยากรนี้จะคล้ายกับการปรับจำนวนพ่อครัวที่คุณสามารถใส่ไว้ในครัวได้</span><span class="sxs-lookup"><span data-stu-id="4cd04-233">Refining this resource is similar to adjusting how many chefs can you fit in the kitchen.</span></span> <span data-ttu-id="4cd04-234">การดำเนินการนี้จะทำได้โดยการปรับการตั้งค่า **หน่วยความจำสูงสุด %** และเพิ่มสูงสุดถึง 100%</span><span class="sxs-lookup"><span data-stu-id="4cd04-234">This is done by adjusting the **Max Memory %** setting, and increasing it up to 100%.</span></span>

4. <span data-ttu-id="4cd04-235">ลดจำนวนหน่วยความจำลงในคอนเทนเนอร์ซึ่งช่วยให้สามารถใช้คอนเทนเนอร์ได้มากขึ้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-235">Decrease the amount of memory to the container, which allows for more containers.</span></span> <span data-ttu-id="4cd04-236">คุณสามารถคิดแบบนี้: แทนที่จะจ้างพ่อครัวที่มีชื่อเสียงเช่นกอร์ดอน แรมซีย์ ให้จ้างพ่อครัวที่มีความสามารถหลายคนแต่จ่ายน้อยกว่า</span><span class="sxs-lookup"><span data-stu-id="4cd04-236">You can think of this as: instead of hiring a famously capable chef like Gordon Ramsey, hire many competent but less expensive chefs.</span></span> <span data-ttu-id="4cd04-237">ดังนั้นคุณจึงมีพ่อครัวมากขึ้นในครัวแต่พ่อครัวเหล่านั้นสามารถทำงานที่มีขนาดเล็กได้เท่านั้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-237">So you have more cooks in the kitchen, but those chefs can only perform smaller tasks.</span></span> <span data-ttu-id="4cd04-238">จากนั้นคุณมีคอนเทนเนอร์มากขึ้นแต่หน่วยความจำน้อยลง</span><span class="sxs-lookup"><span data-stu-id="4cd04-238">Then you have more containers, but less memory.</span></span>

5. <span data-ttu-id="4cd04-239">ทำตามขั้นตอนก่อนหน้านี้เพื่อให้ได้ระดับความขนานสูงขึ้นเนื่องจากคุณได้รับพ่อครัวมากขึ้นและครัวใหญ่ขึ้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-239">Do both of the previous steps, allowing for an even higher degree of parallelism, because you get more cooks and a bigger kitchen.</span></span>
    
6. <span data-ttu-id="4cd04-240">ถ้าขั้นตอนในส่วนนี้ไม่มีระดับความขนานที่ต้องการให้พิจารณาการปรับรุ่นความจุของคุณเป็น SKU ที่สูงขึ้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-240">If the steps in this section don't provide the desired degree of parallelism, consider upgrading your capacity to a higher SKU.</span></span> <span data-ttu-id="4cd04-241">จากนั้นทำตามขั้นตอนก่อนหน้าในส่วนนี้อีกครั้ง</span><span class="sxs-lookup"><span data-stu-id="4cd04-241">Then follow steps the previous steps in this section again.</span></span>

### <a name="out-of-memory-exceptions"></a><span data-ttu-id="4cd04-242">ข้อยกเว้นหน่วยความจำไม่เพียงพอ</span><span class="sxs-lookup"><span data-stu-id="4cd04-242">Out of memory exceptions</span></span>

<span data-ttu-id="4cd04-243">เมื่อคุณพบ **ข้อยกเว้นหน่วยความจำไม่เพียงพอ** คุณจำเป็นต้องเพิ่มประสิทธิภาพการทำงานของคอนเทนเนอร์และหน่วยความจำ</span><span class="sxs-lookup"><span data-stu-id="4cd04-243">When you experience **out of memory exceptions**, you need to increase performance of the containers and memory.</span></span> <span data-ttu-id="4cd04-244">ทำตามขั้นตอนต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="4cd04-244">Take the following steps.</span></span>

1. <span data-ttu-id="4cd04-245">เพิ่มหน่วยความจำบนคอนเทนเนอร์</span><span class="sxs-lookup"><span data-stu-id="4cd04-245">Increase memory on the container.</span></span> <span data-ttu-id="4cd04-246">ซึ่งคล้ายกับการมีพ่อครัวหนึ่งดาวกับพ่อครัวหลายคนดังที่อธิบายไว้ในส่วนก่อนหน้านี้</span><span class="sxs-lookup"><span data-stu-id="4cd04-246">This is similar to having one star chef versus many chefs, as described in the previous section.</span></span>

2. <span data-ttu-id="4cd04-247">เพิ่มหน่วยความจำไปยังปริมาณงานและหน่วยความจำเพิ่มเติมไปยังคอนเทนเนอร์</span><span class="sxs-lookup"><span data-stu-id="4cd04-247">Increase memory to workload and more memory to container.</span></span> <span data-ttu-id="4cd04-248">ในการเปรียบเทียบของเราคือการสร้างห้องครัวขนาดใหญ่และมีพ่อครัวคุณภาพสูง</span><span class="sxs-lookup"><span data-stu-id="4cd04-248">In our analogy, it creates a bigger kitchen and higher-quality chefs.</span></span>

3. <span data-ttu-id="4cd04-249">ถ้าการเปลี่ยนแปลงเหล่านี้ไม่ทำให้ได้ระดับความขนานที่คุณต้องการให้พิจารณา Power BI Premium SKU ที่สูงขั้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-249">If these changes don't give you the desired degree of parallelism, consider a higher Power BI Premium SKU.</span></span>

### <a name="using-the-compute-engine-to-improve-performance"></a><span data-ttu-id="4cd04-250">การใช้เครื่องคำนวณเพื่อปรับปรุงประสิทธิภาพการทำงาน</span><span class="sxs-lookup"><span data-stu-id="4cd04-250">Using the compute engine to improve performance</span></span>

<span data-ttu-id="4cd04-251">ทำตามขั้นตอนต่อไปนี้เพื่อเปิดใช้งานทริกเกอร์เครื่องคำนวณและปรับปรุงประสิทธิภาพการทำงานเสมอ:</span><span class="sxs-lookup"><span data-stu-id="4cd04-251">Take the following steps to enable workloads trigger the compute engine, and always improve performance:</span></span>

<span data-ttu-id="4cd04-252">**สำหรับเอนทิตีที่มีการคำนวณและเชื่อมโยงในพื้นที่ทำงานเดียวกัน:**</span><span class="sxs-lookup"><span data-stu-id="4cd04-252">**For computed and linked entities in the same workspace:**</span></span>

1. <span data-ttu-id="4cd04-253">สำหรับ *การนำเข้า* มุ่งเน้นไปที่การรับข้อมูลลงในที่เก็บได้อย่างรวดเร็วที่สุดเท่าที่เป็นไปได้โดยใช้ตัวกรองเฉพาะเมื่อพวกเขาลดขนาดชุดข้อมูลโดยรวม</span><span class="sxs-lookup"><span data-stu-id="4cd04-253">For *ingestion* focus on getting the data into the storage as fast as possible, using filters only if they reduce the overall dataset size.</span></span> <span data-ttu-id="4cd04-254">ซึ่งเป็นแนวทางปฏิบัติที่ดีที่สุดในการเก็บตรรกะการแปลงของคุณแยกต่างหากจากขั้นตอนนี้และอนุญาตให้เครื่องมือรวบรวมส่วนประกอบเริ่มต้น</span><span class="sxs-lookup"><span data-stu-id="4cd04-254">It's best practice to keep your transformation logic separate from this step, and allow the engine to focus on the initial gathering of ingredients.</span></span> <span data-ttu-id="4cd04-255">ถัดไปแยกการแปลงและตรรกะทางธุรกิจของคุณลงในกระแสข้อมูลที่แยกต่างหากในพื้นที่ทำงานเดียวกันโดยใช้เอนทิตีที่เชื่อมโยงหรือคำนวณ การดำเนินการดังกล่าวจะช่วยให้กลไกจัดการเปิดใช้งานและเร่งความเร็วคำนวณของคุณ</span><span class="sxs-lookup"><span data-stu-id="4cd04-255">Next, separate your transformation and business logic into a separate dataflow in the same workspace, using linked or computed entities; doing so allows for the engine to activate and accelerate your computations.</span></span> <span data-ttu-id="4cd04-256">ในการเปรียบเทียบของเรา เช่นเดียวกับการเตรียมอาหารในครัว: การเตรียมอาหารมักจะเป็นขั้นตอนที่แยกต่างหากและแตกต่างจากการรวบรวมวัตถุดิบของคุณและจำเป็นต้องมีก่อนการใส่อาหารในเตาอบ</span><span class="sxs-lookup"><span data-stu-id="4cd04-256">In our analogy, it's like food preparation in the kitchen: food preparation is typically a separate and distinct step from gathering your raw ingredients, and a pre-requisite for putting the food in the oven.</span></span> <span data-ttu-id="4cd04-257">ในทำนองเดียวกันตรรกะของคุณจำเป็นต้องได้รับการเตรียมแยกต่างหากก่อนจึงจะสามารถใช้ประโยชน์จากเครื่องคำนวณได้</span><span class="sxs-lookup"><span data-stu-id="4cd04-257">Similarly, your logic needs to be prepared separately before it can take advantage of the compute engine.</span></span>

2. <span data-ttu-id="4cd04-258">ตรวจสอบให้แน่ใจว่าคุณทำการดำเนินการที่พับรวม เช่น ผสาน รวม แปลง และ [อื่น ๆ](/power-query/power-query-folding#transformations-that-can-achieve-folding)</span><span class="sxs-lookup"><span data-stu-id="4cd04-258">Ensure you perform the operations that fold, such as merges, joins, conversion, and [others](/power-query/power-query-folding#transformations-that-can-achieve-folding).</span></span>

3. <span data-ttu-id="4cd04-259">การสร้างกระแสข้อมูล [ภายในแนวทางที่เผยแพร่และข้อจำกัด](dataflows-features-limitations.md#dataflows-in-premium)</span><span class="sxs-lookup"><span data-stu-id="4cd04-259">Building dataflows [within published guidelines and limitations](dataflows-features-limitations.md#dataflows-in-premium).</span></span>

<span data-ttu-id="4cd04-260">คุณยังสามารถใช้ DirectQuery ได้</span><span class="sxs-lookup"><span data-stu-id="4cd04-260">You can also use DirectQuery.</span></span>

### <a name="compute-engine-is-on-but-performance-is-slow"></a><span data-ttu-id="4cd04-261">เครื่องคำนวณเปิดใช้อยู่แต่ประสิทธิภาพการทำงานช้าลง</span><span class="sxs-lookup"><span data-stu-id="4cd04-261">Compute engine is on but performance is slow</span></span>

<span data-ttu-id="4cd04-262">ทำตามขั้นตอนต่อไปนี้เมื่อตรวจสอบสถานการณ์ทีเครื่องคำนวณเปิดอยู่แต่คุณพบว่าประสิทธิภาพการทำงานช้าลง:</span><span class="sxs-lookup"><span data-stu-id="4cd04-262">Take the following steps when investigating scenarios where the Compute engine is on, but you're seeing slower performance:</span></span>

1. <span data-ttu-id="4cd04-263">จำกัดการคำนวณและเอนทิตีที่เชื่อมโยงที่ข้ามพื้นที่ทำงานอยู่</span><span class="sxs-lookup"><span data-stu-id="4cd04-263">Limit computed and linked entities that exist cross workspace.</span></span>

2. <span data-ttu-id="4cd04-264">ถ้าการรีเฟรชเริ่มต้นเปิดใช้เครื่องคำนวณแล้วจากนั้นข้อมูลจะได้รับการเขียนในเลคและในแคช</span><span class="sxs-lookup"><span data-stu-id="4cd04-264">If your initial refresh with the compute engine turned on, then data gets written in the lake and in the cache.</span></span> <span data-ttu-id="4cd04-265">การเขียนสองชั้นนี้หมายความว่าการรีเฟรชเหล่านี้จะทำงานช้าลง</span><span class="sxs-lookup"><span data-stu-id="4cd04-265">This double write means these refreshes will be slower.</span></span>

3. <span data-ttu-id="4cd04-266">ถ้าคุณมีการเชื่อมโยงกระแสข้อมูลไปยังกระแสข้อมูลหลายแห่ง ตรวจสอบให้แน่ใจว่าคุณกำหนดตารางเวลาการรีเฟรชกระแสข้อมูลของแหล่งข้อมูลเพื่อให้ไม่ทำงานในเวลาเดียวกันทั้งหมด</span><span class="sxs-lookup"><span data-stu-id="4cd04-266">If you have a dataflow linking to multiple dataflows, make sure you schedule refreshes of the source dataflows so that they do not all refresh at the same time.</span></span>


## <a name="next-steps"></a><span data-ttu-id="4cd04-267">ขั้นตอนถัดไป</span><span class="sxs-lookup"><span data-stu-id="4cd04-267">Next steps</span></span>
<span data-ttu-id="4cd04-268">บทความต่อไปนี้ให้ข้อมูลเพิ่มเติมเกี่ยวกับกระแสข้อมูลและ Power BI:</span><span class="sxs-lookup"><span data-stu-id="4cd04-268">The following articles provide more information about dataflows and Power BI:</span></span>

* [<span data-ttu-id="4cd04-269">ข้อมูลเบื้องต้นเกี่ยวกับกระแสข้อมูลและการเตรียมข้อมูลด้วยตนเอง</span><span class="sxs-lookup"><span data-stu-id="4cd04-269">Introduction to dataflows and self-service data prep</span></span>](dataflows-introduction-self-service.md)
* [<span data-ttu-id="4cd04-270">การสร้างกระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-270">Creating a dataflow</span></span>](dataflows-create.md)
* [<span data-ttu-id="4cd04-271">กำหนดค่าและใช้กระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-271">Configure and consume a dataflow</span></span>](dataflows-configure-consume.md)
* [<span data-ttu-id="4cd04-272">การกำหนดค่าที่จัดเก็บกระแสข้อมูลเพื่อใช้ Azure Data Lake Gen 2</span><span class="sxs-lookup"><span data-stu-id="4cd04-272">Configuring Dataflow storage to use Azure Data Lake Gen 2</span></span>](dataflows-azure-data-lake-storage-integration.md)
* [<span data-ttu-id="4cd04-273">AI กับกระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-273">AI with dataflows</span></span>](dataflows-machine-learning-integration.md)
* [<span data-ttu-id="4cd04-274">ข้อจำกัดและข้อควรพิจารณาของกระแสข้อมูล</span><span class="sxs-lookup"><span data-stu-id="4cd04-274">Dataflows limitations and considerations</span></span>](dataflows-features-limitations.md)