---
title: โหมดที่เก็บข้อมูลใน Power BI Desktop
description: ใช้โหมดที่เก็บข้อมูลเพื่อควบคุมว่าข้อมูลถูกแคชในหน่วยความจำสำหรับรายงานใน Power BI Desktop หรือไม่
author: davidiseminger
ms.author: davidi
ms.reviewer: ''
ms.service: powerbi
ms.subservice: pbi-transform-model
ms.topic: conceptual
ms.date: 01/29/2020
LocalizationGroup: Transform and shape data
ms.openlocfilehash: 0a3121e31aa816139c338746635b102be2d8fd88
ms.sourcegitcommit: 653e18d7041d3dd1cf7a38010372366975a98eae
ms.translationtype: HT
ms.contentlocale: th-TH
ms.lasthandoff: 12/01/2020
ms.locfileid: "96413828"
---
# <a name="manage-storage-mode-in-power-bi-desktop"></a><span data-ttu-id="778da-103">จัดการโหมดที่เก็บข้อมูลใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="778da-103">Manage storage mode in Power BI Desktop</span></span>

<span data-ttu-id="778da-104">ใน Microsoft Power BI Desktop คุณสามารถระบุโหมดที่เก็บข้อมูลของตารางได้</span><span class="sxs-lookup"><span data-stu-id="778da-104">In Microsoft Power BI Desktop, you can specify the storage mode of a table.</span></span> <span data-ttu-id="778da-105">โหมดเก็บข้อมูลจะทำให้คุณสามารถควบคุมว่า Power BI Desktop แคชข้อมูลตารางในหน่วยความจำสำหรับรายงานหรือไม่</span><span class="sxs-lookup"><span data-stu-id="778da-105">The storage mode lets you control whether Power BI Desktop caches table data in-memory for reports.</span></span> 

<span data-ttu-id="778da-106">การตั้งค่าโหมดที่เก็บข้อมูลเอื้อประโยชน์หลายอย่าง</span><span class="sxs-lookup"><span data-stu-id="778da-106">Setting the storage mode provides many advantages.</span></span> <span data-ttu-id="778da-107">คุณสามารถตั้งค่าโหมดเก็บข้อมูลสำหรับตารางแต่ละรายการแยกต่างหากในโมเดลของคุณ</span><span class="sxs-lookup"><span data-stu-id="778da-107">You can set the storage mode for each table individually in your model.</span></span> <span data-ttu-id="778da-108">การดำเนินการนี้จะเปิดใช้งานชุดข้อมูลเดียวซึ่งมีประโยชน์ดังนี้:</span><span class="sxs-lookup"><span data-stu-id="778da-108">This action enables a single dataset, which provides the following benefits:</span></span>

* <span data-ttu-id="778da-109">**ประสิทธิภาพคิวรี**: เมื่อผู้ใช้โต้ตอบกับภาพในรายงาน Power BI คิวรี Data Analysis Expressions (DAX) จะถูกส่งไปยังชุดข้อมูล</span><span class="sxs-lookup"><span data-stu-id="778da-109">**Query performance**: As users interact with visuals in Power BI reports, Data Analysis Expressions (DAX) queries are submitted to the dataset.</span></span> <span data-ttu-id="778da-110">การแคชข้อมูลลงในหน่วยความจำด้วยการตั้งค่าโหมดที่เก็บข้อมูลอย่างเหมาะสมสามารถเพิ่มประสิทธิภาพคิวรีและการโต้ตอบของรายงานได้</span><span class="sxs-lookup"><span data-stu-id="778da-110">Caching data into memory by properly setting the storage mode can boost the query performance and interactivity of your reports.</span></span>

* <span data-ttu-id="778da-111">**ชุดข้อมูลขนาดใหญ่**: ตารางที่ไม่ได้ถูกแคชจะไม่ใช้หน่วยความจำสำหรับการแคช</span><span class="sxs-lookup"><span data-stu-id="778da-111">**Large datasets**: Tables that aren't cached don't consume memory for caching purposes.</span></span> <span data-ttu-id="778da-112">คุณสามารถเปิดใช้งานการวิเคราะห์แบบโต้ตอบผ่านชุดข้อมูลขนาดใหญ่ที่มีขนาดใหญ่หรือแพงเกินไปที่จะแคชลงในหน่วยความจำโดยสมบูรณ์</span><span class="sxs-lookup"><span data-stu-id="778da-112">You can enable interactive analysis over large datasets that are too large or expensive to completely cache into memory.</span></span> <span data-ttu-id="778da-113">คุณสามารถเลือกว่าตารางใดที่ควรแคชและตารางใดที่ไม่ควร</span><span class="sxs-lookup"><span data-stu-id="778da-113">You can choose which tables are worth caching, and which aren't.</span></span>

* <span data-ttu-id="778da-114">**การปรับการรีเฟรชข้อมูลให้เหมาะสม**: คุณไม่จำเป็นต้องรีเฟรชตารางที่ไม่มีการแคช</span><span class="sxs-lookup"><span data-stu-id="778da-114">**Data refresh optimization**: You don't need to refresh tables that aren't cached.</span></span> <span data-ttu-id="778da-115">คุณสามารถลดระยะเวลาที่ใช้รีเฟรชได้โดยการแคชเฉพาะข้อมูลที่จำเป็นต่อการทำตามข้อกำหนดทางธุรกิจและข้อตกลงการบริการ</span><span class="sxs-lookup"><span data-stu-id="778da-115">You can reduce refresh times by caching only the data that's necessary to meet your service level agreements and your business requirements.</span></span>

* <span data-ttu-id="778da-116">**ข้อกำหนดแบบ Near Real Time**: ตารางที่มีข้อกำหนดแบบ Near Real Time อาจได้รับประโยชน์จากการไม่ถูกแคช เพื่อลดเวลาแฝงของข้อมูล</span><span class="sxs-lookup"><span data-stu-id="778da-116">**Near-real time requirements**: Tables with near-real time requirements might benefit from not being cached, to reduce data latency.</span></span>

* <span data-ttu-id="778da-117">**การเขียนกลับ**: การเขียนกลับ ช่วยให้ผู้ใช้ธุรกิจสามารถสำรวจสถานการณ์แบบ What-If ด้วยการเปลี่ยนแปลงค่าเซลล์</span><span class="sxs-lookup"><span data-stu-id="778da-117">**Writeback**: Writeback enables business users to explore what-if scenarios by changing cell values.</span></span> <span data-ttu-id="778da-118">แอปพลิเคชันแบบกำหนดเองสามารถทำการเปลี่ยนแปลงไปยังแหล่งข้อมูลได้</span><span class="sxs-lookup"><span data-stu-id="778da-118">Custom applications can apply changes to the data source.</span></span> <span data-ttu-id="778da-119">ตารางที่ไม่ได้ถูกแคชสามารถแสดงการเปลี่ยนแปลงได้ทันที ซึ่งช่วยให้ทำการวิเคราะห์ผลกระทบได้โดยฉับพลัน</span><span class="sxs-lookup"><span data-stu-id="778da-119">Tables that aren't cached can display changes immediately, which allows instant analysis of the effects.</span></span>

<span data-ttu-id="778da-120">การตั้งค่าโหมดที่เก็บข้อมูลใน Power BI Desktop คือหนึ่งในสามคุณลักษณะที่เกี่ยวข้อง:</span><span class="sxs-lookup"><span data-stu-id="778da-120">The storage mode setting in Power BI Desktop is one of three related features:</span></span>

* <span data-ttu-id="778da-121">**โมเดลแบบรวม**: อนุญาตให้รายงานมีการเชื่อมต่อข้อมูลตั้งแต่สองแบบขึ้นไป รวมถึงการเชื่อมต่อ DirectQuery หรือการนำเข้า ในรูปแบบใดๆ ก็ตาม</span><span class="sxs-lookup"><span data-stu-id="778da-121">**Composite models**: Allows a report to have two or more data connections, including DirectQuery connections or Import, in any combination.</span></span> <span data-ttu-id="778da-122">สำหรับข้อมูลเพิ่มเติม โปรดดูการ[ใช้โมเดลแบบรวมใน Power BI Desktop](desktop-composite-models.md)</span><span class="sxs-lookup"><span data-stu-id="778da-122">For more information, see [Use composite models in Power BI Desktop](desktop-composite-models.md).</span></span>

* <span data-ttu-id="778da-123">**ความสัมพันธ์แบบกลุ่มต่อกลุ่ม**: ด้วยโมเดลแบบรวม คุณสามารถตั้ง *ความสัมพันธ์ มาก-ไป-มาก* ระหว่างตาราง</span><span class="sxs-lookup"><span data-stu-id="778da-123">**Many-to-many relationships**: With composite models, you can establish *many-to-many relationships* between tables.</span></span> <span data-ttu-id="778da-124">ในความสัมพันธ์บบกลุ่มต่อกลุ่ม จะมีการลบคำขอสำหรับค่าที่ไม่ซ้ำกันในตาราง</span><span class="sxs-lookup"><span data-stu-id="778da-124">In a many-to-many relationship, requirements are removed for unique values in tables.</span></span> <span data-ttu-id="778da-125">นอกจากนี้ยังเอาการแก้ปัญหาชั่วคราวก่อนหน้าออกด้วย เช่น การเริ่มตารางใหม่เพื่อสร้างความสัมพันธ์เท่านั้น</span><span class="sxs-lookup"><span data-stu-id="778da-125">It also removes prior workarounds, such as introducing new tables only to establish relationships.</span></span> <span data-ttu-id="778da-126">สำหรับข้อมูลเพิ่มเติม โปรดดู [ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่มใน Power BI Desktop (ตัวอย่าง)](desktop-many-to-many-relationships.md)</span><span class="sxs-lookup"><span data-stu-id="778da-126">For more information, see [Many-to-many relationships in Power BI Desktop](desktop-many-to-many-relationships.md).</span></span>

* <span data-ttu-id="778da-127">**โหมดการจัดเก็บข้อมูล**: ด้วยโหมดการจัดเก็บข้อมูล ขณะนี้ คุณสามารถระบุวิชวลที่จำเป็นต้องมีคิวรีไปยังแหล่งข้อมูลส่วนหลัง</span><span class="sxs-lookup"><span data-stu-id="778da-127">**Storage mode**: With storage mode, you can now specify which visuals require a query to back-end data sources.</span></span> <span data-ttu-id="778da-128">วิชวลที่ไม่ต้องใช้คิวรีจะถูกนำเข้าแม้ว่าจะมาจาก DirectQuery</span><span class="sxs-lookup"><span data-stu-id="778da-128">Visuals that don't require a query are imported even if they're based on DirectQuery.</span></span> <span data-ttu-id="778da-129">คุณลักษณะนี้จะช่วยปรับปรุงประสิทธิภาพ และลดการโหลดระบบ Back-end</span><span class="sxs-lookup"><span data-stu-id="778da-129">This feature helps improve performance and reduce back-end load.</span></span> <span data-ttu-id="778da-130">ก่อนหน้านี้ แม้กระทั่งวิชวลพื้นฐานอย่างตัวแบ่งส่วนข้อมูล ก็นำคิวรีที่ถูกส่งไปยังแหล่งระบบ Back-end</span><span class="sxs-lookup"><span data-stu-id="778da-130">Previously, even simple visuals, such as slicers, initiated queries that were sent to back-end sources.</span></span> 

## <a name="use-the-storage-mode-property"></a><span data-ttu-id="778da-131">ใช้คุณสมบัติโหมดที่เก็บข้อมูล</span><span class="sxs-lookup"><span data-stu-id="778da-131">Use the Storage mode property</span></span>

<span data-ttu-id="778da-132">คุณสมบัติ **โหมดที่เก็บข้อมูล** เป็นคุณสมบัติที่คุณสามารถตั้งค่าบนแต่ละตารางในแบบจำลองของคุณและควบคุมวิธีที่ Power BI แคชข้อมูลตาราง</span><span class="sxs-lookup"><span data-stu-id="778da-132">The **Storage mode** property is a property that you can set on each table in your model and controls how Power BI caches the table data.</span></span>

<span data-ttu-id="778da-133">หากต้องการตั้งค่าคุณสมบัติ **โหมดที่เก็บข้อมูล** หรือดูการตั้งค่าปัจจุบัน:</span><span class="sxs-lookup"><span data-stu-id="778da-133">To set the **Storage mode** property, or view its current setting:</span></span> 

1. <span data-ttu-id="778da-134">ในมุมมอง **แบบจำลอง** เลือกตารางที่มีคุณสมบัติที่คุณต้องการดูหรือตั้งค่า</span><span class="sxs-lookup"><span data-stu-id="778da-134">in **Model** view, select the table whose properties you want to view or set.</span></span> 
2. <span data-ttu-id="778da-135">ในบานหน้าต่าง **คุณสมบัติ** ขยายส่วน **ขั้นสูง** และขยายรายการแบบหล่นลง **โหมดที่เก็บข้อมูล**</span><span class="sxs-lookup"><span data-stu-id="778da-135">In the **Properties** pane, expand the **Advanced** section, and expand the **Storage mode** drop-down.</span></span>

   ![เลือกคุณสมบัติโหมดที่เก็บข้อมูล](media/desktop-storage-mode/storage-mode-02.png)

<span data-ttu-id="778da-137">คุณตั้งค่าคุณสมบัติ **โหมดที่เก็บข้อมูล** เป็นหนึ่งในค่าสามค่าต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="778da-137">You set the **Storage mode** property to one of these three values:</span></span>

* <span data-ttu-id="778da-138">**นำเข้า**: ตารางนำเข้าที่มีการตั้งค่านี้ จะถูกแคช</span><span class="sxs-lookup"><span data-stu-id="778da-138">**Import**: Imported tables with this setting are cached.</span></span> <span data-ttu-id="778da-139">คิวรีที่ส่งไปยังชุดข้อมูล Power BI ที่ส่งกลับข้อมูลจากตารางนำเข้าสามารถเติมเต็มได้จากข้อมูลแคชเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="778da-139">Queries submitted to the Power BI dataset that return data from Import tables can be fulfilled only from cached data.</span></span>

* <span data-ttu-id="778da-140">**DirectQuery**: ตารางที่มีการตั้งค่านี้ จะไม่ถูกแคช</span><span class="sxs-lookup"><span data-stu-id="778da-140">**DirectQuery**: Tables with this setting aren't cached.</span></span> <span data-ttu-id="778da-141">คิวรีที่ส่งไปยังชุดข้อมูล Power BI&mdash; เช่น คิวรี DAX&mdash; และที่แสดงข้อมูลจากตาราง DirectQuery สามารถเติมเต็มได้โดยการดำเนินการคิวรีตามคำขอไปยังแหล่งข้อมูลเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="778da-141">Queries that you submit to the Power BI dataset&mdash;for example, DAX queries&mdash;and that return data from DirectQuery tables can be fulfilled only by executing on-demand queries to the data source.</span></span> <span data-ttu-id="778da-142">คิวรีที่ส่งไปยังแหล่งข้อมูลจะใช้ภาษาคิวรีสำหรับแหล่งข้อมูลนั้นๆ เช่น SQL</span><span class="sxs-lookup"><span data-stu-id="778da-142">Queries that you submit to the data source use the query language for that data source, for example, SQL.</span></span>

* <span data-ttu-id="778da-143">**คู่**: ตารางที่มีการตั้งค่านี้สามารถแคชหรือไม่แคชก็ได้ ขึ้นอยู่กับบริบทของคิวรีที่ส่งไปยังชุดข้อมูล Power BI</span><span class="sxs-lookup"><span data-stu-id="778da-143">**Dual**: Tables with this setting can act as either cached or not cached, depending on the context of the query that's submitted to the Power BI dataset.</span></span> <span data-ttu-id="778da-144">ในบางกรณี คุณเติมเต็มคิวรีจากข้อมูลที่ถูกแคช</span><span class="sxs-lookup"><span data-stu-id="778da-144">In some cases, you fulfill queries from cached data.</span></span> <span data-ttu-id="778da-145">ในอีกกรณี คุณเติมเต็มคิวรีโดยการดำเนินการคิวรีตามคำขอไปยังแหล่งข้อมูล</span><span class="sxs-lookup"><span data-stu-id="778da-145">In other cases, you fulfill queries by executing an on-demand query to the data source.</span></span>

<span data-ttu-id="778da-146">การเปลี่ยน **โหมดที่เก็บข้อมูล** ของตารางเป็น **นำเข้า** เป็นการดำเนินการ *ที่เรียกกลับไม่ได้*</span><span class="sxs-lookup"><span data-stu-id="778da-146">Changing the **Storage mode** of a table to **Import** is an *irreversible* operation.</span></span> <span data-ttu-id="778da-147">หลังจากตั้งค่าแล้ว คุณสมบัตินี้จะไม่สามารถเปลี่ยนกลับไปยังทั้ง **DirectQuery** หรือ **Dual** ได้</span><span class="sxs-lookup"><span data-stu-id="778da-147">Once set, this property can't later be changed to either **DirectQuery** or **Dual**.</span></span>

> [!NOTE]
> <span data-ttu-id="778da-148">คุณสามารถใช้โหมดที่เก็บข้อมูลแบบ **Dual** ในทั้ง Power BI Desktop และบริการของ Power BI ได้</span><span class="sxs-lookup"><span data-stu-id="778da-148">You can use **Dual** storage mode in both Power BI Desktop and the Power BI service.</span></span>


## <a name="constraints-on-directquery-and-dual-tables"></a><span data-ttu-id="778da-149">ข้อจำกัดใน DirectQuery และ ตารางคู่</span><span class="sxs-lookup"><span data-stu-id="778da-149">Constraints on DirectQuery and Dual tables</span></span>

<span data-ttu-id="778da-150">ตารางคู่มีข้อจำกัดเช่นเดียวกับตาราง DirectQuery</span><span class="sxs-lookup"><span data-stu-id="778da-150">Dual tables have the same functional constraints as DirectQuery tables.</span></span> <span data-ttu-id="778da-151">ข้อจำกัดเหล่านี้ประกอบด้วย การจำกัดการเปลี่ยน M และการจำกัดฟังก์ชัน DAX ในคอลัมน์ที่มีการคำนวณ</span><span class="sxs-lookup"><span data-stu-id="778da-151">These constraints include limited M transformations and restricted DAX functions in calculated columns.</span></span> <span data-ttu-id="778da-152">สำหรับข้อมูลเพิ่มเติม โปรดดู [ส่วนเกี่ยวข้องของการใช้ DirectQuery](../connect-data/desktop-directquery-about.md#implications-of-using-directquery)</span><span class="sxs-lookup"><span data-stu-id="778da-152">For more information, see [Implications of using DirectQuery](../connect-data/desktop-directquery-about.md#implications-of-using-directquery).</span></span>

## <a name="propagation-of-the-dual-setting"></a><span data-ttu-id="778da-153">การเผยแพร่การตั้งค่าแบบ Dual</span><span class="sxs-lookup"><span data-stu-id="778da-153">Propagation of the Dual setting</span></span>
<span data-ttu-id="778da-154">ลองพิจารณาโมเดลง่าย ๆ ต่อไปนี้ ซึ่งตารางทั้งหมดมาจากแหล่งที่มาเดียวที่รองรับ นำเข้า และ DirectQuery</span><span class="sxs-lookup"><span data-stu-id="778da-154">Consider the following simple model, where all the tables are from a single source that supports Import and DirectQuery.</span></span>

![มุมมอง ความสัมพันธ์ตัวอย่าง สำหรับโหมดที่เก็บข้อมูล](media/desktop-storage-mode/storage-mode-04.png)

<span data-ttu-id="778da-156">สมมติว่าตารางทั้งหมดในโมเดลนี้ได้รับการตั้งค่าเป็น **DirectQuery**</span><span class="sxs-lookup"><span data-stu-id="778da-156">Let’s say all tables in this model are initially set to **DirectQuery**.</span></span> <span data-ttu-id="778da-157">หากแก้ไข **โหมดที่เก็บข้อมูล** ของตาราง **SurveyResponse** เป็น **นำเข้า** หน้าต่างคำเตือนต่อไปนี้จะแสดงขึ้นมา:</span><span class="sxs-lookup"><span data-stu-id="778da-157">If you then change the **Storage mode** of the **SurveyResponse** table to **Import**, the following warning window is displayed:</span></span>

![หน้าต่างเตือนโหมดที่เก็บข้อมูล](media/desktop-storage-mode/storage-mode-05.png)

<span data-ttu-id="778da-159">คุณสามารถตั้งค่าตารางมิติ (**ลูกค้า**, **ภูมิศาสตร์** และ **วันที่**) เป็น **Dual** เพื่อลดจำนวนความสัมพันธ์ที่จำกัดในชุดข้อมูล และปรับปรุงประสิทธิภาพการทำงาน</span><span class="sxs-lookup"><span data-stu-id="778da-159">You can set the dimension tables (**Customer**, **Geography**, and **Date**) to **Dual** to reduce the number of limited relationships in the dataset, and improve performance.</span></span> <span data-ttu-id="778da-160">โดยปกติแล้วความสัมพันธ์ที่จำกัดเกี่ยวข้องกับ DirectQuery อย่างน้อยหนึ่งตารางที่ตรรกะการเข้าร่วมไม่สามารถพุชไปยังระบบต้นทางได้</span><span class="sxs-lookup"><span data-stu-id="778da-160">Limited relationships normally involve at least one DirectQuery table where join logic can't be pushed to the source systems.</span></span> <span data-ttu-id="778da-161">เนื่องจากตารางแบบ Dual สามารถทำหน้าที่เป็น DirectQuery หรือตารางที่นำเข้าก็ได้ สถานการณ์นี้จะถูกหลีกเลี่ยง</span><span class="sxs-lookup"><span data-stu-id="778da-161">Because Dual tables can act as either DirectQuery or Import tables, this situation is avoided.</span></span>

<span data-ttu-id="778da-162">ตรรกะการกระจายได้รับการออกแบบมาเพื่อช่วยเหลือในโมเดลที่มีหลายตาราง</span><span class="sxs-lookup"><span data-stu-id="778da-162">The propagation logic is designed to help with models that contain many tables.</span></span> <span data-ttu-id="778da-163">สมมติว่าคุณมีแบบจำลองที่มีตาราง 50 ตาราง และมีเพียงตารางข้อเท็จจริงบางอย่าง (เชิงทรานแซคชัน) ที่จำเป็นต้องแคช</span><span class="sxs-lookup"><span data-stu-id="778da-163">Suppose you have a model with 50 tables and only certain fact (transactional) tables need to be cached.</span></span> <span data-ttu-id="778da-164">ตรรกะใน Power BI Desktop จะคำนวณชุดมิติตารางอย่างน้อยที่สุดที่ต้องตั้งค่าเป็น **คู่** ให้ คุณจึงไม่ต้องตั้งค่าเอง</span><span class="sxs-lookup"><span data-stu-id="778da-164">The logic in Power BI Desktop calculates the minimum set of dimension tables that must be set to **Dual**, so you don’t have to.</span></span>

<span data-ttu-id="778da-165">ตรรกะการกระจายจะทำการสำรวจไปยังด้านเดียวของความสัมพันธ์แบบหนึ่งต่อกลุ่มเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="778da-165">The propagation logic traverses only to the one side of one-to-many relationships.</span></span>

## <a name="storage-mode-usage-example"></a><span data-ttu-id="778da-166">ตัวอย่างการใช้งานโหมดที่เก็บข้อมูล</span><span class="sxs-lookup"><span data-stu-id="778da-166">Storage mode usage example</span></span>
<span data-ttu-id="778da-167">มาต่อกันที่ตัวอย่างจากส่วนก่อนหน้านี้ และสมมติว่าคุณใช้การตั้งค่าคุณสมบัติโหมดที่เก็บข้อมูล:</span><span class="sxs-lookup"><span data-stu-id="778da-167">Let's continue with the example from the previous section, and imagine applying the following storage mode property settings:</span></span>

| <span data-ttu-id="778da-168">ตาราง</span><span class="sxs-lookup"><span data-stu-id="778da-168">Table</span></span>                   | <span data-ttu-id="778da-169">โหมดการจัดเก็บข้อมูล</span><span class="sxs-lookup"><span data-stu-id="778da-169">Storage mode</span></span>         |
| ----------------------- |----------------------| 
| <span data-ttu-id="778da-170">ยอดขาย</span><span class="sxs-lookup"><span data-stu-id="778da-170">Sales</span></span>                 | <span data-ttu-id="778da-171">DirectQuery</span><span class="sxs-lookup"><span data-stu-id="778da-171">DirectQuery</span></span>          | 
| <span data-ttu-id="778da-172">SurveyResponse</span><span class="sxs-lookup"><span data-stu-id="778da-172">SurveyResponse</span></span>        | <span data-ttu-id="778da-173">นำเข้า</span><span class="sxs-lookup"><span data-stu-id="778da-173">Import</span></span>               | 
| <span data-ttu-id="778da-174">วันที่</span><span class="sxs-lookup"><span data-stu-id="778da-174">Date</span></span>                  | <span data-ttu-id="778da-175">คู่</span><span class="sxs-lookup"><span data-stu-id="778da-175">Dual</span></span>                 | 
| <span data-ttu-id="778da-176">ลูกค้า</span><span class="sxs-lookup"><span data-stu-id="778da-176">Customer</span></span>              | <span data-ttu-id="778da-177">คู่</span><span class="sxs-lookup"><span data-stu-id="778da-177">Dual</span></span>                 | 
| <span data-ttu-id="778da-178">ภูมิศาสตร์</span><span class="sxs-lookup"><span data-stu-id="778da-178">Geography</span></span>             | <span data-ttu-id="778da-179">คู่</span><span class="sxs-lookup"><span data-stu-id="778da-179">Dual</span></span>                 | 


<span data-ttu-id="778da-180">การตั้งค่าคุณสมบัติโหมดที่เก็บข้อมูลเหล่านี้ส่งผลต่อการทำงานต่อไปนี้ โดยสมมติว่าตาราง **การขาย** มีขนาดข้อมูลที่ใหญ่พอสมควร:</span><span class="sxs-lookup"><span data-stu-id="778da-180">Setting these storage mode properties results in the following behaviors, assuming that the **Sales** table has significant data volume:</span></span>
* <span data-ttu-id="778da-181">เนื่องจาก Power BI Desktop แคชตารางมิติ - **วันที่**, **ลูกค้า** และ **ภูมิศาสตร์** ดังนั้นเวลาโหลดของรายการแรกควรเร็วเมื่อเรียกแสดงค่า Slicer</span><span class="sxs-lookup"><span data-stu-id="778da-181">Power BI Desktop caches dimension tables, **Date**, **Customer**, and **Geography**, so load times of initial reports are fast when they retrieve slicer values to display.</span></span>
* <span data-ttu-id="778da-182">Power BI Desktop ไม่แคชตาราง **การขาย**</span><span class="sxs-lookup"><span data-stu-id="778da-182">Power BI Desktop doesn't cache the **Sales** table.</span></span> <span data-ttu-id="778da-183">เมื่อไม่แคชตารางนี้ Power BI Desktop จะแสดงผลลัพธ์ดังต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="778da-183">By not caching this table, Power BI Desktop provides the following results:</span></span>
    * <span data-ttu-id="778da-184">จำนวนครั้งการรีเฟรชข้อมูลดีขึ้น และการใช้พื้นที่หน่วยความจำลดลง</span><span class="sxs-lookup"><span data-stu-id="778da-184">Data-refresh times are improved, and memory consumption is reduced.</span></span>
    * <span data-ttu-id="778da-185">คิวรีรายงานที่ยึดตามตาราง **การขาย** ทำงานในโหมด **DirectQuery**</span><span class="sxs-lookup"><span data-stu-id="778da-185">Report queries that are based on the **Sales** table run in **DirectQuery** mode.</span></span> <span data-ttu-id="778da-186">คิวรีเหล่านี้อาจใช้เวลานานกว่า แต่ก็ใกล้เคียงกับเวลาจริงมากกว่าเนื่องจากไม่มีการเพิ่มความล่าช้าของข้อมูล</span><span class="sxs-lookup"><span data-stu-id="778da-186">These queries might take longer but are closer to real time because no caching latency is introduced.</span></span>

* <span data-ttu-id="778da-187">คิวรีรายงานที่ยึดตามตาราง **SurveyResponse** ถูกส่งกลับจากแคชหน่วยความจำ ดังนั้นจึงค่อนข้างเร็ว</span><span class="sxs-lookup"><span data-stu-id="778da-187">Report queries that are based on the **SurveyResponse** table are returned from the in-memory cache, and are therefore relatively fast.</span></span>

## <a name="queries-that-hit-or-miss-the-cache"></a><span data-ttu-id="778da-188">คิวรีที่ได้พบหรือไม่ได้พบแคช</span><span class="sxs-lookup"><span data-stu-id="778da-188">Queries that hit or miss the cache</span></span>

<span data-ttu-id="778da-189">หากคุณเชื่อมต่อ SQL Profiler กับช่องวินิจฉัยสำหรับ Power BI Desktop คุณจะสามารถเห็นคิวรีที่พบหรือไม่พบแคชหน่วยความจำโดยการแสดงร่องรอยตามเหตุการณ์ต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="778da-189">If you connect SQL Profiler to the diagnostics port for Power BI Desktop, you can see which queries hit or miss the in-memory cache by performing a trace that's based on the following events:</span></span>

* <span data-ttu-id="778da-190">เหตุการณ์คิวรี\เริ่มต้นคิวรี</span><span class="sxs-lookup"><span data-stu-id="778da-190">Queries Events\Query Begin</span></span>
* <span data-ttu-id="778da-191">การประมวลผลคิวรี\เริ่มต้นคิวรี Vertipaq SE</span><span class="sxs-lookup"><span data-stu-id="778da-191">Query Processing\Vertipaq SE Query Begin</span></span>
* <span data-ttu-id="778da-192">การประมวลผลคิวรี\เริ่มต้น DirectQuery</span><span class="sxs-lookup"><span data-stu-id="778da-192">Query Processing\DirectQuery Begin</span></span>

<span data-ttu-id="778da-193">สำหรับแต่ละเหตุการณ์ *เริ่มต้นคิวรี* ให้ตรวจสอบเหตุการณ์อื่น ๆ ที่มี *ActivityID* เดียวกัน</span><span class="sxs-lookup"><span data-stu-id="778da-193">For each *Query Begin* event, check other events with the same *ActivityID*.</span></span> <span data-ttu-id="778da-194">ตัวอย่างเช่น หากไม่มีเหตุการณ์ *DirectQuery Begin* แต่มีเหตุการณ์ *Vertipaq SE Query Begin* คิวรีจะถูกตอบจากแคช</span><span class="sxs-lookup"><span data-stu-id="778da-194">For example, if there isn't a *DirectQuery Begin* event, but there's a *Vertipaq SE Query Begin* event, the query is answered from the cache.</span></span>

<span data-ttu-id="778da-195">คิวรีที่อ้างอิงถึงตาราง Dual จะแสดงข้อมูลจากแคช หากเป็นไปได้ หรืออาจจะเปลี่ยนกลับไปยัง DirectQuery</span><span class="sxs-lookup"><span data-stu-id="778da-195">Queries that refer to Dual tables return data from the cache, if possible; otherwise, they revert to DirectQuery.</span></span>

<span data-ttu-id="778da-196">จากตัวอย่างก่อนหน้านี้ คิวรีต่อไปนี้อิงคอลัมน์จากตาราง **วันที่** ซึ่งอยู่ในโหมด **คู่** เท่านั้น</span><span class="sxs-lookup"><span data-stu-id="778da-196">Continuing the previous example, the following query refers only to a column from the **Date** table, which is in **Dual** mode.</span></span> <span data-ttu-id="778da-197">ดังนั้น คิวรีควรได้พบแคช:</span><span class="sxs-lookup"><span data-stu-id="778da-197">Therefore, the query should hit the cache:</span></span>

![สกรีนช็อตแสดงข้อความของคิวรีที่อ้างอิงถึงตารางวันที่](media/desktop-storage-mode/storage-mode-06.png)

<span data-ttu-id="778da-199">คิวรีต่อไปนี้อ้างอิงเฉพาะคอลัมน์จากตาราง **การขาย** เท่านั้น ซึ่งอยู่ในโหมด **DirectQuery**</span><span class="sxs-lookup"><span data-stu-id="778da-199">The following query refers only to a column from the **Sales** table, which is in **DirectQuery** mode.</span></span> <span data-ttu-id="778da-200">ดังนั้น จึง *ไม่* ควรพบแคช:</span><span class="sxs-lookup"><span data-stu-id="778da-200">Therefore, it should *not* hit the cache:</span></span>

![สกรีนช็อตแสดงข้อความของคิวรีที่อ้างอิงถึงตารางยอดขาย](media/desktop-storage-mode/storage-mode-07.png)

<span data-ttu-id="778da-202">คิวรีต่อไปนี้น่าสนใจเพราะรวมสองคอลัมน์ไว้ด้วยกัน</span><span class="sxs-lookup"><span data-stu-id="778da-202">The following query is interesting because it combines both columns.</span></span> <span data-ttu-id="778da-203">คิวนี้รีไม่ได้พบแคช</span><span class="sxs-lookup"><span data-stu-id="778da-203">This query doesn't hit the cache.</span></span> <span data-ttu-id="778da-204">ในตอนแรกคุณอาจคาดหวังเรียกดูค่า **CalendarYear** จากแคชและค่า **SalesAmount** จากแหล่งที่มา และรวมผลลัพธ์ แต่วิธีการนี้มีประสิทธิภาพน้อยกว่าการส่งการดำเนินการ SUM/GROUP BY ไปยังระบบแหล่งที่มา</span><span class="sxs-lookup"><span data-stu-id="778da-204">You might initially expect it to retrieve **CalendarYear** values from the cache and **SalesAmount** values from the source and then combine the results, but this approach is less efficient than submitting the SUM/GROUP BY operation to the source system.</span></span> <span data-ttu-id="778da-205">หากการดำเนินการถูกผลักลงไปที่แหล่งที่มา จำนวนแถวที่ส่งกลับมาจะน้อยกว่านี้มาก</span><span class="sxs-lookup"><span data-stu-id="778da-205">If the operation is pushed down to the source, the number of rows returned will likely be far less:</span></span> 

![สกรีนช็อตแสดงข้อความของคิวรีที่อ้างอิงถึงทั้งตารางวันที่และตารางยอดขาย](media/desktop-storage-mode/storage-mode-08.png)

> [!NOTE]
> <span data-ttu-id="778da-207">การทำงานนี้ต่างจาก[ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่ม](desktop-many-to-many-relationships.md)ใน Power BI Desktop เมื่อทำการรวมตารางที่ถูกแคชและไม่ได้ถูกแคชเข้าด้วยกัน</span><span class="sxs-lookup"><span data-stu-id="778da-207">This behavior is different from [many-to-many relationships](desktop-many-to-many-relationships.md) in Power BI Desktop when cached and non-cached tables are combined.</span></span>

## <a name="caches-should-be-kept-in-sync"></a><span data-ttu-id="778da-208">แคชควรจะซิงค์อยู่เสมอ</span><span class="sxs-lookup"><span data-stu-id="778da-208">Caches should be kept in sync</span></span>

<span data-ttu-id="778da-209">คิวรีที่แสดงในส่วนก่อนหน้า จะแสดงตาราง Dual ที่ในบางครั้งจะพบแคชและในบางครั้ง ไม่พบ</span><span class="sxs-lookup"><span data-stu-id="778da-209">The queries displayed in the previous section show that Dual tables sometimes hit the cache and sometimes don't.</span></span> <span data-ttu-id="778da-210">ดังนั้น หากแคชหมดอายุ ค่าที่แตกต่างออกไปสามารถถูกส่งกลับได้</span><span class="sxs-lookup"><span data-stu-id="778da-210">As a result, if the cache is out of date, different values can be returned.</span></span> <span data-ttu-id="778da-211">การดำเนินการคิวรีจะไม่ซ่อนปัญหาของข้อมูลโดยวิธีอย่างเช่นการกรองผลลัพธ์ DirectQuery ให้ตรงกับค่าที่ถูกแคช</span><span class="sxs-lookup"><span data-stu-id="778da-211">Query execution won't attempt to mask data issues by, for example, filtering DirectQuery results to match cached values.</span></span> <span data-ttu-id="778da-212">เป็นหน้าที่ของคุณที่จะทราบทิศทางของข้อมูล และคุณควรออกแบบให้สอดคล้องกัน</span><span class="sxs-lookup"><span data-stu-id="778da-212">It's your responsibility to know your data flows, and you should design accordingly.</span></span> <span data-ttu-id="778da-213">มีเทคนิคที่ใช้กันในการจัดการกับกรณีเช่นนั้นที่แหล่งที่มา หากจำเป็น</span><span class="sxs-lookup"><span data-stu-id="778da-213">There are established techniques to handle such cases at the source, if necessary.</span></span>

<span data-ttu-id="778da-214">โหมดที่เก็บข้อมูล **คู่** เป็นการปรับประสิทธิภาพให้เหมาะสม</span><span class="sxs-lookup"><span data-stu-id="778da-214">The **Dual** storage mode is a performance optimization.</span></span> <span data-ttu-id="778da-215">จึงควรใช้ในทางที่จะไม่เกิดอันตรายต่อความสามารถตามคำขอเชิงธุรกิจเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="778da-215">It should be used only in ways that don't compromise the ability to meet business requirements.</span></span> <span data-ttu-id="778da-216">สำหรับการทำงานทางเลือก ลองพิจารณาใช้เทคนิคที่อธิบายใน [ความสัมพันธ์แบบกลุ่ม-ต่อ-กลุ่มใน Power BI Desktop](desktop-many-to-many-relationships.md)</span><span class="sxs-lookup"><span data-stu-id="778da-216">For alternative behavior, consider using the techniques described in the [Many-to-many relationships in Power BI Desktop](desktop-many-to-many-relationships.md).</span></span>

## <a name="data-view"></a><span data-ttu-id="778da-217">มุมมองข้อมูล</span><span class="sxs-lookup"><span data-stu-id="778da-217">Data view</span></span>
<span data-ttu-id="778da-218">หากตารางอย่างน้อยหนึ่งตารางในชุดข้อมูลมีโหมดที่เก็บข้อมูลตั้งค่าเป็น **นำเข้า** หรือ **คู่** แท็บมุมมอง **ข้อมูล** จะแสดงขึ้นมา</span><span class="sxs-lookup"><span data-stu-id="778da-218">If at least one table in the dataset has its storage mode set to either **Import** or **Dual**, the **Data** view tab is displayable.</span></span>

![มุมมองข้อมูลใน Power BI Desktop](media/desktop-storage-mode/storage-mode-03.png)

<span data-ttu-id="778da-220">เมื่อคุณเลือกตารางแบบคู่และนำเข้าในมุมมอง **ข้อมูล** ตารางจะแสดงข้อมูลที่แคช</span><span class="sxs-lookup"><span data-stu-id="778da-220">When you select Dual and Import tables in **Data** view, they show cached data.</span></span> <span data-ttu-id="778da-221">ตาราง DirectQuery จะไม่แสดงข้อมูล และข้อความจะแสดงขึ้นว่า ไม่สามารถแสดงตาราง DirectQuery ได้</span><span class="sxs-lookup"><span data-stu-id="778da-221">DirectQuery tables don't show data, and a message is displayed that states that DirectQuery tables can't be shown.</span></span>


## <a name="limitations-and-considerations"></a><span data-ttu-id="778da-222">ข้อจำกัดและข้อควรพิจารณา</span><span class="sxs-lookup"><span data-stu-id="778da-222">Limitations and considerations</span></span>

<span data-ttu-id="778da-223">มีข้อจำกัดเล็กน้อยสำหรับการเผยแพร่โหมดที่เก็บข้อมูลและสหสัมพันธ์กับโมเดลแบบรวม</span><span class="sxs-lookup"><span data-stu-id="778da-223">There are a few limitations for this release of storage mode and its correlation with composite models.</span></span>

<span data-ttu-id="778da-224">แหล่งการเชื่อมต่อของ Live Connect ดังต่อไปนี้ (ขนาดที่หลากหลาย) ไม่สามารถใช้กับโมเดลแบบรวม:</span><span class="sxs-lookup"><span data-stu-id="778da-224">The following live connection (multi-dimensional) sources can't be used with composite models:</span></span>

* <span data-ttu-id="778da-225">SAP HANA</span><span class="sxs-lookup"><span data-stu-id="778da-225">SAP HANA</span></span>
* <span data-ttu-id="778da-226">SAP Business Warehouse</span><span class="sxs-lookup"><span data-stu-id="778da-226">SAP Business Warehouse</span></span>
* <span data-ttu-id="778da-227">SQL Server Analysis Services</span><span class="sxs-lookup"><span data-stu-id="778da-227">SQL Server Analysis Services</span></span>
* <span data-ttu-id="778da-228">ชุดข้อมูล Power BI</span><span class="sxs-lookup"><span data-stu-id="778da-228">Power BI datasets</span></span>
* <span data-ttu-id="778da-229">Azure Analysis Services</span><span class="sxs-lookup"><span data-stu-id="778da-229">Azure Analysis Services</span></span>

<span data-ttu-id="778da-230">เมื่อทำการเชื่อมต่อกับแหล่งที่มาหลายขนาดเหล่านี้โดยใช้ DirectQuery คุณจะไม่สามารถเชื่อมต่อกับแหล่งที่มา DirectQuery อีกแห่งหรือรวมเข้ากับข้อมูลที่นำเข้าได้</span><span class="sxs-lookup"><span data-stu-id="778da-230">When you connect to those multi-dimensional sources by using DirectQuery, you can't connect to another DirectQuery source or combine it with imported data.</span></span>

<span data-ttu-id="778da-231">ข้อจำกัดของการใช้ DirectQuery ที่มีจะยังคงมีผลเมื่อคุณใช้โมเดลแบบรวม</span><span class="sxs-lookup"><span data-stu-id="778da-231">The existing limitations of using DirectQuery still apply when you use composite models.</span></span> <span data-ttu-id="778da-232">โดยข้อจำกัดมากมายมีผลขึ้นอยู่กับแต่ละตาราง ซึ่งขึ้นอยู่กับโหมดที่เก็บข้อมูลของตารางนั้นๆ</span><span class="sxs-lookup"><span data-stu-id="778da-232">Many of those limitations are now per table, depending upon the storage mode of the table.</span></span> <span data-ttu-id="778da-233">ตัวอย่างเช่น คอลัมน์ที่ได้รับการคำนวณบนตารางที่นำเข้าสามารถอ้างอิงไปยังตารางอื่น แต่ตารางที่ได้รับการคำนวณบนตาราง DirectQuery จะยังคงถูกจำกัดให้อ้างอิงไปยังคอลัมน์บนตารางเดียวกันเท่านั้น</span><span class="sxs-lookup"><span data-stu-id="778da-233">For example, a calculated column on an imported table can refer to other tables, but a calculated column on a DirectQuery table is still restricted to refer only to columns on the same table.</span></span> <span data-ttu-id="778da-234">ข้อจำกัดอื่น ๆ มีผลกับโมเดลทั้งหมด หากมีตารางใดภายในโมเดลที่เป็น DirectQuery</span><span class="sxs-lookup"><span data-stu-id="778da-234">Other limitations apply to the model as a whole, if any of the tables within the model are DirectQuery.</span></span> <span data-ttu-id="778da-235">ตัวอย่างเช่น คุณลักษณะ QuickInsights และ Q&A จะไม่สามารถใช้งานได้บนโมเดลหากมีตารางใดภายในโมเดลมีโหมดที่เก็บข้อมูลของ DirectQuery</span><span class="sxs-lookup"><span data-stu-id="778da-235">For example, the QuickInsights and Q&A features aren't available on a model if any of the tables within it has a storage mode of DirectQuery.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="778da-236">ขั้นตอนถัดไป</span><span class="sxs-lookup"><span data-stu-id="778da-236">Next steps</span></span>

<span data-ttu-id="778da-237">สำหรับข้อมูลเพิ่มเติมเกี่ยวกับโมเดลแบบรวมและ DirectQuery โปรดดูบทความต่อไปนี้:</span><span class="sxs-lookup"><span data-stu-id="778da-237">For more information about composite models and DirectQuery, see the following articles:</span></span>
* [<span data-ttu-id="778da-238">โมเดลแบบรวมใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="778da-238">Composite models in Power BI Desktop</span></span>](desktop-composite-models.md)
* [<span data-ttu-id="778da-239">ความสัมพันธ์แบบกลุ่มต่อกลุ่มใน Power BI Desktop</span><span class="sxs-lookup"><span data-stu-id="778da-239">Many-to-many relationships in Power BI Desktop</span></span>](desktop-many-to-many-relationships.md)
* [<span data-ttu-id="778da-240">ใช้ DirectQuery ใน Power BI</span><span class="sxs-lookup"><span data-stu-id="778da-240">Use DirectQuery in Power BI</span></span>](../connect-data/desktop-directquery-about.md)
* [<span data-ttu-id="778da-241">แหล่งข้อมูลที่ได้รับการรองรับโดย DirectQuery ใน Power BI</span><span class="sxs-lookup"><span data-stu-id="778da-241">Data sources supported by DirectQuery in Power BI</span></span>](../connect-data/power-bi-data-sources.md)
